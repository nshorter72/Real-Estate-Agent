var Qn=Object.defineProperty;var gn=C=>{throw TypeError(C)};var Zn=(C,i,t)=>i in C?Qn(C,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):C[i]=t;var Qt=(C,i,t)=>Zn(C,typeof i!="symbol"?i+"":i,t),Ie=(C,i,t)=>i.has(C)||gn("Cannot "+t);var r=(C,i,t)=>(Ie(C,i,"read from private field"),t?t.call(C):i.get(C)),ht=(C,i,t)=>i.has(C)?gn("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(C):i.set(C,t),ut=(C,i,t,e)=>(Ie(C,i,"write to private field"),e?e.call(C,t):i.set(C,t),t),q=(C,i,t)=>(Ie(C,i,"access private method"),t);var he=(C,i,t,e)=>({set _(n){ut(C,i,n,t)},get _(){return r(C,i,e)}});import{g as getAugmentedNamespace,a as getDefaultExportFromCjs,c as commonjsGlobal}from"./index-AFXXgdye.js";import{c as commonjsRequire}from"./_commonjs-dynamic-modules-TDtrdbi3.js";function _mergeNamespaces(C,i){for(var t=0;t<i.length;t++){const e=i[t];if(typeof e!="string"&&!Array.isArray(e)){for(const n in e)if(n!=="default"&&!(n in C)){const o=Object.getOwnPropertyDescriptor(e,n);o&&Object.defineProperty(C,n,o.get?o:{enumerable:!0,get:()=>e[n]})}}}return Object.freeze(Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}))}var pdf$2={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(__viteBrowserExternal$1);var path2dPolyfill_esm={},hasRequiredPath2dPolyfill_esm;function requirePath2dPolyfill_esm(){if(hasRequiredPath2dPolyfill_esm)return path2dPolyfill_esm;hasRequiredPath2dPolyfill_esm=1;function C(a,c,l){for(var s=0,v=c.length,D;s<v;s++)(D||!(s in c))&&(D||(D=Array.prototype.slice.call(c,0,s)),D[s]=c[s]);return a.concat(D||Array.prototype.slice.call(c))}var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,e=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function n(a){var c=a.match(e);return c?c.map(Number):[]}function o(a){var c=[],l=String(a).trim();return l[0]!=="M"&&l[0]!=="m"||l.replace(t,function(s,v,D){var P=n(D),h=v.toLowerCase(),g=v;if(h==="m"&&P.length>2&&(c.push(C([g],P.splice(0,2))),h="l",g=g==="m"?"l":"L"),P.length<i[h])return"";for(c.push(C([g],P.splice(0,i[h])));P.length>=i[h]&&P.length&&i[h];)c.push(C([g],P.splice(0,i[h])));return""}),c}function m(a,c){var l=a.x*Math.cos(c)-a.y*Math.sin(c),s=a.y*Math.cos(c)+a.x*Math.sin(c);a.x=l,a.y=s}function w(a,c,l){a.x+=c,a.y+=l}function T(a,c){a.x*=c,a.y*=c}var y=function(){function a(c){var l;this.commands=[],c&&c instanceof a?(l=this.commands).push.apply(l,c.commands):c&&(this.commands=o(c))}return a.prototype.addPath=function(c){var l;c&&c instanceof a&&(l=this.commands).push.apply(l,c.commands)},a.prototype.moveTo=function(c,l){this.commands.push(["M",c,l])},a.prototype.lineTo=function(c,l){this.commands.push(["L",c,l])},a.prototype.arc=function(c,l,s,v,D,P){this.commands.push(["AC",c,l,s,v,D,!!P])},a.prototype.arcTo=function(c,l,s,v,D){this.commands.push(["AT",c,l,s,v,D])},a.prototype.ellipse=function(c,l,s,v,D,P,h,g){this.commands.push(["E",c,l,s,v,D,P,h,!!g])},a.prototype.closePath=function(){this.commands.push(["Z"])},a.prototype.bezierCurveTo=function(c,l,s,v,D,P){this.commands.push(["C",c,l,s,v,D,P])},a.prototype.quadraticCurveTo=function(c,l,s,v){this.commands.push(["Q",c,l,s,v])},a.prototype.rect=function(c,l,s,v){this.commands.push(["R",c,l,s,v])},a.prototype.roundRect=function(c,l,s,v,D){typeof D>"u"?this.commands.push(["RR",c,l,s,v,0]):this.commands.push(["RR",c,l,s,v,D])},a}();function f(a,c){var l=0,s=0,v,D,P,h,g,u,S,x,z,b,L,G,st,_,J,K,it,W,Y,rt,$,d=null,p=null,M=null,N=null,F=null,I=null;a.beginPath();for(var X=0;X<c.length;++X){W=c[X][0],W!=="S"&&W!=="s"&&W!=="C"&&W!=="c"&&(d=null,p=null),W!=="T"&&W!=="t"&&W!=="Q"&&W!=="q"&&(M=null,N=null);var H=void 0;switch(W){case"m":case"M":H=c[X],W==="m"?(l+=H[1],s+=H[2]):(l=H[1],s=H[2]),(W==="M"||!F)&&(F={x:l,y:s}),a.moveTo(l,s);break;case"l":H=c[X],l+=H[1],s+=H[2],a.lineTo(l,s);break;case"L":H=c[X],l=H[1],s=H[2],a.lineTo(l,s);break;case"H":H=c[X],l=H[1],a.lineTo(l,s);break;case"h":H=c[X],l+=H[1],a.lineTo(l,s);break;case"V":H=c[X],s=H[1],a.lineTo(l,s);break;case"v":H=c[X],s+=H[1],a.lineTo(l,s);break;case"a":case"A":if(H=c[X],I===null)throw new Error("This should never happen");W==="a"?(l+=H[6],s+=H[7]):(l=H[6],s=H[7]),_=H[1],J=H[2],S=H[3]*Math.PI/180,P=!!H[4],h=!!H[5],g={x:l,y:s},u={x:(I.x-g.x)/2,y:(I.y-g.y)/2},m(u,-S),x=u.x*u.x/(_*_)+u.y*u.y/(J*J),x>1&&(x=Math.sqrt(x),_*=x,J*=x),Y={x:_*u.y/J,y:-(J*u.x)/_},z=_*_*J*J,b=_*_*u.y*u.y+J*J*u.x*u.x,h!==P?T(Y,Math.sqrt((z-b)/b)||0):T(Y,-Math.sqrt((z-b)/b)||0),D=Math.atan2((u.y-Y.y)/J,(u.x-Y.x)/_),v=Math.atan2(-(u.y+Y.y)/J,-(u.x+Y.x)/_),m(Y,S),w(Y,(g.x+I.x)/2,(g.y+I.y)/2),a.save(),a.translate(Y.x,Y.y),a.rotate(S),a.scale(_,J),a.arc(0,0,1,D,v,!h),a.restore();break;case"C":H=c[X],d=H[3],p=H[4],l=H[5],s=H[6],a.bezierCurveTo(H[1],H[2],d,p,l,s);break;case"c":H=c[X],a.bezierCurveTo(H[1]+l,H[2]+s,H[3]+l,H[4]+s,H[5]+l,H[6]+s),d=H[3]+l,p=H[4]+s,l+=H[5],s+=H[6];break;case"S":H=c[X],(d===null||p===null)&&(d=l,p=s),a.bezierCurveTo(2*l-d,2*s-p,H[1],H[2],H[3],H[4]),d=H[1],p=H[2],l=H[3],s=H[4];break;case"s":H=c[X],(d===null||p===null)&&(d=l,p=s),a.bezierCurveTo(2*l-d,2*s-p,H[1]+l,H[2]+s,H[3]+l,H[4]+s),d=H[1]+l,p=H[2]+s,l+=H[3],s+=H[4];break;case"Q":H=c[X],M=H[1],N=H[2],l=H[3],s=H[4],a.quadraticCurveTo(M,N,l,s);break;case"q":H=c[X],M=H[1]+l,N=H[2]+s,l+=H[3],s+=H[4],a.quadraticCurveTo(M,N,l,s);break;case"T":H=c[X],(M===null||N===null)&&(M=l,N=s),M=2*l-M,N=2*s-N,l=H[1],s=H[2],a.quadraticCurveTo(M,N,l,s);break;case"t":H=c[X],(M===null||N===null)&&(M=l,N=s),M=2*l-M,N=2*s-N,l+=H[1],s+=H[2],a.quadraticCurveTo(M,N,l,s);break;case"z":case"Z":F&&(l=F.x,s=F.y),F=null,a.closePath();break;case"AC":H=c[X],l=H[1],s=H[2],st=H[3],D=H[4],v=H[5],rt=H[6],a.arc(l,s,st,D,v,rt);break;case"AT":H=c[X],L=H[1],G=H[2],l=H[3],s=H[4],st=H[5],a.arcTo(L,G,l,s,st);break;case"E":H=c[X],l=H[1],s=H[2],_=H[3],J=H[4],S=H[5],D=H[6],v=H[7],rt=H[8],a.save(),a.translate(l,s),a.rotate(S),a.scale(_,J),a.arc(0,0,1,D,v,rt),a.restore();break;case"R":H=c[X],l=H[1],s=H[2],K=H[3],it=H[4],F={x:l,y:s},a.rect(l,s,K,it);break;case"RR":H=c[X],l=H[1],s=H[2],K=H[3],it=H[4],$=H[5],F={x:l,y:s},a.roundRect(l,s,K,it,$);break}I?(I.x=l,I.y=s):I={x:l,y:s}}}function R(a){if(!(!a||!a.CanvasRenderingContext2D||a.Path2D)){var c=a.CanvasRenderingContext2D,l=c.prototype.fill,s=c.prototype.stroke,v=c.prototype.isPointInPath;c.prototype.fill=function(){for(var P=[],h=0;h<arguments.length;h++)P[h]=arguments[h];if(P[0]instanceof y){var g=P[0],u=P[1]||"nonzero";f(this,g.commands),l.apply(this,[u])}else{var u=P[0]||"nonzero";return l.apply(this,[u])}},c.prototype.stroke=function(P){P&&f(this,P.commands),s.apply(this)},c.prototype.isPointInPath=function(){for(var P=[],h=0;h<arguments.length;h++)P[h]=arguments[h];if(P[0]instanceof y){var g=P[0],u=P[1],S=P[2],x=P[3]||"nonzero";return f(this,g.commands),v.apply(this,[u,S,x])}else return v.apply(this,P)},a.Path2D=y}}function E(a,c,l,s,v){var D=this;if(v===void 0&&(v=0),typeof v=="number"&&(v=[v]),Array.isArray(v)){if(v.length===0||v.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(v.length," radii provided. Between one and four radii are necessary."));v.forEach(function(x){if(x<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(D.constructor.name,"': Radius value ").concat(x," is negative."))})}else return;if(v.length===1&&v[0]===0)return this.rect(a,c,l,s);var P=Math.min(l,s)/2,h,g,u,S=h=g=u=Math.min(P,v[0]);v.length===2&&(h=u=Math.min(P,v[1])),v.length===3&&(h=u=Math.min(P,v[1]),g=Math.min(P,v[2])),v.length===4&&(h=Math.min(P,v[1]),g=Math.min(P,v[2]),u=Math.min(P,v[3])),this.moveTo(a,c+s-u),this.arcTo(a,c,a+S,c,S),this.arcTo(a+l,c,a+l,c+h,h),this.arcTo(a+l,c+s,a+l-g,c+s,g),this.arcTo(a,c+s,a,c+s-u,u),this.moveTo(a,c)}function A(a){if(!(!a||!a.CanvasRenderingContext2D)){var c=a.CanvasRenderingContext2D,l=a.Path2D;c&&!c.prototype.roundRect&&(c.prototype.roundRect=E),l&&!l.prototype.roundRect&&(l.prototype.roundRect=E)}}return R(window),A(window),path2dPolyfill_esm}(function(module,exports){(function(i,t){module.exports=i.pdfjsLib=t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(C,i,t)=>{var Yt;Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.TextRenderingMode=i.RenderingIntentFlag=i.PromiseCapability=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.MAX_IMAGE_SIZE_TO_CACHE=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.BASELINE_FACTOR=i.AnnotationType=i.AnnotationReplyType=i.AnnotationPrefix=i.AnnotationMode=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.assert=Y,i.bytesToString=dt,i.createValidAbsoluteUrl=$,i.getModificationDate=$t,i.getUuid=Gt,i.getVerbosityLevel=J,i.info=K,i.isArrayBuffer=kt,i.isArrayEqual=wt,i.isNodeJS=void 0,i.normalizeUnicode=Bt,i.objectFromMap=nt,i.objectSize=bt,i.setVerbosityLevel=_,i.shadow=d,i.string32=At,i.stringToBytes=gt,i.stringToPDFString=xt,i.stringToUTF8String=Et,i.unreachable=W,i.utf8StringToString=at,i.warn=it,t(2),t(84),t(86),t(87),t(89),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);const e=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=e;const n=[1,0,0,1,0,0];i.IDENTITY_MATRIX=n;const o=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=o;const m=1e7;i.MAX_IMAGE_SIZE_TO_CACHE=m;const w=1.35;i.LINE_FACTOR=w;const T=.35;i.LINE_DESCENT_FACTOR=T;const y=T/w;i.BASELINE_FACTOR=y;const f={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=f;const R={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=R;const E="pdfjs_internal_editor_";i.AnnotationEditorPrefix=E;const A={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};i.AnnotationEditorType=A;const a={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};i.AnnotationEditorParamsType=a;const c={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=c;const l={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=l;const s={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=s;const v={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=v;const D={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=D;const P={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=P;const h={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=h;const g={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=g;const u={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=u;const S={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=S;const x={O:"PageOpen",C:"PageClose"};i.PageActionEventType=x;const z={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=z;const b={NONE:0,BINARY:1};i.CMapCompressionType=b;const L={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=L;const G={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=G;let st=z.WARNINGS;function _(Tt){Number.isInteger(Tt)&&(st=Tt)}function J(){return st}function K(Tt){st>=z.INFOS&&console.log(`Info: ${Tt}`)}function it(Tt){st>=z.WARNINGS&&console.log(`Warning: ${Tt}`)}function W(Tt){throw new Error(Tt)}function Y(Tt,ot){Tt||W(ot)}function rt(Tt){switch(Tt==null?void 0:Tt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function $(Tt){let ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Tt)return null;try{if(ct&&typeof Tt=="string"){if(ct.addDefaultProtocol&&Tt.startsWith("www.")){const Wt=Tt.match(/\./g);(Wt==null?void 0:Wt.length)>=2&&(Tt=`http://${Tt}`)}if(ct.tryConvertEncoding)try{Tt=Et(Tt)}catch{}}const It=ot?new URL(Tt,ot):new URL(Tt);if(rt(It))return It}catch{}return null}function d(Tt,ot,ct){let It=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return Object.defineProperty(Tt,ot,{value:ct,enumerable:!It,configurable:!0,writable:!1}),ct}const p=function(){function ot(ct,It){this.constructor===ot&&W("Cannot initialize BaseException."),this.message=ct,this.name=It}return ot.prototype=new Error,ot.constructor=ot,ot}();i.BaseException=p;class M extends p{constructor(ot,ct){super(ot,"PasswordException"),this.code=ct}}i.PasswordException=M;class N extends p{constructor(ot,ct){super(ot,"UnknownErrorException"),this.details=ct}}i.UnknownErrorException=N;class F extends p{constructor(ot){super(ot,"InvalidPDFException")}}i.InvalidPDFException=F;class I extends p{constructor(ot){super(ot,"MissingPDFException")}}i.MissingPDFException=I;class X extends p{constructor(ot,ct){super(ot,"UnexpectedResponseException"),this.status=ct}}i.UnexpectedResponseException=X;class H extends p{constructor(ot){super(ot,"FormatError")}}i.FormatError=H;class et extends p{constructor(ot){super(ot,"AbortException")}}i.AbortException=et;function dt(Tt){(typeof Tt!="object"||(Tt==null?void 0:Tt.length)===void 0)&&W("Invalid argument for bytesToString");const ot=Tt.length,ct=8192;if(ot<ct)return String.fromCharCode.apply(null,Tt);const It=[];for(let Wt=0;Wt<ot;Wt+=ct){const k=Math.min(Wt+ct,ot),Z=Tt.subarray(Wt,k);It.push(String.fromCharCode.apply(null,Z))}return It.join("")}function gt(Tt){typeof Tt!="string"&&W("Invalid argument for stringToBytes");const ot=Tt.length,ct=new Uint8Array(ot);for(let It=0;It<ot;++It)ct[It]=Tt.charCodeAt(It)&255;return ct}function At(Tt){return String.fromCharCode(Tt>>24&255,Tt>>16&255,Tt>>8&255,Tt&255)}function bt(Tt){return Object.keys(Tt).length}function nt(Tt){const ot=Object.create(null);for(const[ct,It]of Tt)ot[ct]=It;return ot}function ft(){const Tt=new Uint8Array(4);return Tt[0]=1,new Uint32Array(Tt.buffer,0,1)[0]===1}function U(){try{return new Function(""),!0}catch{return!1}}class V{static get isLittleEndian(){return d(this,"isLittleEndian",ft())}static get isEvalSupported(){return d(this,"isEvalSupported",U())}static get isOffscreenCanvasSupported(){return d(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?d(this,"platform",{isWin:!1,isMac:!1}):d(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var ot,ct;return d(this,"isCSSRoundSupported",(ct=(ot=globalThis.CSS)==null?void 0:ot.supports)==null?void 0:ct.call(ot,"width: round(1.5px, 1px)"))}}i.FeatureTest=V;const tt=[...Array(256).keys()].map(Tt=>Tt.toString(16).padStart(2,"0"));class lt{static makeHexColor(ot,ct,It){return`#${tt[ot]}${tt[ct]}${tt[It]}`}static scaleMinMax(ot,ct){let It;ot[0]?(ot[0]<0&&(It=ct[0],ct[0]=ct[1],ct[1]=It),ct[0]*=ot[0],ct[1]*=ot[0],ot[3]<0&&(It=ct[2],ct[2]=ct[3],ct[3]=It),ct[2]*=ot[3],ct[3]*=ot[3]):(It=ct[0],ct[0]=ct[2],ct[2]=It,It=ct[1],ct[1]=ct[3],ct[3]=It,ot[1]<0&&(It=ct[2],ct[2]=ct[3],ct[3]=It),ct[2]*=ot[1],ct[3]*=ot[1],ot[2]<0&&(It=ct[0],ct[0]=ct[1],ct[1]=It),ct[0]*=ot[2],ct[1]*=ot[2]),ct[0]+=ot[4],ct[1]+=ot[4],ct[2]+=ot[5],ct[3]+=ot[5]}static transform(ot,ct){return[ot[0]*ct[0]+ot[2]*ct[1],ot[1]*ct[0]+ot[3]*ct[1],ot[0]*ct[2]+ot[2]*ct[3],ot[1]*ct[2]+ot[3]*ct[3],ot[0]*ct[4]+ot[2]*ct[5]+ot[4],ot[1]*ct[4]+ot[3]*ct[5]+ot[5]]}static applyTransform(ot,ct){const It=ot[0]*ct[0]+ot[1]*ct[2]+ct[4],Wt=ot[0]*ct[1]+ot[1]*ct[3]+ct[5];return[It,Wt]}static applyInverseTransform(ot,ct){const It=ct[0]*ct[3]-ct[1]*ct[2],Wt=(ot[0]*ct[3]-ot[1]*ct[2]+ct[2]*ct[5]-ct[4]*ct[3])/It,k=(-ot[0]*ct[1]+ot[1]*ct[0]+ct[4]*ct[1]-ct[5]*ct[0])/It;return[Wt,k]}static getAxialAlignedBoundingBox(ot,ct){const It=this.applyTransform(ot,ct),Wt=this.applyTransform(ot.slice(2,4),ct),k=this.applyTransform([ot[0],ot[3]],ct),Z=this.applyTransform([ot[2],ot[1]],ct);return[Math.min(It[0],Wt[0],k[0],Z[0]),Math.min(It[1],Wt[1],k[1],Z[1]),Math.max(It[0],Wt[0],k[0],Z[0]),Math.max(It[1],Wt[1],k[1],Z[1])]}static inverseTransform(ot){const ct=ot[0]*ot[3]-ot[1]*ot[2];return[ot[3]/ct,-ot[1]/ct,-ot[2]/ct,ot[0]/ct,(ot[2]*ot[5]-ot[4]*ot[3])/ct,(ot[4]*ot[1]-ot[5]*ot[0])/ct]}static singularValueDecompose2dScale(ot){const ct=[ot[0],ot[2],ot[1],ot[3]],It=ot[0]*ct[0]+ot[1]*ct[2],Wt=ot[0]*ct[1]+ot[1]*ct[3],k=ot[2]*ct[0]+ot[3]*ct[2],Z=ot[2]*ct[1]+ot[3]*ct[3],vt=(It+Z)/2,Ct=Math.sqrt((It+Z)**2-4*(It*Z-k*Wt))/2,Rt=vt+Ct||1,Pt=vt-Ct||1;return[Math.sqrt(Rt),Math.sqrt(Pt)]}static normalizeRect(ot){const ct=ot.slice(0);return ot[0]>ot[2]&&(ct[0]=ot[2],ct[2]=ot[0]),ot[1]>ot[3]&&(ct[1]=ot[3],ct[3]=ot[1]),ct}static intersect(ot,ct){const It=Math.max(Math.min(ot[0],ot[2]),Math.min(ct[0],ct[2])),Wt=Math.min(Math.max(ot[0],ot[2]),Math.max(ct[0],ct[2]));if(It>Wt)return null;const k=Math.max(Math.min(ot[1],ot[3]),Math.min(ct[1],ct[3])),Z=Math.min(Math.max(ot[1],ot[3]),Math.max(ct[1],ct[3]));return k>Z?null:[It,k,Wt,Z]}static bezierBoundingBox(ot,ct,It,Wt,k,Z,vt,Ct){const Rt=[],Pt=[[],[]];let O,B,Q,j,pt,yt,St,Dt;for(let Ot=0;Ot<2;++Ot){if(Ot===0?(B=6*ot-12*It+6*k,O=-3*ot+9*It-9*k+3*vt,Q=3*It-3*ot):(B=6*ct-12*Wt+6*Z,O=-3*ct+9*Wt-9*Z+3*Ct,Q=3*Wt-3*ct),Math.abs(O)<1e-12){if(Math.abs(B)<1e-12)continue;j=-Q/B,0<j&&j<1&&Rt.push(j);continue}St=B*B-4*Q*O,Dt=Math.sqrt(St),!(St<0)&&(pt=(-B+Dt)/(2*O),0<pt&&pt<1&&Rt.push(pt),yt=(-B-Dt)/(2*O),0<yt&&yt<1&&Rt.push(yt))}let Ut=Rt.length,Mt;const zt=Ut;for(;Ut--;)j=Rt[Ut],Mt=1-j,Pt[0][Ut]=Mt*Mt*Mt*ot+3*Mt*Mt*j*It+3*Mt*j*j*k+j*j*j*vt,Pt[1][Ut]=Mt*Mt*Mt*ct+3*Mt*Mt*j*Wt+3*Mt*j*j*Z+j*j*j*Ct;return Pt[0][zt]=ot,Pt[1][zt]=ct,Pt[0][zt+1]=vt,Pt[1][zt+1]=Ct,Pt[0].length=Pt[1].length=zt+2,[Math.min(...Pt[0]),Math.min(...Pt[1]),Math.max(...Pt[0]),Math.max(...Pt[1])]}}i.Util=lt;const mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xt(Tt){if(Tt[0]>="ï"){let ct;if(Tt[0]==="þ"&&Tt[1]==="ÿ"?ct="utf-16be":Tt[0]==="ÿ"&&Tt[1]==="þ"?ct="utf-16le":Tt[0]==="ï"&&Tt[1]==="»"&&Tt[2]==="¿"&&(ct="utf-8"),ct)try{const It=new TextDecoder(ct,{fatal:!0}),Wt=gt(Tt);return It.decode(Wt)}catch(It){it(`stringToPDFString: "${It}".`)}}const ot=[];for(let ct=0,It=Tt.length;ct<It;ct++){const Wt=mt[Tt.charCodeAt(ct)];ot.push(Wt?String.fromCharCode(Wt):Tt.charAt(ct))}return ot.join("")}function Et(Tt){return decodeURIComponent(escape(Tt))}function at(Tt){return unescape(encodeURIComponent(Tt))}function kt(Tt){return typeof Tt=="object"&&(Tt==null?void 0:Tt.byteLength)!==void 0}function wt(Tt,ot){if(Tt.length!==ot.length)return!1;for(let ct=0,It=Tt.length;ct<It;ct++)if(Tt[ct]!==ot[ct])return!1;return!0}function $t(){let Tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[Tt.getUTCFullYear().toString(),(Tt.getUTCMonth()+1).toString().padStart(2,"0"),Tt.getUTCDate().toString().padStart(2,"0"),Tt.getUTCHours().toString().padStart(2,"0"),Tt.getUTCMinutes().toString().padStart(2,"0"),Tt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Lt{constructor(){ht(this,Yt,!1);this.promise=new Promise((ot,ct)=>{this.resolve=It=>{ut(this,Yt,!0),ot(It)},this.reject=It=>{ut(this,Yt,!0),ct(It)}})}get settled(){return r(this,Yt)}}Yt=new WeakMap,i.PromiseCapability=Lt;let Xt=null,Ft=null;function Bt(Tt){return Xt||(Xt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ft=new Map([["ﬅ","ſt"]])),Tt.replaceAll(Xt,(ot,ct,It)=>ct?ct.normalize("NFKC"):Ft.get(It))}function Gt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Tt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Tt);else for(let ot=0;ot<32;ot++)Tt[ot]=Math.floor(Math.random()*255);return dt(Tt)}const Kt="pdfjs_internal_id_";i.AnnotationPrefix=Kt},(C,i,t)=>{var e=t(3),n=t(4),o=t(69),m=t(70),w="WebAssembly",T=n[w],y=Error("e",{cause:7}).cause!==7,f=function(E,A){var a={};a[E]=m(E,A,y),e({global:!0,constructor:!0,arity:1,forced:y},a)},R=function(E,A){if(T&&T[E]){var a={};a[E]=m(w+"."+E,A,y),e({target:w,stat:!0,constructor:!0,arity:1,forced:y},a)}};f("Error",function(E){return function(a){return o(E,this,arguments)}}),f("EvalError",function(E){return function(a){return o(E,this,arguments)}}),f("RangeError",function(E){return function(a){return o(E,this,arguments)}}),f("ReferenceError",function(E){return function(a){return o(E,this,arguments)}}),f("SyntaxError",function(E){return function(a){return o(E,this,arguments)}}),f("TypeError",function(E){return function(a){return o(E,this,arguments)}}),f("URIError",function(E){return function(a){return o(E,this,arguments)}}),R("CompileError",function(E){return function(a){return o(E,this,arguments)}}),R("LinkError",function(E){return function(a){return o(E,this,arguments)}}),R("RuntimeError",function(E){return function(a){return o(E,this,arguments)}})},(C,i,t)=>{var e=t(4),n=t(5).f,o=t(44),m=t(48),w=t(38),T=t(56),y=t(68);C.exports=function(f,R){var E=f.target,A=f.global,a=f.stat,c,l,s,v,D,P;if(A?l=e:a?l=e[E]||w(E,{}):l=(e[E]||{}).prototype,l)for(s in R){if(D=R[s],f.dontCallGetSet?(P=n(l,s),v=P&&P.value):v=l[s],c=y(A?s:E+(a?".":"#")+s,f.forced),!c&&v!==void 0){if(typeof D==typeof v)continue;T(D,v)}(f.sham||v&&v.sham)&&o(D,"sham",!0),m(l,s,D,f)}}},function(C){var i=function(t){return t&&t.Math===Math&&t};C.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||this||Function("return this")()},(C,i,t)=>{var e=t(6),n=t(8),o=t(10),m=t(11),w=t(12),T=t(18),y=t(39),f=t(42),R=Object.getOwnPropertyDescriptor;i.f=e?R:function(A,a){if(A=w(A),a=T(a),f)try{return R(A,a)}catch{}if(y(A,a))return m(!n(o.f,A,a),A[a])}},(C,i,t)=>{var e=t(7);C.exports=!e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})},C=>{C.exports=function(i){try{return!!i()}catch{return!0}}},(C,i,t)=>{var e=t(9),n=Function.prototype.call;C.exports=e?n.bind(n):function(){return n.apply(n,arguments)}},(C,i,t)=>{var e=t(7);C.exports=!e(function(){var n=(function(){}).bind();return typeof n!="function"||n.hasOwnProperty("prototype")})},(C,i)=>{var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,n=e&&!t.call({1:2},1);i.f=n?function(m){var w=e(this,m);return!!w&&w.enumerable}:t},C=>{C.exports=function(i,t){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:t}}},(C,i,t)=>{var e=t(13),n=t(16);C.exports=function(o){return e(n(o))}},(C,i,t)=>{var e=t(14),n=t(7),o=t(15),m=Object,w=e("".split);C.exports=n(function(){return!m("z").propertyIsEnumerable(0)})?function(T){return o(T)==="String"?w(T,""):m(T)}:m},(C,i,t)=>{var e=t(9),n=Function.prototype,o=n.call,m=e&&n.bind.bind(o,o);C.exports=e?m:function(w){return function(){return o.apply(w,arguments)}}},(C,i,t)=>{var e=t(14),n=e({}.toString),o=e("".slice);C.exports=function(m){return o(n(m),8,-1)}},(C,i,t)=>{var e=t(17),n=TypeError;C.exports=function(o){if(e(o))throw n("Can't call method on "+o);return o}},C=>{C.exports=function(i){return i==null}},(C,i,t)=>{var e=t(19),n=t(23);C.exports=function(o){var m=e(o,"string");return n(m)?m:m+""}},(C,i,t)=>{var e=t(8),n=t(20),o=t(23),m=t(30),w=t(33),T=t(34),y=TypeError,f=T("toPrimitive");C.exports=function(R,E){if(!n(R)||o(R))return R;var A=m(R,f),a;if(A){if(E===void 0&&(E="default"),a=e(A,R,E),!n(a)||o(a))return a;throw y("Can't convert object to primitive value")}return E===void 0&&(E="number"),w(R,E)}},(C,i,t)=>{var e=t(21),n=t(22),o=n.all;C.exports=n.IS_HTMLDDA?function(m){return typeof m=="object"?m!==null:e(m)||m===o}:function(m){return typeof m=="object"?m!==null:e(m)}},(C,i,t)=>{var e=t(22),n=e.all;C.exports=e.IS_HTMLDDA?function(o){return typeof o=="function"||o===n}:function(o){return typeof o=="function"}},C=>{var i=typeof document=="object"&&document.all,t=typeof i>"u"&&i!==void 0;C.exports={all:i,IS_HTMLDDA:t}},(C,i,t)=>{var e=t(24),n=t(21),o=t(25),m=t(26),w=Object;C.exports=m?function(T){return typeof T=="symbol"}:function(T){var y=e("Symbol");return n(y)&&o(y.prototype,w(T))}},(C,i,t)=>{var e=t(4),n=t(21),o=function(m){return n(m)?m:void 0};C.exports=function(m,w){return arguments.length<2?o(e[m]):e[m]&&e[m][w]}},(C,i,t)=>{var e=t(14);C.exports=e({}.isPrototypeOf)},(C,i,t)=>{var e=t(27);C.exports=e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(C,i,t)=>{var e=t(28),n=t(7),o=t(4),m=o.String;C.exports=!!Object.getOwnPropertySymbols&&!n(function(){var w=Symbol("symbol detection");return!m(w)||!(Object(w)instanceof Symbol)||!Symbol.sham&&e&&e<41})},(C,i,t)=>{var e=t(4),n=t(29),o=e.process,m=e.Deno,w=o&&o.versions||m&&m.version,T=w&&w.v8,y,f;T&&(y=T.split("."),f=y[0]>0&&y[0]<4?1:+(y[0]+y[1])),!f&&n&&(y=n.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=n.match(/Chrome\/(\d+)/),y&&(f=+y[1]))),C.exports=f},C=>{C.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},(C,i,t)=>{var e=t(31),n=t(17);C.exports=function(o,m){var w=o[m];return n(w)?void 0:e(w)}},(C,i,t)=>{var e=t(21),n=t(32),o=TypeError;C.exports=function(m){if(e(m))return m;throw o(n(m)+" is not a function")}},C=>{var i=String;C.exports=function(t){try{return i(t)}catch{return"Object"}}},(C,i,t)=>{var e=t(8),n=t(21),o=t(20),m=TypeError;C.exports=function(w,T){var y,f;if(T==="string"&&n(y=w.toString)&&!o(f=e(y,w))||n(y=w.valueOf)&&!o(f=e(y,w))||T!=="string"&&n(y=w.toString)&&!o(f=e(y,w)))return f;throw m("Can't convert object to primitive value")}},(C,i,t)=>{var e=t(4),n=t(35),o=t(39),m=t(41),w=t(27),T=t(26),y=e.Symbol,f=n("wks"),R=T?y.for||y:y&&y.withoutSetter||m;C.exports=function(E){return o(f,E)||(f[E]=w&&o(y,E)?y[E]:R("Symbol."+E)),f[E]}},(C,i,t)=>{var e=t(36),n=t(37);(C.exports=function(o,m){return n[o]||(n[o]=m!==void 0?m:{})})("versions",[]).push({version:"3.32.2",mode:e?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},C=>{C.exports=!1},(C,i,t)=>{var e=t(4),n=t(38),o="__core-js_shared__",m=e[o]||n(o,{});C.exports=m},(C,i,t)=>{var e=t(4),n=Object.defineProperty;C.exports=function(o,m){try{n(e,o,{value:m,configurable:!0,writable:!0})}catch{e[o]=m}return m}},(C,i,t)=>{var e=t(14),n=t(40),o=e({}.hasOwnProperty);C.exports=Object.hasOwn||function(w,T){return o(n(w),T)}},(C,i,t)=>{var e=t(16),n=Object;C.exports=function(o){return n(e(o))}},(C,i,t)=>{var e=t(14),n=0,o=Math.random(),m=e(1 .toString);C.exports=function(w){return"Symbol("+(w===void 0?"":w)+")_"+m(++n+o,36)}},(C,i,t)=>{var e=t(6),n=t(7),o=t(43);C.exports=!e&&!n(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!==7})},(C,i,t)=>{var e=t(4),n=t(20),o=e.document,m=n(o)&&n(o.createElement);C.exports=function(w){return m?o.createElement(w):{}}},(C,i,t)=>{var e=t(6),n=t(45),o=t(11);C.exports=e?function(m,w,T){return n.f(m,w,o(1,T))}:function(m,w,T){return m[w]=T,m}},(C,i,t)=>{var e=t(6),n=t(42),o=t(46),m=t(47),w=t(18),T=TypeError,y=Object.defineProperty,f=Object.getOwnPropertyDescriptor,R="enumerable",E="configurable",A="writable";i.f=e?o?function(c,l,s){if(m(c),l=w(l),m(s),typeof c=="function"&&l==="prototype"&&"value"in s&&A in s&&!s[A]){var v=f(c,l);v&&v[A]&&(c[l]=s.value,s={configurable:E in s?s[E]:v[E],enumerable:R in s?s[R]:v[R],writable:!1})}return y(c,l,s)}:y:function(c,l,s){if(m(c),l=w(l),m(s),n)try{return y(c,l,s)}catch{}if("get"in s||"set"in s)throw T("Accessors not supported");return"value"in s&&(c[l]=s.value),c}},(C,i,t)=>{var e=t(6),n=t(7);C.exports=e&&n(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})},(C,i,t)=>{var e=t(20),n=String,o=TypeError;C.exports=function(m){if(e(m))return m;throw o(n(m)+" is not an object")}},(C,i,t)=>{var e=t(21),n=t(45),o=t(49),m=t(38);C.exports=function(w,T,y,f){f||(f={});var R=f.enumerable,E=f.name!==void 0?f.name:T;if(e(y)&&o(y,E,f),f.global)R?w[T]=y:m(T,y);else{try{f.unsafe?w[T]&&(R=!0):delete w[T]}catch{}R?w[T]=y:n.f(w,T,{value:y,enumerable:!1,configurable:!f.nonConfigurable,writable:!f.nonWritable})}return w}},(C,i,t)=>{var e=t(14),n=t(7),o=t(21),m=t(39),w=t(6),T=t(50).CONFIGURABLE,y=t(51),f=t(52),R=f.enforce,E=f.get,A=String,a=Object.defineProperty,c=e("".slice),l=e("".replace),s=e([].join),v=w&&!n(function(){return a(function(){},"length",{value:8}).length!==8}),D=String(String).split("String"),P=C.exports=function(h,g,u){c(A(g),0,7)==="Symbol("&&(g="["+l(A(g),/^Symbol\(([^)]*)\)/,"$1")+"]"),u&&u.getter&&(g="get "+g),u&&u.setter&&(g="set "+g),(!m(h,"name")||T&&h.name!==g)&&(w?a(h,"name",{value:g,configurable:!0}):h.name=g),v&&u&&m(u,"arity")&&h.length!==u.arity&&a(h,"length",{value:u.arity});try{u&&m(u,"constructor")&&u.constructor?w&&a(h,"prototype",{writable:!1}):h.prototype&&(h.prototype=void 0)}catch{}var S=R(h);return m(S,"source")||(S.source=s(D,typeof g=="string"?g:"")),h};Function.prototype.toString=P(function(){return o(this)&&E(this).source||y(this)},"toString")},(C,i,t)=>{var e=t(6),n=t(39),o=Function.prototype,m=e&&Object.getOwnPropertyDescriptor,w=n(o,"name"),T=w&&(function(){}).name==="something",y=w&&(!e||e&&m(o,"name").configurable);C.exports={EXISTS:w,PROPER:T,CONFIGURABLE:y}},(C,i,t)=>{var e=t(14),n=t(21),o=t(37),m=e(Function.toString);n(o.inspectSource)||(o.inspectSource=function(w){return m(w)}),C.exports=o.inspectSource},(C,i,t)=>{var e=t(53),n=t(4),o=t(20),m=t(44),w=t(39),T=t(37),y=t(54),f=t(55),R="Object already initialized",E=n.TypeError,A=n.WeakMap,a,c,l,s=function(h){return l(h)?c(h):a(h,{})},v=function(h){return function(g){var u;if(!o(g)||(u=c(g)).type!==h)throw E("Incompatible receiver, "+h+" required");return u}};if(e||T.state){var D=T.state||(T.state=new A);D.get=D.get,D.has=D.has,D.set=D.set,a=function(h,g){if(D.has(h))throw E(R);return g.facade=h,D.set(h,g),g},c=function(h){return D.get(h)||{}},l=function(h){return D.has(h)}}else{var P=y("state");f[P]=!0,a=function(h,g){if(w(h,P))throw E(R);return g.facade=h,m(h,P,g),g},c=function(h){return w(h,P)?h[P]:{}},l=function(h){return w(h,P)}}C.exports={set:a,get:c,has:l,enforce:s,getterFor:v}},(C,i,t)=>{var e=t(4),n=t(21),o=e.WeakMap;C.exports=n(o)&&/native code/.test(String(o))},(C,i,t)=>{var e=t(35),n=t(41),o=e("keys");C.exports=function(m){return o[m]||(o[m]=n(m))}},C=>{C.exports={}},(C,i,t)=>{var e=t(39),n=t(57),o=t(5),m=t(45);C.exports=function(w,T,y){for(var f=n(T),R=m.f,E=o.f,A=0;A<f.length;A++){var a=f[A];!e(w,a)&&!(y&&e(y,a))&&R(w,a,E(T,a))}}},(C,i,t)=>{var e=t(24),n=t(14),o=t(58),m=t(67),w=t(47),T=n([].concat);C.exports=e("Reflect","ownKeys")||function(f){var R=o.f(w(f)),E=m.f;return E?T(R,E(f)):R}},(C,i,t)=>{var e=t(59),n=t(66),o=n.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(w){return e(w,o)}},(C,i,t)=>{var e=t(14),n=t(39),o=t(12),m=t(60).indexOf,w=t(55),T=e([].push);C.exports=function(y,f){var R=o(y),E=0,A=[],a;for(a in R)!n(w,a)&&n(R,a)&&T(A,a);for(;f.length>E;)n(R,a=f[E++])&&(~m(A,a)||T(A,a));return A}},(C,i,t)=>{var e=t(12),n=t(61),o=t(64),m=function(w){return function(T,y,f){var R=e(T),E=o(R),A=n(f,E),a;if(w&&y!==y){for(;E>A;)if(a=R[A++],a!==a)return!0}else for(;E>A;A++)if((w||A in R)&&R[A]===y)return w||A||0;return!w&&-1}};C.exports={includes:m(!0),indexOf:m(!1)}},(C,i,t)=>{var e=t(62),n=Math.max,o=Math.min;C.exports=function(m,w){var T=e(m);return T<0?n(T+w,0):o(T,w)}},(C,i,t)=>{var e=t(63);C.exports=function(n){var o=+n;return o!==o||o===0?0:e(o)}},C=>{var i=Math.ceil,t=Math.floor;C.exports=Math.trunc||function(n){var o=+n;return(o>0?t:i)(o)}},(C,i,t)=>{var e=t(65);C.exports=function(n){return e(n.length)}},(C,i,t)=>{var e=t(62),n=Math.min;C.exports=function(o){return o>0?n(e(o),9007199254740991):0}},C=>{C.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(C,i)=>{i.f=Object.getOwnPropertySymbols},(C,i,t)=>{var e=t(7),n=t(21),o=/#|\.prototype\./,m=function(R,E){var A=T[w(R)];return A===f?!0:A===y?!1:n(E)?e(E):!!E},w=m.normalize=function(R){return String(R).replace(o,".").toLowerCase()},T=m.data={},y=m.NATIVE="N",f=m.POLYFILL="P";C.exports=m},(C,i,t)=>{var e=t(9),n=Function.prototype,o=n.apply,m=n.call;C.exports=typeof Reflect=="object"&&Reflect.apply||(e?m.bind(o):function(){return m.apply(o,arguments)})},(C,i,t)=>{var e=t(24),n=t(39),o=t(44),m=t(25),w=t(71),T=t(56),y=t(74),f=t(75),R=t(76),E=t(80),A=t(81),a=t(6),c=t(36);C.exports=function(l,s,v,D){var P="stackTraceLimit",h=D?2:1,g=l.split("."),u=g[g.length-1],S=e.apply(null,g);if(S){var x=S.prototype;if(!c&&n(x,"cause")&&delete x.cause,!v)return S;var z=e("Error"),b=s(function(L,G){var st=R(D?G:L,void 0),_=D?new S(L):new S;return st!==void 0&&o(_,"message",st),A(_,b,_.stack,2),this&&m(x,this)&&f(_,this,b),arguments.length>h&&E(_,arguments[h]),_});if(b.prototype=x,u!=="Error"?w?w(b,z):T(b,z,{name:!0}):a&&P in S&&(y(b,S,P),y(b,S,"prepareStackTrace")),T(b,S),!c)try{x.name!==u&&o(x,"name",u),x.constructor=b}catch{}return b}}},(C,i,t)=>{var e=t(72),n=t(47),o=t(73);C.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var m=!1,w={},T;try{T=e(Object.prototype,"__proto__","set"),T(w,[]),m=w instanceof Array}catch{}return function(f,R){return n(f),o(R),m?T(f,R):f.__proto__=R,f}}():void 0)},(C,i,t)=>{var e=t(14),n=t(31);C.exports=function(o,m,w){try{return e(n(Object.getOwnPropertyDescriptor(o,m)[w]))}catch{}}},(C,i,t)=>{var e=t(21),n=String,o=TypeError;C.exports=function(m){if(typeof m=="object"||e(m))return m;throw o("Can't set "+n(m)+" as a prototype")}},(C,i,t)=>{var e=t(45).f;C.exports=function(n,o,m){m in n||e(n,m,{configurable:!0,get:function(){return o[m]},set:function(w){o[m]=w}})}},(C,i,t)=>{var e=t(21),n=t(20),o=t(71);C.exports=function(m,w,T){var y,f;return o&&e(y=w.constructor)&&y!==T&&n(f=y.prototype)&&f!==T.prototype&&o(m,f),m}},(C,i,t)=>{var e=t(77);C.exports=function(n,o){return n===void 0?arguments.length<2?"":o:e(n)}},(C,i,t)=>{var e=t(78),n=String;C.exports=function(o){if(e(o)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return n(o)}},(C,i,t)=>{var e=t(79),n=t(21),o=t(15),m=t(34),w=m("toStringTag"),T=Object,y=o(function(){return arguments}())==="Arguments",f=function(R,E){try{return R[E]}catch{}};C.exports=e?o:function(R){var E,A,a;return R===void 0?"Undefined":R===null?"Null":typeof(A=f(E=T(R),w))=="string"?A:y?o(E):(a=o(E))==="Object"&&n(E.callee)?"Arguments":a}},(C,i,t)=>{var e=t(34),n=e("toStringTag"),o={};o[n]="z",C.exports=String(o)==="[object z]"},(C,i,t)=>{var e=t(20),n=t(44);C.exports=function(o,m){e(m)&&"cause"in m&&n(o,"cause",m.cause)}},(C,i,t)=>{var e=t(44),n=t(82),o=t(83),m=Error.captureStackTrace;C.exports=function(w,T,y,f){o&&(m?m(w,T):e(w,"stack",n(y,f)))}},(C,i,t)=>{var e=t(14),n=Error,o=e("".replace),m=function(y){return String(n(y).stack)}("zxcasd"),w=/\n\s*at [^:]*:[^\n]*/,T=w.test(m);C.exports=function(y,f){if(T&&typeof y=="string"&&!n.prepareStackTrace)for(;f--;)y=o(y,w,"");return y}},(C,i,t)=>{var e=t(7),n=t(11);C.exports=!e(function(){var o=Error("a");return"stack"in o?(Object.defineProperty(o,"stack",n(1,7)),o.stack!==7):!0})},(C,i,t)=>{var e=t(48),n=t(14),o=t(77),m=t(85),w=URLSearchParams,T=w.prototype,y=n(T.append),f=n(T.delete),R=n(T.forEach),E=n([].push),A=new w("a=1&a=2&b=3");A.delete("a",1),A.delete("b",void 0),A+""!="a=2"&&e(T,"delete",function(a){var c=arguments.length,l=c<2?void 0:arguments[1];if(c&&l===void 0)return f(this,a);var s=[];R(this,function(x,z){E(s,{key:z,value:x})}),m(c,1);for(var v=o(a),D=o(l),P=0,h=0,g=!1,u=s.length,S;P<u;)S=s[P++],g||S.key===v?(g=!0,f(this,S.key)):h++;for(;h<u;)S=s[h++],S.key===v&&S.value===D||y(this,S.key,S.value)},{enumerable:!0,unsafe:!0})},C=>{var i=TypeError;C.exports=function(t,e){if(t<e)throw i("Not enough arguments");return t}},(C,i,t)=>{var e=t(48),n=t(14),o=t(77),m=t(85),w=URLSearchParams,T=w.prototype,y=n(T.getAll),f=n(T.has),R=new w("a=1");(R.has("a",2)||!R.has("a",void 0))&&e(T,"has",function(A){var a=arguments.length,c=a<2?void 0:arguments[1];if(a&&c===void 0)return f(this,A);var l=y(this,A);m(a,1);for(var s=o(c),v=0;v<l.length;)if(l[v++]===s)return!0;return!1},{enumerable:!0,unsafe:!0})},(C,i,t)=>{var e=t(6),n=t(14),o=t(88),m=URLSearchParams.prototype,w=n(m.forEach);e&&!("size"in m)&&o(m,"size",{get:function(){var y=0;return w(this,function(){y++}),y},configurable:!0,enumerable:!0})},(C,i,t)=>{var e=t(49),n=t(45);C.exports=function(o,m,w){return w.get&&e(w.get,m,{getter:!0}),w.set&&e(w.set,m,{setter:!0}),n.f(o,m,w)}},(C,i,t)=>{var e=t(3),n=t(40),o=t(64),m=t(90),w=t(92),T=t(7),y=T(function(){return[].push.call({length:4294967296},1)!==4294967297}),f=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(E){return E instanceof TypeError}},R=y||!f();e({target:"Array",proto:!0,arity:1,forced:R},{push:function(A){var a=n(this),c=o(a),l=arguments.length;w(c+l);for(var s=0;s<l;s++)a[c]=arguments[s],c++;return m(a,c),c}})},(C,i,t)=>{var e=t(6),n=t(91),o=TypeError,m=Object.getOwnPropertyDescriptor,w=e&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(T){return T instanceof TypeError}}();C.exports=w?function(T,y){if(n(T)&&!m(T,"length").writable)throw o("Cannot set read only .length");return T.length=y}:function(T,y){return T.length=y}},(C,i,t)=>{var e=t(15);C.exports=Array.isArray||function(o){return e(o)==="Array"}},C=>{var i=TypeError,t=9007199254740991;C.exports=function(e){if(e>t)throw i("Maximum allowed index exceeded");return e}},(C,i,t)=>{var e=t(94),n=t(98).findLast,o=e.aTypedArray,m=e.exportTypedArrayMethod;m("findLast",function(T){return n(o(this),T,arguments.length>1?arguments[1]:void 0)})},(C,i,t)=>{var e=t(95),n=t(6),o=t(4),m=t(21),w=t(20),T=t(39),y=t(78),f=t(32),R=t(44),E=t(48),A=t(88),a=t(25),c=t(96),l=t(71),s=t(34),v=t(41),D=t(52),P=D.enforce,h=D.get,g=o.Int8Array,u=g&&g.prototype,S=o.Uint8ClampedArray,x=S&&S.prototype,z=g&&c(g),b=u&&c(u),L=Object.prototype,G=o.TypeError,st=s("toStringTag"),_=v("TYPED_ARRAY_TAG"),J="TypedArrayConstructor",K=e&&!!l&&y(o.opera)!=="Opera",it=!1,W,Y,rt,$={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},d={BigInt64Array:8,BigUint64Array:8},p=function(dt){if(!w(dt))return!1;var gt=y(dt);return gt==="DataView"||T($,gt)||T(d,gt)},M=function(et){var dt=c(et);if(w(dt)){var gt=h(dt);return gt&&T(gt,J)?gt[J]:M(dt)}},N=function(et){if(!w(et))return!1;var dt=y(et);return T($,dt)||T(d,dt)},F=function(et){if(N(et))return et;throw G("Target is not a typed array")},I=function(et){if(m(et)&&(!l||a(z,et)))return et;throw G(f(et)+" is not a typed array constructor")},X=function(et,dt,gt,At){if(n){if(gt)for(var bt in $){var nt=o[bt];if(nt&&T(nt.prototype,et))try{delete nt.prototype[et]}catch{try{nt.prototype[et]=dt}catch{}}}(!b[et]||gt)&&E(b,et,gt?dt:K&&u[et]||dt,At)}},H=function(et,dt,gt){var At,bt;if(n){if(l){if(gt){for(At in $)if(bt=o[At],bt&&T(bt,et))try{delete bt[et]}catch{}}if(!z[et]||gt)try{return E(z,et,gt?dt:K&&z[et]||dt)}catch{}else return}for(At in $)bt=o[At],bt&&(!bt[et]||gt)&&E(bt,et,dt)}};for(W in $)Y=o[W],rt=Y&&Y.prototype,rt?P(rt)[J]=Y:K=!1;for(W in d)Y=o[W],rt=Y&&Y.prototype,rt&&(P(rt)[J]=Y);if((!K||!m(z)||z===Function.prototype)&&(z=function(){throw G("Incorrect invocation")},K))for(W in $)o[W]&&l(o[W],z);if((!K||!b||b===L)&&(b=z.prototype,K))for(W in $)o[W]&&l(o[W].prototype,b);if(K&&c(x)!==b&&l(x,b),n&&!T(b,st)){it=!0,A(b,st,{configurable:!0,get:function(){return w(this)?this[_]:void 0}});for(W in $)o[W]&&R(o[W],_,W)}C.exports={NATIVE_ARRAY_BUFFER_VIEWS:K,TYPED_ARRAY_TAG:it&&_,aTypedArray:F,aTypedArrayConstructor:I,exportTypedArrayMethod:X,exportTypedArrayStaticMethod:H,getTypedArrayConstructor:M,isView:p,isTypedArray:N,TypedArray:z,TypedArrayPrototype:b}},C=>{C.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(C,i,t)=>{var e=t(39),n=t(21),o=t(40),m=t(54),w=t(97),T=m("IE_PROTO"),y=Object,f=y.prototype;C.exports=w?y.getPrototypeOf:function(R){var E=o(R);if(e(E,T))return E[T];var A=E.constructor;return n(A)&&E instanceof A?A.prototype:E instanceof y?f:null}},(C,i,t)=>{var e=t(7);C.exports=!e(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})},(C,i,t)=>{var e=t(99),n=t(13),o=t(40),m=t(64),w=function(T){var y=T===1;return function(f,R,E){for(var A=o(f),a=n(A),c=e(R,E),l=m(a),s,v;l-- >0;)if(s=a[l],v=c(s,l,A),v)switch(T){case 0:return s;case 1:return l}return y?-1:void 0}};C.exports={findLast:w(0),findLastIndex:w(1)}},(C,i,t)=>{var e=t(100),n=t(31),o=t(9),m=e(e.bind);C.exports=function(w,T){return n(w),T===void 0?w:o?m(w,T):function(){return w.apply(T,arguments)}}},(C,i,t)=>{var e=t(15),n=t(14);C.exports=function(o){if(e(o)==="Function")return n(o)}},(C,i,t)=>{var e=t(94),n=t(98).findLastIndex,o=e.aTypedArray,m=e.exportTypedArrayMethod;m("findLastIndex",function(T){return n(o(this),T,arguments.length>1?arguments[1]:void 0)})},(C,i,t)=>{var e=t(4),n=t(8),o=t(94),m=t(64),w=t(103),T=t(40),y=t(7),f=e.RangeError,R=e.Int8Array,E=R&&R.prototype,A=E&&E.set,a=o.aTypedArray,c=o.exportTypedArrayMethod,l=!y(function(){var v=new Uint8ClampedArray(2);return n(A,v,{length:1,0:3},1),v[1]!==3}),s=l&&o.NATIVE_ARRAY_BUFFER_VIEWS&&y(function(){var v=new R(2);return v.set(1),v.set("2",1),v[0]!==0||v[1]!==2});c("set",function(D){a(this);var P=w(arguments.length>1?arguments[1]:void 0,1),h=T(D);if(l)return n(A,this,h,P);var g=this.length,u=m(h),S=0;if(u+P>g)throw f("Wrong length");for(;S<u;)this[P+S]=h[S++]},!l||s)},(C,i,t)=>{var e=t(104),n=RangeError;C.exports=function(o,m){var w=e(o);if(w%m)throw n("Wrong offset");return w}},(C,i,t)=>{var e=t(62),n=RangeError;C.exports=function(o){var m=e(o);if(m<0)throw n("The argument can't be less than 0");return m}},(C,i,t)=>{var e=t(106),n=t(94),o=n.aTypedArray,m=n.exportTypedArrayMethod,w=n.getTypedArrayConstructor;m("toReversed",function(){return e(o(this),w(this))})},(C,i,t)=>{var e=t(64);C.exports=function(n,o){for(var m=e(n),w=new o(m),T=0;T<m;T++)w[T]=n[m-T-1];return w}},(C,i,t)=>{var e=t(94),n=t(14),o=t(31),m=t(108),w=e.aTypedArray,T=e.getTypedArrayConstructor,y=e.exportTypedArrayMethod,f=n(e.TypedArrayPrototype.sort);y("toSorted",function(E){E!==void 0&&o(E);var A=w(this),a=m(T(A),A);return f(a,E)})},(C,i,t)=>{var e=t(64);C.exports=function(n,o){for(var m=0,w=e(o),T=new n(w);w>m;)T[m]=o[m++];return T}},(C,i,t)=>{var e=t(110),n=t(94),o=t(111),m=t(62),w=t(112),T=n.aTypedArray,y=n.getTypedArrayConstructor,f=n.exportTypedArrayMethod,R=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(E){return E===8}}();f("with",function(E,A){var a=T(this),c=m(E),l=o(a)?w(A):+A;return e(a,y(a),c,l)},!R)},(C,i,t)=>{var e=t(64),n=t(62),o=RangeError;C.exports=function(m,w,T,y){var f=e(m),R=n(T),E=R<0?f+R:R;if(E>=f||E<0)throw o("Incorrect index");for(var A=new w(f),a=0;a<f;a++)A[a]=a===E?y:m[a];return A}},(C,i,t)=>{var e=t(78);C.exports=function(n){var o=e(n);return o==="BigInt64Array"||o==="BigUint64Array"}},(C,i,t)=>{var e=t(19),n=TypeError;C.exports=function(o){var m=e(o,"number");if(typeof m=="number")throw n("Can't convert number to bigint");return BigInt(m)}},(C,i,t)=>{var e=t(6),n=t(88),o=t(114),m=ArrayBuffer.prototype;e&&!("detached"in m)&&n(m,"detached",{configurable:!0,get:function(){return o(this)}})},(C,i,t)=>{var e=t(14),n=t(115),o=e(ArrayBuffer.prototype.slice);C.exports=function(m){if(n(m)!==0)return!1;try{return o(m,0,0),!1}catch{return!0}}},(C,i,t)=>{var e=t(72),n=t(15),o=TypeError;C.exports=e(ArrayBuffer.prototype,"byteLength","get")||function(m){if(n(m)!=="ArrayBuffer")throw o("ArrayBuffer expected");return m.byteLength}},(C,i,t)=>{var e=t(3),n=t(117);n&&e({target:"ArrayBuffer",proto:!0},{transfer:function(){return n(this,arguments.length?arguments[0]:void 0,!0)}})},(C,i,t)=>{var e=t(4),n=t(14),o=t(72),m=t(118),w=t(114),T=t(115),y=t(119),f=e.TypeError,R=e.structuredClone,E=e.ArrayBuffer,A=e.DataView,a=Math.min,c=E.prototype,l=A.prototype,s=n(c.slice),v=o(c,"resizable","get"),D=o(c,"maxByteLength","get"),P=n(l.getInt8),h=n(l.setInt8);C.exports=y&&function(g,u,S){var x=T(g),z=u===void 0?x:m(u),b=!v||!v(g);if(w(g))throw f("ArrayBuffer is detached");var L=R(g,{transfer:[g]});if(x===z&&(S||b))return L;if(x>=z&&(!S||b))return s(L,0,z);for(var G=S&&!b&&D?{maxByteLength:D(L)}:void 0,st=new E(z,G),_=new A(L),J=new A(st),K=a(z,x),it=0;it<K;it++)h(J,it,P(_,it));return st}},(C,i,t)=>{var e=t(62),n=t(65),o=RangeError;C.exports=function(m){if(m===void 0)return 0;var w=e(m),T=n(w);if(w!==T)throw o("Wrong length or index");return T}},(C,i,t)=>{var e=t(4),n=t(7),o=t(28),m=t(120),w=t(121),T=t(122),y=e.structuredClone;C.exports=!!y&&!n(function(){if(w&&o>92||T&&o>94||m&&o>97)return!1;var f=new ArrayBuffer(8),R=y(f,{transfer:[f]});return f.byteLength!==0||R.byteLength!==8})},(C,i,t)=>{var e=t(121),n=t(122);C.exports=!e&&!n&&typeof window=="object"&&typeof document=="object"},C=>{C.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(C,i,t)=>{var e=t(4),n=t(15);C.exports=n(e.process)==="process"},(C,i,t)=>{var e=t(3),n=t(117);n&&e({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return n(this,arguments.length?arguments[0]:void 0,!1)}})},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var C,t,e,n,ie,be,w,T,y,f,R,E,A,a,c,ye,s,v,Oe,P,h;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0,__w_pdfjs_require__(84),__w_pdfjs_require__(86),__w_pdfjs_require__(87),__w_pdfjs_require__(2),__w_pdfjs_require__(93),__w_pdfjs_require__(101),__w_pdfjs_require__(102),__w_pdfjs_require__(105),__w_pdfjs_require__(107),__w_pdfjs_require__(109),__w_pdfjs_require__(113),__w_pdfjs_require__(116),__w_pdfjs_require__(123),__w_pdfjs_require__(89),__w_pdfjs_require__(125),__w_pdfjs_require__(136),__w_pdfjs_require__(138),__w_pdfjs_require__(141),__w_pdfjs_require__(143),__w_pdfjs_require__(145),__w_pdfjs_require__(147),__w_pdfjs_require__(149),__w_pdfjs_require__(152);var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(163),_display_utils=__w_pdfjs_require__(168),_font_loader=__w_pdfjs_require__(171),_displayNode_utils=__w_pdfjs_require__(172),_canvas=__w_pdfjs_require__(173),_worker_options=__w_pdfjs_require__(176),_message_handler=__w_pdfjs_require__(177),_metadata=__w_pdfjs_require__(178),_optional_content_config=__w_pdfjs_require__(179),_transport_stream=__w_pdfjs_require__(180),_displayFetch_stream=__w_pdfjs_require__(181),_displayNetwork=__w_pdfjs_require__(184),_displayNode_stream=__w_pdfjs_require__(185),_displaySvg=__w_pdfjs_require__(186),_xfa_text=__w_pdfjs_require__(194);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(u){if(typeof u=="string"||u instanceof URL?u={url:u}:(0,_util.isArrayBuffer)(u)&&(u={data:u}),typeof u!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!u.url&&!u.data&&!u.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const S=new PDFDocumentLoadingTask,{docId:x}=S,z=u.url?getUrlProp(u.url):null,b=u.data?getDataProp(u.data):null,L=u.httpHeaders||null,G=u.withCredentials===!0,st=u.password??null,_=u.range instanceof PDFDataRangeTransport?u.range:null,J=Number.isInteger(u.rangeChunkSize)&&u.rangeChunkSize>0?u.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let K=u.worker instanceof PDFWorker?u.worker:null;const it=u.verbosity,W=typeof u.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(u.docBaseUrl)?u.docBaseUrl:null,Y=typeof u.cMapUrl=="string"?u.cMapUrl:null,rt=u.cMapPacked!==!1,$=u.CMapReaderFactory||DefaultCMapReaderFactory,d=typeof u.standardFontDataUrl=="string"?u.standardFontDataUrl:null,p=u.StandardFontDataFactory||DefaultStandardFontDataFactory,M=u.stopAtErrors!==!0,N=Number.isInteger(u.maxImageSize)&&u.maxImageSize>-1?u.maxImageSize:-1,F=u.isEvalSupported!==!1,I=typeof u.isOffscreenCanvasSupported=="boolean"?u.isOffscreenCanvasSupported:!_util.isNodeJS,X=Number.isInteger(u.canvasMaxAreaInBytes)?u.canvasMaxAreaInBytes:-1,H=typeof u.disableFontFace=="boolean"?u.disableFontFace:_util.isNodeJS,et=u.fontExtraProperties===!0,dt=u.enableXfa===!0,gt=u.ownerDocument||globalThis.document,At=u.disableRange===!0,bt=u.disableStream===!0,nt=u.disableAutoFetch===!0,ft=u.pdfBug===!0,U=_?_.length:u.length??NaN,V=typeof u.useSystemFonts=="boolean"?u.useSystemFonts:!_util.isNodeJS&&!H,tt=typeof u.useWorkerFetch=="boolean"?u.useWorkerFetch:$===_display_utils.DOMCMapReaderFactory&&p===_display_utils.DOMStandardFontDataFactory&&Y&&d&&(0,_display_utils.isValidFetchUrl)(Y,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI),lt=u.canvasFactory||new DefaultCanvasFactory({ownerDocument:gt}),mt=u.filterFactory||new DefaultFilterFactory({docId:x,ownerDocument:gt}),xt=null;(0,_util.setVerbosityLevel)(it);const Et={canvasFactory:lt,filterFactory:mt};if(tt||(Et.cMapReaderFactory=new $({baseUrl:Y,isCompressed:rt}),Et.standardFontDataFactory=new p({baseUrl:d})),!K){const wt={verbosity:it,port:_worker_options.GlobalWorkerOptions.workerPort};K=wt.port?PDFWorker.fromPort(wt):new PDFWorker(wt),S._worker=K}const at={docId:x,apiVersion:"3.11.174",data:b,password:st,disableAutoFetch:nt,rangeChunkSize:J,length:U,docBaseUrl:W,enableXfa:dt,evaluatorOptions:{maxImageSize:N,disableFontFace:H,ignoreErrors:M,isEvalSupported:F,isOffscreenCanvasSupported:I,canvasMaxAreaInBytes:X,fontExtraProperties:et,useSystemFonts:V,cMapUrl:tt?Y:null,standardFontDataUrl:tt?d:null}},kt={ignoreErrors:M,isEvalSupported:F,disableFontFace:H,fontExtraProperties:et,enableXfa:dt,ownerDocument:gt,disableAutoFetch:nt,pdfBug:ft,styleElement:xt};return K.promise.then(function(){if(S.destroyed)throw new Error("Loading aborted");const wt=_fetchDocument(K,at),$t=new Promise(function(Lt){let Xt;_?Xt=new _transport_stream.PDFDataTransportStream({length:U,initialData:_.initialData,progressiveDone:_.progressiveDone,contentDispositionFilename:_.contentDispositionFilename,disableRange:At,disableStream:bt},_):b||(Xt=(Bt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Bt):(0,_display_utils.isValidFetchUrl)(Bt.url)?new _displayFetch_stream.PDFFetchStream(Bt):new _displayNetwork.PDFNetworkStream(Bt))({url:z,length:U,httpHeaders:L,withCredentials:G,rangeChunkSize:J,disableRange:At,disableStream:bt})),Lt(Xt)});return Promise.all([wt,$t]).then(function(Lt){let[Xt,Ft]=Lt;if(S.destroyed)throw new Error("Loading aborted");const Bt=new _message_handler.MessageHandler(x,Xt,K.port),Gt=new WorkerTransport(Bt,S,Ft,kt,Et);S._transport=Gt,Bt.send("Ready",null)})}).catch(S._capability.reject),S}async function _fetchDocument(u,S){if(u.destroyed)throw new Error("Worker was destroyed");const x=await u.messageHandler.sendWithPromise("GetDocRequest",S,S.data?[S.data.buffer]:null);if(u.destroyed)throw new Error("Worker was destroyed");return x}function getUrlProp(u){if(u instanceof URL)return u.href;try{return new URL(u,window.location).href}catch{if(_util.isNodeJS&&typeof u=="string")return u}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(u){if(_util.isNodeJS&&typeof Buffer<"u"&&u instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(u instanceof Uint8Array&&u.byteLength===u.buffer.byteLength)return u;if(typeof u=="string")return(0,_util.stringToBytes)(u);if(typeof u=="object"&&!isNaN(u==null?void 0:u.length)||(0,_util.isArrayBuffer)(u))return new Uint8Array(u);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const i=class i{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${he(i,C)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var S,x,z;this.destroyed=!0;try{(S=this._worker)!=null&&S.port&&(this._worker._pendingDestroy=!0),await((x=this._transport)==null?void 0:x.destroy())}catch(b){throw(z=this._worker)!=null&&z.port&&delete this._worker._pendingDestroy,b}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};C=new WeakMap,ht(i,C,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(S,x){let z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=S,this.initialData=x,this.progressiveDone=z,this.contentDispositionFilename=b,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(S){this._rangeListeners.push(S)}addProgressListener(S){this._progressListeners.push(S)}addProgressiveReadListener(S){this._progressiveReadListeners.push(S)}addProgressiveDoneListener(S){this._progressiveDoneListeners.push(S)}onDataRange(S,x){for(const z of this._rangeListeners)z(S,x)}onDataProgress(S,x){this._readyCapability.promise.then(()=>{for(const z of this._progressListeners)z(S,x)})}onDataProgressiveRead(S){this._readyCapability.promise.then(()=>{for(const x of this._progressiveReadListeners)x(S)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const S of this._progressiveDoneListeners)S()})}transportReady(){this._readyCapability.resolve()}requestDataRange(S,x){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(S,x){this._pdfInfo=S,this._transport=x,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(z=>{if(!z)return z;const b=[];for(const L in z)b.push(...z[L]);return b}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(S){return this._transport.getPage(S)}getPageIndex(S){return this._transport.getPageIndex(S)}getDestinations(){return this._transport.getDestinations()}getDestination(S){return this._transport.getDestination(S)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(S||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(S,x,z){ht(this,n);ht(this,t,null);ht(this,e,!1);let b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;this._pageIndex=S,this._pageInfo=x,this._transport=z,this._stats=b?new _display_utils.StatTimer:null,this._pdfBug=b,this.commonObjs=z.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:S,rotation:x=this.rotate,offsetX:z=0,offsetY:b=0,dontFlip:L=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:S,rotation:x,offsetX:z,offsetY:b,dontFlip:L})}getAnnotations(){let{intent:S="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const x=this._transport.getRenderingIntent(S);return this._transport.getAnnotations(this._pageIndex,x.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var S;return((S=this._transport._htmlForXfa)==null?void 0:S.children[this._pageIndex])||null}render(S){var M,N;let{canvasContext:x,viewport:z,intent:b="display",annotationMode:L=_util.AnnotationMode.ENABLE,transform:G=null,background:st=null,optionalContentConfigPromise:_=null,annotationCanvasMap:J=null,pageColors:K=null,printAnnotationStorage:it=null}=S;(M=this._stats)==null||M.time("Overall");const W=this._transport.getRenderingIntent(b,L,it);ut(this,e,!1),q(this,n,be).call(this),_||(_=this._transport.getOptionalContentConfig());let Y=this._intentStates.get(W.cacheKey);Y||(Y=Object.create(null),this._intentStates.set(W.cacheKey,Y)),Y.streamReaderCancelTimeout&&(clearTimeout(Y.streamReaderCancelTimeout),Y.streamReaderCancelTimeout=null);const rt=!!(W.renderingIntent&_util.RenderingIntentFlag.PRINT);Y.displayReadyCapability||(Y.displayReadyCapability=new _util.PromiseCapability,Y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(N=this._stats)==null||N.time("Page Request"),this._pumpOperatorList(W));const $=F=>{var I,X;Y.renderTasks.delete(d),(this._maybeCleanupAfterRender||rt)&&ut(this,e,!0),q(this,n,ie).call(this,!rt),F?(d.capability.reject(F),this._abortOperatorList({intentState:Y,reason:F instanceof Error?F:new Error(F)})):d.capability.resolve(),(I=this._stats)==null||I.timeEnd("Rendering"),(X=this._stats)==null||X.timeEnd("Overall")},d=new InternalRenderTask({callback:$,params:{canvasContext:x,viewport:z,transform:G,background:st},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:J,operatorList:Y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!rt,pdfBug:this._pdfBug,pageColors:K});(Y.renderTasks||(Y.renderTasks=new Set)).add(d);const p=d.task;return Promise.all([Y.displayReadyCapability.promise,_]).then(F=>{var H;let[I,X]=F;if(this.destroyed){$();return}(H=this._stats)==null||H.time("Rendering"),d.initializeGraphics({transparency:I,optionalContentConfig:X}),d.operatorListChanged()}).catch($),p}getOperatorList(){var _;let{intent:S="display",annotationMode:x=_util.AnnotationMode.ENABLE,printAnnotationStorage:z=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function b(){G.operatorList.lastChunk&&(G.opListReadCapability.resolve(G.operatorList),G.renderTasks.delete(st))}const L=this._transport.getRenderingIntent(S,x,z,!0);let G=this._intentStates.get(L.cacheKey);G||(G=Object.create(null),this._intentStates.set(L.cacheKey,G));let st;return G.opListReadCapability||(st=Object.create(null),st.operatorListChanged=b,G.opListReadCapability=new _util.PromiseCapability,(G.renderTasks||(G.renderTasks=new Set)).add(st),G.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_=this._stats)==null||_.time("Page Request"),this._pumpOperatorList(L)),G.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:S=!1,disableNormalization:x=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:S===!0,disableNormalization:x===!0},{highWaterMark:100,size(b){return b.items.length}})}getTextContent(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(z=>_xfa_text.XfaText.textContent(z));const x=this.streamTextContent(S);return new Promise(function(z,b){function L(){G.read().then(function(_){let{value:J,done:K}=_;if(K){z(st);return}Object.assign(st.styles,J.styles),st.items.push(...J.items),L()},b)}const G=x.getReader(),st={items:[],styles:Object.create(null)};L()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const S=[];for(const x of this._intentStates.values())if(this._abortOperatorList({intentState:x,reason:new Error("Page was destroyed."),force:!0}),!x.opListReadCapability)for(const z of x.renderTasks)S.push(z.completed),z.cancel();return this.objs.clear(),ut(this,e,!1),q(this,n,be).call(this),Promise.all(S)}cleanup(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;ut(this,e,!0);const x=q(this,n,ie).call(this,!1);return S&&x&&this._stats&&(this._stats=new _display_utils.StatTimer),x}_startRenderPage(S,x){var b,L;const z=this._intentStates.get(x);z&&((b=this._stats)==null||b.timeEnd("Page Request"),(L=z.displayReadyCapability)==null||L.resolve(S))}_renderPageChunk(S,x){for(let z=0,b=S.length;z<b;z++)x.operatorList.fnArray.push(S.fnArray[z]),x.operatorList.argsArray.push(S.argsArray[z]);x.operatorList.lastChunk=S.lastChunk,x.operatorList.separateAnnots=S.separateAnnots;for(const z of x.renderTasks)z.operatorListChanged();S.lastChunk&&q(this,n,ie).call(this,!0)}_pumpOperatorList(S){let{renderingIntent:x,cacheKey:z,annotationStorageSerializable:b}=S;const{map:L,transfers:G}=b,_=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:x,cacheKey:z,annotationStorage:L},G).getReader(),J=this._intentStates.get(z);J.streamReader=_;const K=()=>{_.read().then(it=>{let{value:W,done:Y}=it;if(Y){J.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(W,J),K())},it=>{if(J.streamReader=null,!this._transport.destroyed){if(J.operatorList){J.operatorList.lastChunk=!0;for(const W of J.renderTasks)W.operatorListChanged();q(this,n,ie).call(this,!0)}if(J.displayReadyCapability)J.displayReadyCapability.reject(it);else if(J.opListReadCapability)J.opListReadCapability.reject(it);else throw it}})};K()}_abortOperatorList(S){let{intentState:x,reason:z,force:b=!1}=S;if(x.streamReader){if(x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null),!b){if(x.renderTasks.size>0)return;if(z instanceof _display_utils.RenderingCancelledException){let L=RENDERING_CANCELLED_TIMEOUT;z.extraDelay>0&&z.extraDelay<1e3&&(L+=z.extraDelay),x.streamReaderCancelTimeout=setTimeout(()=>{x.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:x,reason:z,force:!0})},L);return}}if(x.streamReader.cancel(new _util.AbortException(z.message)).catch(()=>{}),x.streamReader=null,!this._transport.destroyed){for(const[L,G]of this._intentStates)if(G===x){this._intentStates.delete(L);break}this.cleanup()}}}get stats(){return this._stats}}t=new WeakMap,e=new WeakMap,n=new WeakSet,ie=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(q(this,n,be).call(this),!r(this,e)||this.destroyed)return!1;if(S)return ut(this,t,setTimeout(()=>{ut(this,t,null),q(this,n,ie).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:x,operatorList:z}of this._intentStates.values())if(x.size>0||!z.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ut(this,e,!1),!0},be=function(){r(this,t)&&(clearTimeout(r(this,t)),ut(this,t,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ht(this,w,new Set);ht(this,T,Promise.resolve())}postMessage(S,x){const z={data:structuredClone(S,null)};r(this,T).then(()=>{for(const b of r(this,w))b.call(this,z)})}addEventListener(S,x){r(this,w).add(x)}removeEventListener(S,x){r(this,w).delete(x)}terminate(){r(this,w).clear()}}w=new WeakMap,T=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const u=(y=document==null?void 0:document.currentScript)==null?void 0:y.src;u&&(PDFWorkerUtil.fallbackWorkerSrc=u.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(u,S){let x;try{if(x=new URL(u),!x.origin||x.origin==="null")return!1}catch{return!1}const z=new URL(S,x);return x.origin===z.origin},PDFWorkerUtil.createCDNWrapper=function(u){const S=`importScripts("${u}");`;return URL.createObjectURL(new Blob([S]))}}const _PDFWorker=class _PDFWorker{constructor(){var z;let{name:u=null,port:S=null,verbosity:x=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.name=u,this.destroyed=!1,this.verbosity=x,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,S){if((z=r(_PDFWorker,f))!=null&&z.has(S))throw new Error("Cannot use more than one PDFWorker per port.");(r(_PDFWorker,f)||ut(_PDFWorker,f,new WeakMap)).set(S,this),this._initializeFromPort(S);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(u){this._port=u,this._messageHandler=new _message_handler.MessageHandler("main","worker",u),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:u}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,u)||(u=PDFWorkerUtil.createCDNWrapper(new URL(u,window.location).href));const S=new Worker(u),x=new _message_handler.MessageHandler("main","worker",S),z=()=>{S.removeEventListener("error",b),x.destroy(),S.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},b=()=>{this._webWorker||z()};S.addEventListener("error",b),x.on("test",G=>{if(S.removeEventListener("error",b),this.destroyed){z();return}G?(this._messageHandler=x,this._port=S,this._webWorker=S,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),x.destroy(),S.terminate())}),x.on("ready",G=>{if(S.removeEventListener("error",b),this.destroyed){z();return}try{L()}catch{this._setupFakeWorker()}});const L=()=>{const G=new Uint8Array;x.send("test",G,[G.buffer])};L();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(u=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const S=new LoopbackPort;this._port=S;const x=`fake${PDFWorkerUtil.fakeWorkerId++}`,z=new _message_handler.MessageHandler(x+"_worker",x,S);u.setup(z,S);const b=new _message_handler.MessageHandler(x,x+"_worker",S);this._messageHandler=b,this._readyCapability.resolve(),b.send("configure",{verbosity:this.verbosity})}).catch(u=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${u.message}".`))})}destroy(){var u;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(u=r(_PDFWorker,f))==null||u.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(u){var x;if(!(u!=null&&u.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const S=(x=r(this,f))==null?void 0:x.get(u.port);if(S){if(S._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return S}return new _PDFWorker(u)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var u;try{return((u=globalThis.pdfjsWorker)==null?void 0:u.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};f=new WeakMap,ht(_PDFWorker,f);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(S,x,z,b,L){ht(this,c);ht(this,R,new Map);ht(this,E,new Map);ht(this,A,new Map);ht(this,a,null);this.messageHandler=S,this.loadingTask=x,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:b.ownerDocument,styleElement:b.styleElement}),this._params=b,this.canvasFactory=L.canvasFactory,this.filterFactory=L.filterFactory,this.cMapReaderFactory=L.cMapReaderFactory,this.standardFontDataFactory=L.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=z,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,L=_util.RenderingIntentFlag.DISPLAY,G=_annotation_storage.SerializableEmpty;switch(S){case"any":L=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":L=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${S}`)}switch(x){case _util.AnnotationMode.DISABLE:L+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:L+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:L+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,G=(L&_util.RenderingIntentFlag.PRINT&&z instanceof _annotation_storage.PrintAnnotationStorage?z:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${x}`)}return b&&(L+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:L,cacheKey:`${L}_${G.hash}`,annotationStorageSerializable:G}}destroy(){var z;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(z=r(this,a))==null||z.reject(new Error("Worker was destroyed during onPassword callback"));const S=[];for(const b of r(this,E).values())S.push(b._destroy());r(this,E).clear(),r(this,A).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const x=this.messageHandler.sendWithPromise("Terminate",null);return S.push(x),Promise.all(S).then(()=>{var b;this.commonObjs.clear(),this.fontLoader.clear(),r(this,R).clear(),this.filterFactory.destroy(),(b=this._networkStream)==null||b.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:S,loadingTask:x}=this;S.on("GetReader",(z,b)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=L=>{this._lastProgress={loaded:L.loaded,total:L.total}},b.onPull=()=>{this._fullReader.read().then(function(L){let{value:G,done:st}=L;if(st){b.close();return}(0,_util.assert)(G instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(G),1,[G])}).catch(L=>{b.error(L)})},b.onCancel=L=>{this._fullReader.cancel(L),b.ready.catch(G=>{if(!this.destroyed)throw G})}}),S.on("ReaderHeadersReady",z=>{const b=new _util.PromiseCapability,L=this._fullReader;return L.headersReady.then(()=>{var G;(!L.isStreamingSupported||!L.isRangeSupported)&&(this._lastProgress&&((G=x.onProgress)==null||G.call(x,this._lastProgress)),L.onProgress=st=>{var _;(_=x.onProgress)==null||_.call(x,{loaded:st.loaded,total:st.total})}),b.resolve({isStreamingSupported:L.isStreamingSupported,isRangeSupported:L.isRangeSupported,contentLength:L.contentLength})},b.reject),b.promise}),S.on("GetRangeReader",(z,b)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const L=this._networkStream.getRangeReader(z.begin,z.end);if(!L){b.close();return}b.onPull=()=>{L.read().then(function(G){let{value:st,done:_}=G;if(_){b.close();return}(0,_util.assert)(st instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(st),1,[st])}).catch(G=>{b.error(G)})},b.onCancel=G=>{L.cancel(G),b.ready.catch(st=>{if(!this.destroyed)throw st})}}),S.on("GetDoc",z=>{let{pdfInfo:b}=z;this._numPages=b.numPages,this._htmlForXfa=b.htmlForXfa,delete b.htmlForXfa,x._capability.resolve(new PDFDocumentProxy(b,this))}),S.on("DocException",function(z){let b;switch(z.name){case"PasswordException":b=new _util.PasswordException(z.message,z.code);break;case"InvalidPDFException":b=new _util.InvalidPDFException(z.message);break;case"MissingPDFException":b=new _util.MissingPDFException(z.message);break;case"UnexpectedResponseException":b=new _util.UnexpectedResponseException(z.message,z.status);break;case"UnknownErrorException":b=new _util.UnknownErrorException(z.message,z.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}x._capability.reject(b)}),S.on("PasswordRequest",z=>{if(ut(this,a,new _util.PromiseCapability),x.onPassword){const b=L=>{L instanceof Error?r(this,a).reject(L):r(this,a).resolve({password:L})};try{x.onPassword(b,z.code)}catch(L){r(this,a).reject(L)}}else r(this,a).reject(new _util.PasswordException(z.message,z.code));return r(this,a).promise}),S.on("DataLoaded",z=>{var b;(b=x.onProgress)==null||b.call(x,{loaded:z.length,total:z.length}),this.downloadInfoCapability.resolve(z)}),S.on("StartRenderPage",z=>{if(this.destroyed)return;r(this,E).get(z.pageIndex)._startRenderPage(z.transparency,z.cacheKey)}),S.on("commonobj",z=>{var st;let[b,L,G]=z;if(!this.destroyed&&!this.commonObjs.has(b))switch(L){case"Font":const _=this._params;if("error"in G){const it=G.error;(0,_util.warn)(`Error during font loading: ${it}`),this.commonObjs.resolve(b,it);break}const J=_.pdfBug&&((st=globalThis.FontInspector)!=null&&st.enabled)?(it,W)=>globalThis.FontInspector.fontAdded(it,W):null,K=new _font_loader.FontFaceObject(G,{isEvalSupported:_.isEvalSupported,disableFontFace:_.disableFontFace,ignoreErrors:_.ignoreErrors,inspectFont:J});this.fontLoader.bind(K).catch(it=>S.sendWithPromise("FontFallback",{id:b})).finally(()=>{!_.fontExtraProperties&&K.data&&(K.data=null),this.commonObjs.resolve(b,K)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(b,G);break;default:throw new Error(`Got unknown common object type ${L}`)}}),S.on("obj",z=>{var J;let[b,L,G,st]=z;if(this.destroyed)return;const _=r(this,E).get(L);if(!_.objs.has(b))switch(G){case"Image":if(_.objs.resolve(b,st),st){let K;if(st.bitmap){const{width:it,height:W}=st;K=it*W*4}else K=((J=st.data)==null?void 0:J.length)||0;K>_util.MAX_IMAGE_SIZE_TO_CACHE&&(_._maybeCleanupAfterRender=!0)}break;case"Pattern":_.objs.resolve(b,st);break;default:throw new Error(`Got unknown object type ${G}`)}}),S.on("DocProgress",z=>{var b;this.destroyed||(b=x.onProgress)==null||b.call(x,{loaded:z.loaded,total:z.total})}),S.on("FetchBuiltInCMap",z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(z):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),S.on("FetchStandardFontData",z=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(z):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var z;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:S,transfers:x}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:S,filename:((z=this._fullReader)==null?void 0:z.filename)??null},x).finally(()=>{this.annotationStorage.resetModified()})}getPage(S){if(!Number.isInteger(S)||S<=0||S>this._numPages)return Promise.reject(new Error("Invalid page request."));const x=S-1,z=r(this,A).get(x);if(z)return z;const b=this.messageHandler.sendWithPromise("GetPage",{pageIndex:x}).then(L=>{if(this.destroyed)throw new Error("Transport destroyed");const G=new PDFPageProxy(x,L,this,this._params.pdfBug);return r(this,E).set(x,G),G});return r(this,A).set(x,b),b}getPageIndex(S){return typeof S!="object"||S===null||!Number.isInteger(S.num)||S.num<0||!Number.isInteger(S.gen)||S.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:S.num,gen:S.gen})}getAnnotations(S,x){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:S,intent:x})}getFieldObjects(){return q(this,c,ye).call(this,"GetFieldObjects")}hasJSActions(){return q(this,c,ye).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(S){return typeof S!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:S})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return q(this,c,ye).call(this,"GetDocJSActions")}getPageJSActions(S){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:S})}getStructTree(S){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:S})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(S=>new _optional_content_config.OptionalContentConfig(S))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const S="GetMetadata",x=r(this,R).get(S);if(x)return x;const z=this.messageHandler.sendWithPromise(S,null).then(b=>{var L,G;return{info:b[0],metadata:b[1]?new _metadata.Metadata(b[1]):null,contentDispositionFilename:((L=this._fullReader)==null?void 0:L.filename)??null,contentLength:((G=this._fullReader)==null?void 0:G.contentLength)??null}});return r(this,R).set(S,z),z}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const x of r(this,E).values())if(!x.cleanup())throw new Error(`startCleanup: Page ${x.pageNumber} is currently rendering.`);this.commonObjs.clear(),S||this.fontLoader.clear(),r(this,R).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:S,enableXfa:x}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:S,enableXfa:x})}}R=new WeakMap,E=new WeakMap,A=new WeakMap,a=new WeakMap,c=new WeakSet,ye=function(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const z=r(this,R).get(S);if(z)return z;const b=this.messageHandler.sendWithPromise(S,x);return r(this,R).set(S,b),b};class PDFObjects{constructor(){ht(this,v);ht(this,s,Object.create(null))}get(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(x){const b=q(this,v,Oe).call(this,S);return b.capability.promise.then(()=>x(b.data)),null}const z=r(this,s)[S];if(!(z!=null&&z.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${S}.`);return z.data}has(S){const x=r(this,s)[S];return(x==null?void 0:x.capability.settled)||!1}resolve(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const z=q(this,v,Oe).call(this,S);z.data=x,z.capability.resolve()}clear(){var S;for(const x in r(this,s)){const{data:z}=r(this,s)[x];(S=z==null?void 0:z.bitmap)==null||S.close()}ut(this,s,Object.create(null))}}s=new WeakMap,v=new WeakSet,Oe=function(S){var x;return(x=r(this,s))[S]||(x[S]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(S){ht(this,P,null);ut(this,P,S),this.onContinue=null}get promise(){return r(this,P).capability.promise}cancel(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;r(this,P).cancel(null,S)}get separateAnnots(){const{separateAnnots:S}=r(this,P).operatorList;if(!S)return!1;const{annotationCanvasMap:x}=r(this,P);return S.form||S.canvas&&(x==null?void 0:x.size)>0}}P=new WeakMap,exports.RenderTask=RenderTask;const g=class g{constructor(S){let{callback:x,params:z,objs:b,commonObjs:L,annotationCanvasMap:G,operatorList:st,pageIndex:_,canvasFactory:J,filterFactory:K,useRequestAnimationFrame:it=!1,pdfBug:W=!1,pageColors:Y=null}=S;this.callback=x,this.params=z,this.objs=b,this.commonObjs=L,this.annotationCanvasMap=G,this.operatorListIdx=null,this.operatorList=st,this._pageIndex=_,this.canvasFactory=J,this.filterFactory=K,this._pdfBug=W,this.pageColors=Y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=it===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=z.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(S){var _,J;let{transparency:x=!1,optionalContentConfig:z}=S;if(this.cancelled)return;if(this._canvas){if(r(g,h).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r(g,h).add(this._canvas)}this._pdfBug&&((_=globalThis.StepperManager)!=null&&_.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:b,viewport:L,transform:G,background:st}=this.params;this.gfx=new _canvas.CanvasGraphics(b,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:z},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:G,viewport:L,transparency:x,background:st}),this.operatorListIdx=0,this.graphicsReady=!0,(J=this.graphicsReadyCallback)==null||J.call(this)}cancel(){var z;let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.running=!1,this.cancelled=!0,(z=this.gfx)==null||z.endDrawing(),r(g,h).delete(this._canvas),this.callback(S||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,x))}operatorListChanged(){var S;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(S=this.stepper)==null||S.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),r(g,h).delete(this._canvas),this.callback())))}};h=new WeakMap,ht(g,h,new WeakSet);let InternalRenderTask=g;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(C,i,t)=>{var e=t(3),n=t(126),o=t(135);e({target:"Set",proto:!0,real:!0,forced:!o("difference")},{difference:n})},(C,i,t)=>{var e=t(127),n=t(128),o=t(129),m=t(132),w=t(133),T=t(130),y=t(131),f=n.has,R=n.remove;C.exports=function(A){var a=e(this),c=w(A),l=o(a);return m(a)<=c.size?T(a,function(s){c.includes(s)&&R(l,s)}):y(c.getIterator(),function(s){f(a,s)&&R(l,s)}),l}},(C,i,t)=>{var e=t(128).has;C.exports=function(n){return e(n),n}},(C,i,t)=>{var e=t(14),n=Set.prototype;C.exports={Set,add:e(n.add),has:e(n.has),remove:e(n.delete),proto:n}},(C,i,t)=>{var e=t(128),n=t(130),o=e.Set,m=e.add;C.exports=function(w){var T=new o;return n(w,function(y){m(T,y)}),T}},(C,i,t)=>{var e=t(14),n=t(131),o=t(128),m=o.Set,w=o.proto,T=e(w.forEach),y=e(w.keys),f=y(new m).next;C.exports=function(R,E,A){return A?n({iterator:y(R),next:f},E):T(R,E)}},(C,i,t)=>{var e=t(8);C.exports=function(n,o,m){for(var w=m?n:n.iterator,T=n.next,y,f;!(y=e(T,w)).done;)if(f=o(y.value),f!==void 0)return f}},(C,i,t)=>{var e=t(72),n=t(128);C.exports=e(n.proto,"size","get")||function(o){return o.size}},(C,i,t)=>{var e=t(31),n=t(47),o=t(8),m=t(62),w=t(134),T="Invalid size",y=RangeError,f=TypeError,R=Math.max,E=function(A,a,c,l){this.set=A,this.size=a,this.has=c,this.keys=l};E.prototype={getIterator:function(){return w(n(o(this.keys,this.set)))},includes:function(A){return o(this.has,this.set,A)}},C.exports=function(A){n(A);var a=+A.size;if(a!==a)throw f(T);var c=m(a);if(c<0)throw y(T);return new E(A,R(c,0),e(A.has),e(A.keys))}},C=>{C.exports=function(i){return{iterator:i,next:i.next,done:!1}}},(C,i,t)=>{var e=t(24),n=function(o){return{size:o,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};C.exports=function(o){var m=e("Set");try{new m()[o](n(0));try{return new m()[o](n(-1)),!1}catch{return!0}}catch{return!1}}},(C,i,t)=>{var e=t(3),n=t(7),o=t(137),m=t(135),w=!m("intersection")||n(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});e({target:"Set",proto:!0,real:!0,forced:w},{intersection:o})},(C,i,t)=>{var e=t(127),n=t(128),o=t(132),m=t(133),w=t(130),T=t(131),y=n.Set,f=n.add,R=n.has;C.exports=function(A){var a=e(this),c=m(A),l=new y;return o(a)>c.size?T(c.getIterator(),function(s){R(a,s)&&f(l,s)}):w(a,function(s){c.includes(s)&&f(l,s)}),l}},(C,i,t)=>{var e=t(3),n=t(139),o=t(135);e({target:"Set",proto:!0,real:!0,forced:!o("isDisjointFrom")},{isDisjointFrom:n})},(C,i,t)=>{var e=t(127),n=t(128).has,o=t(132),m=t(133),w=t(130),T=t(131),y=t(140);C.exports=function(R){var E=e(this),A=m(R);if(o(E)<=A.size)return w(E,function(c){if(A.includes(c))return!1},!0)!==!1;var a=A.getIterator();return T(a,function(c){if(n(E,c))return y(a,"normal",!1)})!==!1}},(C,i,t)=>{var e=t(8),n=t(47),o=t(30);C.exports=function(m,w,T){var y,f;n(m);try{if(y=o(m,"return"),!y){if(w==="throw")throw T;return T}y=e(y,m)}catch(R){f=!0,y=R}if(w==="throw")throw T;if(f)throw y;return n(y),T}},(C,i,t)=>{var e=t(3),n=t(142),o=t(135);e({target:"Set",proto:!0,real:!0,forced:!o("isSubsetOf")},{isSubsetOf:n})},(C,i,t)=>{var e=t(127),n=t(132),o=t(130),m=t(133);C.exports=function(T){var y=e(this),f=m(T);return n(y)>f.size?!1:o(y,function(R){if(!f.includes(R))return!1},!0)!==!1}},(C,i,t)=>{var e=t(3),n=t(144),o=t(135);e({target:"Set",proto:!0,real:!0,forced:!o("isSupersetOf")},{isSupersetOf:n})},(C,i,t)=>{var e=t(127),n=t(128).has,o=t(132),m=t(133),w=t(131),T=t(140);C.exports=function(f){var R=e(this),E=m(f);if(o(R)<E.size)return!1;var A=E.getIterator();return w(A,function(a){if(!n(R,a))return T(A,"normal",!1)})!==!1}},(C,i,t)=>{var e=t(3),n=t(146),o=t(135);e({target:"Set",proto:!0,real:!0,forced:!o("symmetricDifference")},{symmetricDifference:n})},(C,i,t)=>{var e=t(127),n=t(128),o=t(129),m=t(133),w=t(131),T=n.add,y=n.has,f=n.remove;C.exports=function(E){var A=e(this),a=m(E).getIterator(),c=o(A);return w(a,function(l){y(A,l)?f(c,l):T(c,l)}),c}},(C,i,t)=>{var e=t(3),n=t(148),o=t(135);e({target:"Set",proto:!0,real:!0,forced:!o("union")},{union:n})},(C,i,t)=>{var e=t(127),n=t(128).add,o=t(129),m=t(133),w=t(131);C.exports=function(y){var f=e(this),R=m(y).getIterator(),E=o(f);return w(R,function(A){n(E,A)}),E}},(C,i,t)=>{var e=t(3),n=t(4),o=t(24),m=t(11),w=t(45).f,T=t(39),y=t(150),f=t(75),R=t(76),E=t(151),A=t(82),a=t(6),c=t(36),l="DOMException",s=o("Error"),v=o(l),D=function(){y(this,P);var J=arguments.length,K=R(J<1?void 0:arguments[0]),it=R(J<2?void 0:arguments[1],"Error"),W=new v(K,it),Y=s(K);return Y.name=l,w(W,"stack",m(1,A(Y.stack,1))),f(W,this,D),W},P=D.prototype=v.prototype,h="stack"in s(l),g="stack"in new v(1,2),u=v&&a&&Object.getOwnPropertyDescriptor(n,l),S=!!u&&!(u.writable&&u.configurable),x=h&&!S&&!g;e({global:!0,constructor:!0,forced:c||x},{DOMException:x?D:v});var z=o(l),b=z.prototype;if(b.constructor!==z){c||w(b,"constructor",m(1,z));for(var L in E)if(T(E,L)){var G=E[L],st=G.s;T(z,st)||w(z,st,m(6,G.c))}}},(C,i,t)=>{var e=t(25),n=TypeError;C.exports=function(o,m){if(e(m,o))return o;throw n("Incorrect invocation")}},C=>{C.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},(C,i,t)=>{var e=t(36),n=t(3),o=t(4),m=t(24),w=t(14),T=t(7),y=t(41),f=t(21),R=t(153),E=t(17),A=t(20),a=t(23),c=t(154),l=t(47),s=t(78),v=t(39),D=t(159),P=t(44),h=t(64),g=t(85),u=t(160),S=t(162),x=t(128),z=t(83),b=t(119),L=o.Object,G=o.Array,st=o.Date,_=o.Error,J=o.EvalError,K=o.RangeError,it=o.ReferenceError,W=o.SyntaxError,Y=o.TypeError,rt=o.URIError,$=o.PerformanceMark,d=o.WebAssembly,p=d&&d.CompileError||_,M=d&&d.LinkError||_,N=d&&d.RuntimeError||_,F=m("DOMException"),I=S.Map,X=S.has,H=S.get,et=S.set,dt=x.Set,gt=x.add,At=m("Object","keys"),bt=w([].push),nt=w((!0).valueOf),ft=w(1 .valueOf),U=w("".valueOf),V=w(st.prototype.getTime),tt=y("structuredClone"),lt="DataCloneError",mt="Transferring",xt=function(k){return!T(function(){var Z=new o.Set([7]),vt=k(Z),Ct=k(L(7));return vt===Z||!vt.has(7)||typeof Ct!="object"||+Ct!=7})&&k},Et=function(k,Z){return!T(function(){var vt=new Z,Ct=k({a:vt,b:vt});return!(Ct&&Ct.a===Ct.b&&Ct.a instanceof Z&&Ct.a.stack===vt.stack)})},at=function(k){return!T(function(){var Z=k(new o.AggregateError([1],tt,{cause:3}));return Z.name!=="AggregateError"||Z.errors[0]!==1||Z.message!==tt||Z.cause!==3})},kt=o.structuredClone,wt=e||!Et(kt,_)||!Et(kt,F)||!at(kt),$t=!kt&&xt(function(k){return new $(tt,{detail:k}).detail}),Lt=xt(kt)||$t,Xt=function(k){throw new F("Uncloneable type: "+k,lt)},Ft=function(k,Z){throw new F((Z||"Cloning")+" of "+k+" cannot be properly polyfilled in this engine",lt)},Bt=function(k,Z){return Lt||Ft(Z),Lt(k)},Gt=function(){var k;try{k=new o.DataTransfer}catch{try{k=new o.ClipboardEvent("").clipboardData}catch{}}return k&&k.items&&k.files?k:null},Kt=function(k,Z,vt){if(X(Z,k))return H(Z,k);var Ct=vt||s(k),Rt,Pt,O,B,Q,j;if(Ct==="SharedArrayBuffer")Lt?Rt=Lt(k):Rt=k;else{var pt=o.DataView;!pt&&typeof k.slice!="function"&&Ft("ArrayBuffer");try{if(typeof k.slice=="function"&&!k.resizable)Rt=k.slice(0);else for(Pt=k.byteLength,O=("maxByteLength"in k)?{maxByteLength:k.maxByteLength}:void 0,Rt=new ArrayBuffer(Pt,O),B=new pt(k),Q=new pt(Rt),j=0;j<Pt;j++)Q.setUint8(j,B.getUint8(j))}catch{throw new F("ArrayBuffer is detached",lt)}}return et(Z,k,Rt),Rt},Yt=function(k,Z,vt,Ct,Rt){var Pt=o[Z];return A(Pt)||Ft(Z),new Pt(Kt(k.buffer,Rt),vt,Ct)},Tt=function(k,Z,vt){this.object=k,this.type=Z,this.metadata=vt},ot=function(k,Z,vt){if(a(k)&&Xt("Symbol"),!A(k))return k;if(Z){if(X(Z,k))return H(Z,k)}else Z=new I;var Ct=s(k),Rt,Pt,O,B,Q,j,pt,yt;switch(Ct){case"Array":O=G(h(k));break;case"Object":O={};break;case"Map":O=new I;break;case"Set":O=new dt;break;case"RegExp":O=new RegExp(k.source,u(k));break;case"Error":switch(Pt=k.name,Pt){case"AggregateError":O=m("AggregateError")([]);break;case"EvalError":O=J();break;case"RangeError":O=K();break;case"ReferenceError":O=it();break;case"SyntaxError":O=W();break;case"TypeError":O=Y();break;case"URIError":O=rt();break;case"CompileError":O=p();break;case"LinkError":O=M();break;case"RuntimeError":O=N();break;default:O=_()}break;case"DOMException":O=new F(k.message,k.name);break;case"ArrayBuffer":case"SharedArrayBuffer":O=vt?new Tt(k,Ct):Kt(k,Z,Ct);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":j=Ct==="DataView"?k.byteLength:k.length,O=vt?new Tt(k,Ct,{offset:k.byteOffset,length:j}):Yt(k,Ct,k.byteOffset,j,Z);break;case"DOMQuad":try{O=new DOMQuad(ot(k.p1,Z,vt),ot(k.p2,Z,vt),ot(k.p3,Z,vt),ot(k.p4,Z,vt))}catch{O=Bt(k,Ct)}break;case"File":if(Lt)try{O=Lt(k),s(O)!==Ct&&(O=void 0)}catch{}if(!O)try{O=new File([k],k.name,k)}catch{}O||Ft(Ct);break;case"FileList":if(B=Gt(),B){for(Q=0,j=h(k);Q<j;Q++)B.items.add(ot(k[Q],Z,vt));O=B.files}else O=Bt(k,Ct);break;case"ImageData":try{O=new ImageData(ot(k.data,Z,vt),k.width,k.height,{colorSpace:k.colorSpace})}catch{O=Bt(k,Ct)}break;default:if(Lt)O=Lt(k);else switch(Ct){case"BigInt":O=L(k.valueOf());break;case"Boolean":O=L(nt(k));break;case"Number":O=L(ft(k));break;case"String":O=L(U(k));break;case"Date":O=new st(V(k));break;case"Blob":try{O=k.slice(0,k.size,k.type)}catch{Ft(Ct)}break;case"DOMPoint":case"DOMPointReadOnly":Rt=o[Ct];try{O=Rt.fromPoint?Rt.fromPoint(k):new Rt(k.x,k.y,k.z,k.w)}catch{Ft(Ct)}break;case"DOMRect":case"DOMRectReadOnly":Rt=o[Ct];try{O=Rt.fromRect?Rt.fromRect(k):new Rt(k.x,k.y,k.width,k.height)}catch{Ft(Ct)}break;case"DOMMatrix":case"DOMMatrixReadOnly":Rt=o[Ct];try{O=Rt.fromMatrix?Rt.fromMatrix(k):new Rt(k)}catch{Ft(Ct)}break;case"AudioData":case"VideoFrame":f(k.clone)||Ft(Ct);try{O=k.clone()}catch{Xt(Ct)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Ft(Ct);default:Xt(Ct)}}switch(et(Z,k,O),Ct){case"Array":case"Object":for(pt=At(k),Q=0,j=h(pt);Q<j;Q++)yt=pt[Q],D(O,yt,ot(k[yt],Z,vt));break;case"Map":k.forEach(function(St,Dt){et(O,ot(Dt,Z,vt),ot(St,Z,vt))});break;case"Set":k.forEach(function(St){gt(O,ot(St,Z,vt))});break;case"Error":P(O,"message",ot(k.message,Z,vt)),v(k,"cause")&&P(O,"cause",ot(k.cause,Z,vt)),Pt==="AggregateError"&&(O.errors=ot(k.errors,Z,vt));case"DOMException":z&&P(O,"stack",ot(k.stack,Z,vt))}return O},ct=function(k,Z){if(!A(k))return k;if(X(Z,k))return H(Z,k);var vt,Ct,Rt,Pt,O,B,Q,j;if(k instanceof Tt)switch(vt=k.type,Ct=k.object,vt){case"ArrayBuffer":case"SharedArrayBuffer":j=Kt(Ct,Z,vt);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":Rt=k.metadata,j=Yt(Ct,vt,Rt.offset,Rt.length,Z)}else switch(s(k)){case"Array":case"Object":for(B=At(k),Pt=0,O=h(B);Pt<O;Pt++)Q=B[Pt],k[Q]=ct(k[Q],Z);break;case"Map":j=new I,k.forEach(function(pt,yt){et(j,ct(yt,Z),ct(pt,Z))});break;case"Set":j=new dt,k.forEach(function(pt){gt(j,ct(pt,Z))});break;case"Error":k.message=ct(k.message,Z),v(k,"cause")&&(k.cause=ct(k.cause,Z)),k.name==="AggregateError"&&(k.errors=ct(k.errors,Z));case"DOMException":z&&(k.stack=ct(k.stack,Z))}return et(Z,k,j||k),j||k},It=function(k,Z){if(!A(k))throw Y("Transfer option cannot be converted to a sequence");var vt=[];c(k,function(St){bt(vt,l(St))});for(var Ct=0,Rt=h(vt),Pt=[],O,B,Q,j,pt,yt;Ct<Rt;){if(O=vt[Ct++],B=s(O),B==="ArrayBuffer"){bt(Pt,O);continue}if(X(Z,O))throw new F("Duplicate transferable",lt);if(b)j=kt(O,{transfer:[O]});else switch(B){case"ImageBitmap":Q=o.OffscreenCanvas,R(Q)||Ft(B,mt);try{pt=new Q(O.width,O.height),yt=pt.getContext("bitmaprenderer"),yt.transferFromImageBitmap(O),j=pt.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!f(O.clone)||!f(O.close))&&Ft(B,mt);try{j=O.clone(),O.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":Ft(B,mt)}if(j===void 0)throw new F("This object cannot be transferred: "+B,lt);et(Z,O,j)}return Pt},Wt=function(k,Z){for(var vt=0,Ct=h(k),Rt,Pt;vt<Ct;){if(Rt=k[vt++],X(Z,Rt))throw new F("Duplicate transferable",lt);b?Pt=kt(Rt,{transfer:[Rt]}):(f(Rt.transfer)||Ft("ArrayBuffer",mt),Pt=Rt.transfer()),et(Z,Rt,Pt)}};n({global:!0,enumerable:!0,sham:!b,forced:wt},{structuredClone:function(Z){var vt=g(arguments.length,1)>1&&!E(arguments[1])?l(arguments[1]):void 0,Ct=vt?vt.transfer:void 0,Rt=!1,Pt,O;Ct!==void 0&&(Pt=new I,O=It(Ct,Pt),Rt=!!h(O));var B=ot(Z,Pt,Rt);return Rt&&(Pt=new I,Wt(Ct,Pt),B=ct(B,Pt)),B}})},(C,i,t)=>{var e=t(14),n=t(7),o=t(21),m=t(78),w=t(24),T=t(51),y=function(){},f=[],R=w("Reflect","construct"),E=/^\s*(?:class|function)\b/,A=e(E.exec),a=!E.exec(y),c=function(v){if(!o(v))return!1;try{return R(y,f,v),!0}catch{return!1}},l=function(v){if(!o(v))return!1;switch(m(v)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return a||!!A(E,T(v))}catch{return!0}};l.sham=!0,C.exports=!R||n(function(){var s;return c(c.call)||!c(Object)||!c(function(){s=!0})||s})?l:c},(C,i,t)=>{var e=t(99),n=t(8),o=t(47),m=t(32),w=t(155),T=t(64),y=t(25),f=t(157),R=t(158),E=t(140),A=TypeError,a=function(l,s){this.stopped=l,this.result=s},c=a.prototype;C.exports=function(l,s,v){var D=v&&v.that,P=!!(v&&v.AS_ENTRIES),h=!!(v&&v.IS_RECORD),g=!!(v&&v.IS_ITERATOR),u=!!(v&&v.INTERRUPTED),S=e(s,D),x,z,b,L,G,st,_,J=function(it){return x&&E(x,"normal",it),new a(!0,it)},K=function(it){return P?(o(it),u?S(it[0],it[1],J):S(it[0],it[1])):u?S(it,J):S(it)};if(h)x=l.iterator;else if(g)x=l;else{if(z=R(l),!z)throw A(m(l)+" is not iterable");if(w(z)){for(b=0,L=T(l);L>b;b++)if(G=K(l[b]),G&&y(c,G))return G;return new a(!1)}x=f(l,z)}for(st=h?l.next:x.next;!(_=n(st,x)).done;){try{G=K(_.value)}catch(it){E(x,"throw",it)}if(typeof G=="object"&&G&&y(c,G))return G}return new a(!1)}},(C,i,t)=>{var e=t(34),n=t(156),o=e("iterator"),m=Array.prototype;C.exports=function(w){return w!==void 0&&(n.Array===w||m[o]===w)}},C=>{C.exports={}},(C,i,t)=>{var e=t(8),n=t(31),o=t(47),m=t(32),w=t(158),T=TypeError;C.exports=function(y,f){var R=arguments.length<2?w(y):f;if(n(R))return o(e(R,y));throw T(m(y)+" is not iterable")}},(C,i,t)=>{var e=t(78),n=t(30),o=t(17),m=t(156),w=t(34),T=w("iterator");C.exports=function(y){if(!o(y))return n(y,T)||n(y,"@@iterator")||m[e(y)]}},(C,i,t)=>{var e=t(18),n=t(45),o=t(11);C.exports=function(m,w,T){var y=e(w);y in m?n.f(m,y,o(0,T)):m[y]=T}},(C,i,t)=>{var e=t(8),n=t(39),o=t(25),m=t(161),w=RegExp.prototype;C.exports=function(T){var y=T.flags;return y===void 0&&!("flags"in w)&&!n(T,"flags")&&o(w,T)?e(m,T):y}},(C,i,t)=>{var e=t(47);C.exports=function(){var n=e(this),o="";return n.hasIndices&&(o+="d"),n.global&&(o+="g"),n.ignoreCase&&(o+="i"),n.multiline&&(o+="m"),n.dotAll&&(o+="s"),n.unicode&&(o+="u"),n.unicodeSets&&(o+="v"),n.sticky&&(o+="y"),o}},(C,i,t)=>{var e=t(14),n=Map.prototype;C.exports={Map,set:e(n.set),get:e(n.get),has:e(n.has),remove:e(n.delete),proto:n}},(C,i,t)=>{var y,f,R,mn,A;Object.defineProperty(i,"__esModule",{value:!0}),i.SerializableEmpty=i.PrintAnnotationStorage=i.AnnotationStorage=void 0,t(89),t(149),t(152);var e=t(1),n=t(164),o=t(170);const m=Object.freeze({map:null,hash:"",transfers:void 0});i.SerializableEmpty=m;class w{constructor(){ht(this,R);ht(this,y,!1);ht(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(c,l){const s=r(this,f).get(c);return s===void 0?l:Object.assign(l,s)}getRawValue(c){return r(this,f).get(c)}remove(c){if(r(this,f).delete(c),r(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const l of r(this,f).values())if(l instanceof n.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(c,l){const s=r(this,f).get(c);let v=!1;if(s!==void 0)for(const[D,P]of Object.entries(l))s[D]!==P&&(v=!0,s[D]=P);else v=!0,r(this,f).set(c,l);v&&q(this,R,mn).call(this),l instanceof n.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(l.constructor._type)}has(c){return r(this,f).has(c)}getAll(){return r(this,f).size>0?(0,e.objectFromMap)(r(this,f)):null}setAll(c){for(const[l,s]of Object.entries(c))this.setValue(l,s)}get size(){return r(this,f).size}resetModified(){r(this,y)&&(ut(this,y,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new T(this)}get serializable(){if(r(this,f).size===0)return m;const c=new Map,l=new o.MurmurHash3_64,s=[],v=Object.create(null);let D=!1;for(const[P,h]of r(this,f)){const g=h instanceof n.AnnotationEditor?h.serialize(!1,v):h;g&&(c.set(P,g),l.update(`${P}:${JSON.stringify(g)}`),D||(D=!!g.bitmap))}if(D)for(const P of c.values())P.bitmap&&s.push(P.bitmap);return c.size>0?{map:c,hash:l.hexdigest(),transfers:s}:m}}y=new WeakMap,f=new WeakMap,R=new WeakSet,mn=function(){r(this,y)||(ut(this,y,!0),typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=w;class T extends w{constructor(l){super();ht(this,A);const{map:s,hash:v,transfers:D}=l.serializable,P=structuredClone(s,null);ut(this,A,{map:P,hash:v,transfers:D})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return r(this,A)}}A=new WeakMap,i.PrintAnnotationStorage=T},(C,i,t)=>{var T,y,f,R,E,A,a,c,l,s,v,D,P,h,g,De,Le,x,Ne,Be,vn,bn,yn,Ue,An;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0,t(89),t(2);var e=t(165),n=t(1),o=t(168);const K=class K{constructor(W){ht(this,g);ht(this,T,"");ht(this,y,!1);ht(this,f,null);ht(this,R,null);ht(this,E,null);ht(this,A,!1);ht(this,a,null);ht(this,c,this.focusin.bind(this));ht(this,l,this.focusout.bind(this));ht(this,s,!1);ht(this,v,!1);ht(this,D,!1);Qt(this,"_initialOptions",Object.create(null));Qt(this,"_uiManager",null);Qt(this,"_focusEventsAllowed",!0);Qt(this,"_l10nPromise",null);ht(this,P,!1);ht(this,h,K._zIndex++);this.constructor===K&&(0,n.unreachable)("Cannot initialize AnnotationEditor."),this.parent=W.parent,this.id=W.id,this.width=this.height=null,this.pageIndex=W.parent.pageIndex,this.name=W.name,this.div=null,this._uiManager=W.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=W.isCentered,this._structTreeParentId=null;const{rotation:Y,rawDims:{pageWidth:rt,pageHeight:$,pageX:d,pageY:p}}=this.parent.viewport;this.rotation=Y,this.pageRotation=(360+Y-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[rt,$],this.pageTranslation=[d,p];const[M,N]=this.parentDimensions;this.x=W.x/M,this.y=W.y/N,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,n.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(W){const Y=new w({id:W.parent.getNextId(),parent:W.parent,uiManager:W._uiManager});Y.annotationElementId=W.annotationElementId,Y.deleted=!0,Y._uiManager.addToAnnotationStorage(Y)}static initialize(W){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(K._l10nPromise||(K._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map($=>[$,W.get($)]))),Y!=null&&Y.strings)for(const $ of Y.strings)K._l10nPromise.set($,W.get($));if(K._borderLineWidth!==-1)return;const rt=getComputedStyle(document.documentElement);K._borderLineWidth=parseFloat(rt.getPropertyValue("--outline-width"))||0}static updateDefaultParams(W,Y){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(W){return!1}static paste(W,Y){(0,n.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return r(this,P)}set _isDraggable(W){var Y;ut(this,P,W),(Y=this.div)==null||Y.classList.toggle("draggable",W)}center(){const[W,Y]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Y/(W*2),this.y+=this.width*W/(Y*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Y/(W*2),this.y-=this.width*W/(Y*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(W){this._uiManager.addCommands(W)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=r(this,h)}setParent(W){W!==null&&(this.pageIndex=W.pageIndex,this.pageDimensions=W.pageDimensions),this.parent=W}focusin(W){this._focusEventsAllowed&&(r(this,s)?ut(this,s,!1):this.parent.setSelected(this))}focusout(W){var rt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Y=W.relatedTarget;Y!=null&&Y.closest(`#${this.id}`)||(W.preventDefault(),(rt=this.parent)!=null&&rt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(W,Y,rt,$){const[d,p]=this.parentDimensions;[rt,$]=this.screenToPageTranslation(rt,$),this.x=(W+rt)/d,this.y=(Y+$)/p,this.fixAndSetPosition()}translate(W,Y){q(this,g,De).call(this,this.parentDimensions,W,Y)}translateInPage(W,Y){q(this,g,De).call(this,this.pageDimensions,W,Y),this.div.scrollIntoView({block:"nearest"})}drag(W,Y){const[rt,$]=this.parentDimensions;if(this.x+=W/rt,this.y+=Y/$,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:F,y:I}=this.div.getBoundingClientRect();this.parent.findNewParent(this,F,I)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:d,y:p}=this;const[M,N]=q(this,g,Le).call(this);d+=M,p+=N,this.div.style.left=`${(100*d).toFixed(2)}%`,this.div.style.top=`${(100*p).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[W,Y]=this.pageDimensions;let{x:rt,y:$,width:d,height:p}=this;switch(d*=W,p*=Y,rt*=W,$*=Y,this.rotation){case 0:rt=Math.max(0,Math.min(W-d,rt)),$=Math.max(0,Math.min(Y-p,$));break;case 90:rt=Math.max(0,Math.min(W-p,rt)),$=Math.min(Y,Math.max(d,$));break;case 180:rt=Math.min(W,Math.max(d,rt)),$=Math.min(Y,Math.max(p,$));break;case 270:rt=Math.min(W,Math.max(p,rt)),$=Math.max(0,Math.min(Y-d,$));break}this.x=rt/=W,this.y=$/=Y;const[M,N]=q(this,g,Le).call(this);rt+=M,$+=N;const{style:F}=this.div;F.left=`${(100*rt).toFixed(2)}%`,F.top=`${(100*$).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(W,Y){var rt;return q(rt=K,x,Ne).call(rt,W,Y,this.parentRotation)}pageTranslationToScreen(W,Y){var rt;return q(rt=K,x,Ne).call(rt,W,Y,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:W,pageDimensions:[Y,rt]}=this,$=Y*W,d=rt*W;return n.FeatureTest.isCSSRoundSupported?[Math.round($),Math.round(d)]:[$,d]}setDims(W,Y){var d;const[rt,$]=this.parentDimensions;this.div.style.width=`${(100*W/rt).toFixed(2)}%`,r(this,A)||(this.div.style.height=`${(100*Y/$).toFixed(2)}%`),(d=r(this,f))==null||d.classList.toggle("small",W<K.SMALL_EDITOR_SIZE||Y<K.SMALL_EDITOR_SIZE)}fixDims(){const{style:W}=this.div,{height:Y,width:rt}=W,$=rt.endsWith("%"),d=!r(this,A)&&Y.endsWith("%");if($&&d)return;const[p,M]=this.parentDimensions;$||(W.width=`${(100*parseFloat(rt)/p).toFixed(2)}%`),!r(this,A)&&!d&&(W.height=`${(100*parseFloat(Y)/M).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(r(this,f))return;const W=ut(this,f,document.createElement("button"));W.className="altText";const Y=await K._l10nPromise.get("editor_alt_text_button_label");W.textContent=Y,W.setAttribute("aria-label",Y),W.tabIndex="0",W.addEventListener("contextmenu",o.noContextMenu),W.addEventListener("pointerdown",rt=>rt.stopPropagation()),W.addEventListener("click",rt=>{rt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),W.addEventListener("keydown",rt=>{rt.target===W&&rt.key==="Enter"&&(rt.preventDefault(),this._uiManager.editAltText(this))}),q(this,g,Ue).call(this),this.div.append(W),K.SMALL_EDITOR_SIZE||(K.SMALL_EDITOR_SIZE=Math.min(128,Math.round(W.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:r(this,T),decorative:r(this,y)}}set altTextData(W){let{altText:Y,decorative:rt}=W;r(this,T)===Y&&r(this,y)===rt||(ut(this,T,Y),ut(this,y,rt),q(this,g,Ue).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",r(this,c)),this.div.addEventListener("focusout",r(this,l));const[W,Y]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Y/W).toFixed(2)}%`,this.div.style.maxHeight=`${(100*W/Y).toFixed(2)}%`);const[rt,$]=this.getInitialTranslation();return this.translate(rt,$),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(W){const{isMac:Y}=n.FeatureTest.platform;if(W.button!==0||W.ctrlKey&&Y){W.preventDefault();return}ut(this,s,!0),q(this,g,An).call(this,W)}moveInDOM(){var W;(W=this.parent)==null||W.moveEditorInDOM(this)}_setParentAndPosition(W,Y,rt){W.changeParent(this),this.x=Y,this.y=rt,this.fixAndSetPosition()}getRect(W,Y){const rt=this.parentScale,[$,d]=this.pageDimensions,[p,M]=this.pageTranslation,N=W/rt,F=Y/rt,I=this.x*$,X=this.y*d,H=this.width*$,et=this.height*d;switch(this.rotation){case 0:return[I+N+p,d-X-F-et+M,I+N+H+p,d-X-F+M];case 90:return[I+F+p,d-X+N+M,I+F+et+p,d-X+N+H+M];case 180:return[I-N-H+p,d-X+F+M,I-N+p,d-X+F+et+M];case 270:return[I-F-et+p,d-X-N-H+M,I-F+p,d-X-N+M];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(W,Y){const[rt,$,d,p]=W,M=d-rt,N=p-$;switch(this.rotation){case 0:return[rt,Y-p,M,N];case 90:return[rt,Y-$,N,M];case 180:return[d,Y-$,M,N];case 270:return[d,Y-p,N,M];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ut(this,D,!0)}disableEditMode(){ut(this,D,!1)}isInEditMode(){return r(this,D)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var W,Y;(W=this.div)==null||W.addEventListener("focusin",r(this,c)),(Y=this.div)==null||Y.addEventListener("focusout",r(this,l))}serialize(){(0,n.unreachable)("An editor must be serializable")}static deserialize(W,Y,rt){const $=new this.prototype.constructor({parent:Y,id:Y.getNextId(),uiManager:rt});$.rotation=W.rotation;const[d,p]=$.pageDimensions,[M,N,F,I]=$.getRectInCurrentCoords(W.rect,p);return $.x=M/d,$.y=N/p,$.width=F/d,$.height=I/p,$}remove(){var W;this.div.removeEventListener("focusin",r(this,c)),this.div.removeEventListener("focusout",r(this,l)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(W=r(this,f))==null||W.remove(),ut(this,f,null),ut(this,R,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(q(this,g,vn).call(this),r(this,a).classList.remove("hidden"))}select(){var W;this.makeResizable(),(W=this.div)==null||W.classList.add("selectedEditor")}unselect(){var W,Y,rt;(W=r(this,a))==null||W.classList.add("hidden"),(Y=this.div)==null||Y.classList.remove("selectedEditor"),(rt=this.div)!=null&&rt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(W,Y){}disableEditing(){r(this,f)&&(r(this,f).hidden=!0)}enableEditing(){r(this,f)&&(r(this,f).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return r(this,v)}set isEditing(W){ut(this,v,W),this.parent&&(W?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(W,Y){ut(this,A,!0);const rt=W/Y,{style:$}=this.div;$.aspectRatio=rt,$.height="auto"}static get MIN_SIZE(){return 16}};T=new WeakMap,y=new WeakMap,f=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakMap,v=new WeakMap,D=new WeakMap,P=new WeakMap,h=new WeakMap,g=new WeakSet,De=function(W,Y,rt){let[$,d]=W;[Y,rt]=this.screenToPageTranslation(Y,rt),this.x+=Y/$,this.y+=rt/d,this.fixAndSetPosition()},Le=function(){const[W,Y]=this.parentDimensions,{_borderLineWidth:rt}=K,$=rt/W,d=rt/Y;switch(this.rotation){case 90:return[-$,d];case 180:return[$,d];case 270:return[$,-d];default:return[-$,-d]}},x=new WeakSet,Ne=function(W,Y,rt){switch(rt){case 90:return[Y,-W];case 180:return[-W,-Y];case 270:return[-Y,W];default:return[W,Y]}},Be=function(W){switch(W){case 90:{const[Y,rt]=this.pageDimensions;return[0,-Y/rt,rt/Y,0]}case 180:return[-1,0,0,-1];case 270:{const[Y,rt]=this.pageDimensions;return[0,Y/rt,-rt/Y,0]}default:return[1,0,0,1]}},vn=function(){if(r(this,a))return;ut(this,a,document.createElement("div")),r(this,a).classList.add("resizers");const W=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||W.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Y of W){const rt=document.createElement("div");r(this,a).append(rt),rt.classList.add("resizer",Y),rt.addEventListener("pointerdown",q(this,g,bn).bind(this,Y)),rt.addEventListener("contextmenu",o.noContextMenu)}this.div.prepend(r(this,a))},bn=function(W,Y){Y.preventDefault();const{isMac:rt}=n.FeatureTest.platform;if(Y.button!==0||Y.ctrlKey&&rt)return;const $=q(this,g,yn).bind(this,W),d=this._isDraggable;this._isDraggable=!1;const p={passive:!0,capture:!0};window.addEventListener("pointermove",$,p);const M=this.x,N=this.y,F=this.width,I=this.height,X=this.parent.div.style.cursor,H=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Y.target).cursor;const et=()=>{this._isDraggable=d,window.removeEventListener("pointerup",et),window.removeEventListener("blur",et),window.removeEventListener("pointermove",$,p),this.parent.div.style.cursor=X,this.div.style.cursor=H;const dt=this.x,gt=this.y,At=this.width,bt=this.height;dt===M&&gt===N&&At===F&&bt===I||this.addCommands({cmd:()=>{this.width=At,this.height=bt,this.x=dt,this.y=gt;const[nt,ft]=this.parentDimensions;this.setDims(nt*At,ft*bt),this.fixAndSetPosition()},undo:()=>{this.width=F,this.height=I,this.x=M,this.y=N;const[nt,ft]=this.parentDimensions;this.setDims(nt*F,ft*I),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",et),window.addEventListener("blur",et)},yn=function(W,Y){const[rt,$]=this.parentDimensions,d=this.x,p=this.y,M=this.width,N=this.height,F=K.MIN_SIZE/rt,I=K.MIN_SIZE/$,X=Ft=>Math.round(Ft*1e4)/1e4,H=q(this,g,Be).call(this,this.rotation),et=(Ft,Bt)=>[H[0]*Ft+H[2]*Bt,H[1]*Ft+H[3]*Bt],dt=q(this,g,Be).call(this,360-this.rotation),gt=(Ft,Bt)=>[dt[0]*Ft+dt[2]*Bt,dt[1]*Ft+dt[3]*Bt];let At,bt,nt=!1,ft=!1;switch(W){case"topLeft":nt=!0,At=(Ft,Bt)=>[0,0],bt=(Ft,Bt)=>[Ft,Bt];break;case"topMiddle":At=(Ft,Bt)=>[Ft/2,0],bt=(Ft,Bt)=>[Ft/2,Bt];break;case"topRight":nt=!0,At=(Ft,Bt)=>[Ft,0],bt=(Ft,Bt)=>[0,Bt];break;case"middleRight":ft=!0,At=(Ft,Bt)=>[Ft,Bt/2],bt=(Ft,Bt)=>[0,Bt/2];break;case"bottomRight":nt=!0,At=(Ft,Bt)=>[Ft,Bt],bt=(Ft,Bt)=>[0,0];break;case"bottomMiddle":At=(Ft,Bt)=>[Ft/2,Bt],bt=(Ft,Bt)=>[Ft/2,0];break;case"bottomLeft":nt=!0,At=(Ft,Bt)=>[0,Bt],bt=(Ft,Bt)=>[Ft,0];break;case"middleLeft":ft=!0,At=(Ft,Bt)=>[0,Bt/2],bt=(Ft,Bt)=>[Ft,Bt/2];break}const U=At(M,N),V=bt(M,N);let tt=et(...V);const lt=X(d+tt[0]),mt=X(p+tt[1]);let xt=1,Et=1,[at,kt]=this.screenToPageTranslation(Y.movementX,Y.movementY);if([at,kt]=gt(at/rt,kt/$),nt){const Ft=Math.hypot(M,N);xt=Et=Math.max(Math.min(Math.hypot(V[0]-U[0]-at,V[1]-U[1]-kt)/Ft,1/M,1/N),F/M,I/N)}else ft?xt=Math.max(F,Math.min(1,Math.abs(V[0]-U[0]-at)))/M:Et=Math.max(I,Math.min(1,Math.abs(V[1]-U[1]-kt)))/N;const wt=X(M*xt),$t=X(N*Et);tt=et(...bt(wt,$t));const Lt=lt-tt[0],Xt=mt-tt[1];this.width=wt,this.height=$t,this.x=Lt,this.y=Xt,this.setDims(rt*wt,$*$t),this.fixAndSetPosition()},Ue=async function(){var rt;const W=r(this,f);if(!W)return;if(!r(this,T)&&!r(this,y)){W.classList.remove("done"),(rt=r(this,R))==null||rt.remove();return}K._l10nPromise.get("editor_alt_text_edit_button_label").then($=>{W.setAttribute("aria-label",$)});let Y=r(this,R);if(!Y){ut(this,R,Y=document.createElement("span")),Y.className="tooltip",Y.setAttribute("role","tooltip");const $=Y.id=`alt-text-tooltip-${this.id}`;W.setAttribute("aria-describedby",$);const d=100;W.addEventListener("mouseenter",()=>{ut(this,E,setTimeout(()=>{ut(this,E,null),r(this,R).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},d))}),W.addEventListener("mouseleave",()=>{var p;clearTimeout(r(this,E)),ut(this,E,null),(p=r(this,R))==null||p.classList.remove("show")})}W.classList.add("done"),Y.innerText=r(this,y)?await K._l10nPromise.get("editor_alt_text_decorative_tooltip"):r(this,T),Y.parentNode||W.append(Y)},An=function(W){if(!this._isDraggable)return;const Y=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let rt,$;Y&&(rt={passive:!0,capture:!0},$=p=>{const[M,N]=this.screenToPageTranslation(p.movementX,p.movementY);this._uiManager.dragSelectedEditors(M,N)},window.addEventListener("pointermove",$,rt));const d=()=>{if(window.removeEventListener("pointerup",d),window.removeEventListener("blur",d),Y&&window.removeEventListener("pointermove",$,rt),ut(this,s,!1),!this._uiManager.endDragSession()){const{isMac:p}=n.FeatureTest.platform;W.ctrlKey&&!p||W.shiftKey||W.metaKey&&p?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",d),window.addEventListener("blur",d)},ht(K,x),Qt(K,"_borderLineWidth",-1),Qt(K,"_colorManager",new e.ColorManager),Qt(K,"_zIndex",1),Qt(K,"SMALL_EDITOR_SIZE",0);let m=K;i.AnnotationEditor=m;class w extends m{constructor(W){super(W),this.annotationElementId=W.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(C,i,t)=>{var A,a,c,l,s,We,P,h,g,u,S,Sn,b,L,G,st,_,J,K,it,W,Y,rt,$,d,p,M,N,F,I,X,H,et,dt,gt,At,bt,nt,ft,U,V,tt,lt,mt,xt,Et,at,En,He,$e,Ae,ze,Ge,qt,ue,xn,Tn,Ve,de,Xe;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=o,i.opacityToHex=m,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2),t(89),t(125),t(136),t(138),t(141),t(143),t(145),t(147),t(166);var e=t(1),n=t(168);function o(Wt,k,Z){for(const vt of Z)k.addEventListener(vt,Wt[vt].bind(Wt))}function m(Wt){return Math.round(Math.min(255,Math.max(1,255*Wt))).toString(16).padStart(2,"0")}class w{constructor(){ht(this,A,0)}getId(){return`${e.AnnotationEditorPrefix}${he(this,A)._++}`}}A=new WeakMap;const D=class D{constructor(){ht(this,s);ht(this,a,(0,e.getUuid)());ht(this,c,0);ht(this,l,null)}static get _isSVGFittingCanvas(){const k='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',vt=new OffscreenCanvas(1,3).getContext("2d"),Ct=new Image;Ct.src=k;const Rt=Ct.decode().then(()=>(vt.drawImage(Ct,0,0,1,1,0,0,1,3),new Uint32Array(vt.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",Rt)}async getFromFile(k){const{lastModified:Z,name:vt,size:Ct,type:Rt}=k;return q(this,s,We).call(this,`${Z}_${vt}_${Ct}_${Rt}`,k)}async getFromUrl(k){return q(this,s,We).call(this,k,k)}async getFromId(k){r(this,l)||ut(this,l,new Map);const Z=r(this,l).get(k);return Z?Z.bitmap?(Z.refCounter+=1,Z):Z.file?this.getFromFile(Z.file):this.getFromUrl(Z.url):null}getSvgUrl(k){const Z=r(this,l).get(k);return Z!=null&&Z.isSvg?Z.svgUrl:null}deleteId(k){r(this,l)||ut(this,l,new Map);const Z=r(this,l).get(k);Z&&(Z.refCounter-=1,Z.refCounter===0&&(Z.bitmap=null))}isValidId(k){return k.startsWith(`image_${r(this,a)}_`)}};a=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakSet,We=async function(k,Z){r(this,l)||ut(this,l,new Map);let vt=r(this,l).get(k);if(vt===null)return null;if(vt!=null&&vt.bitmap)return vt.refCounter+=1,vt;try{vt||(vt={bitmap:null,id:`image_${r(this,a)}_${he(this,c)._++}`,refCounter:0,isSvg:!1});let Ct;if(typeof Z=="string"){vt.url=Z;const Rt=await fetch(Z);if(!Rt.ok)throw new Error(Rt.statusText);Ct=await Rt.blob()}else Ct=vt.file=Z;if(Ct.type==="image/svg+xml"){const Rt=D._isSVGFittingCanvas,Pt=new FileReader,O=new Image,B=new Promise((Q,j)=>{O.onload=()=>{vt.bitmap=O,vt.isSvg=!0,Q()},Pt.onload=async()=>{const pt=vt.svgUrl=Pt.result;O.src=await Rt?`${pt}#svgView(preserveAspectRatio(none))`:pt},O.onerror=Pt.onerror=j});Pt.readAsDataURL(Ct),await B}else vt.bitmap=await createImageBitmap(Ct);vt.refCounter=1}catch(Ct){console.error(Ct),vt=null}return r(this,l).set(k,vt),vt&&r(this,l).set(vt.id,vt),vt};let T=D;class y{constructor(){ht(this,P,[]);ht(this,h,!1);ht(this,g);ht(this,u,-1);let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;ut(this,g,k)}add(k){let{cmd:Z,undo:vt,mustExec:Ct,type:Rt=NaN,overwriteIfSameType:Pt=!1,keepUndo:O=!1}=k;if(Ct&&Z(),r(this,h))return;const B={cmd:Z,undo:vt,type:Rt};if(r(this,u)===-1){r(this,P).length>0&&(r(this,P).length=0),ut(this,u,0),r(this,P).push(B);return}if(Pt&&r(this,P)[r(this,u)].type===Rt){O&&(B.undo=r(this,P)[r(this,u)].undo),r(this,P)[r(this,u)]=B;return}const Q=r(this,u)+1;Q===r(this,g)?r(this,P).splice(0,1):(ut(this,u,Q),Q<r(this,P).length&&r(this,P).splice(Q)),r(this,P).push(B)}undo(){r(this,u)!==-1&&(ut(this,h,!0),r(this,P)[r(this,u)].undo(),ut(this,h,!1),ut(this,u,r(this,u)-1))}redo(){r(this,u)<r(this,P).length-1&&(ut(this,u,r(this,u)+1),ut(this,h,!0),r(this,P)[r(this,u)].cmd(),ut(this,h,!1))}hasSomethingToUndo(){return r(this,u)!==-1}hasSomethingToRedo(){return r(this,u)<r(this,P).length-1}destroy(){ut(this,P,null)}}P=new WeakMap,h=new WeakMap,g=new WeakMap,u=new WeakMap,i.CommandManager=y;class f{constructor(k){ht(this,S);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Z}=e.FeatureTest.platform;for(const[vt,Ct,Rt={}]of k)for(const Pt of vt){const O=Pt.startsWith("mac+");Z&&O?(this.callbacks.set(Pt.slice(4),{callback:Ct,options:Rt}),this.allKeys.add(Pt.split("+").at(-1))):!Z&&!O&&(this.callbacks.set(Pt,{callback:Ct,options:Rt}),this.allKeys.add(Pt.split("+").at(-1)))}}exec(k,Z){if(!this.allKeys.has(Z.key))return;const vt=this.callbacks.get(q(this,S,Sn).call(this,Z));if(!vt)return;const{callback:Ct,options:{bubbles:Rt=!1,args:Pt=[],checker:O=null}}=vt;O&&!O(k,Z)||(Ct.bind(k,...Pt)(),Rt||(Z.stopPropagation(),Z.preventDefault()))}}S=new WeakSet,Sn=function(k){k.altKey&&this.buffer.push("alt"),k.ctrlKey&&this.buffer.push("ctrl"),k.metaKey&&this.buffer.push("meta"),k.shiftKey&&this.buffer.push("shift"),this.buffer.push(k.key);const Z=this.buffer.join("+");return this.buffer.length=0,Z},i.KeyboardManager=f;const z=class z{get _colors(){const k=new Map([["CanvasText",null],["Canvas",null]]);return(0,n.getColorValues)(k),(0,e.shadow)(this,"_colors",k)}convert(k){const Z=(0,n.getRGB)(k);if(!window.matchMedia("(forced-colors: active)").matches)return Z;for(const[vt,Ct]of this._colors)if(Ct.every((Rt,Pt)=>Rt===Z[Pt]))return z._colorsMapping.get(vt);return Z}getHexCode(k){const Z=this._colors.get(k);return Z?e.Util.makeHexColor(...Z):k}};Qt(z,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let R=z;i.ColorManager=R;const It=class It{constructor(k,Z,vt,Ct,Rt,Pt){ht(this,at);ht(this,b,null);ht(this,L,new Map);ht(this,G,new Map);ht(this,st,null);ht(this,_,null);ht(this,J,new y);ht(this,K,0);ht(this,it,new Set);ht(this,W,null);ht(this,Y,null);ht(this,rt,new Set);ht(this,$,null);ht(this,d,new w);ht(this,p,!1);ht(this,M,!1);ht(this,N,null);ht(this,F,e.AnnotationEditorType.NONE);ht(this,I,new Set);ht(this,X,null);ht(this,H,this.blur.bind(this));ht(this,et,this.focus.bind(this));ht(this,dt,this.copy.bind(this));ht(this,gt,this.cut.bind(this));ht(this,At,this.paste.bind(this));ht(this,bt,this.keydown.bind(this));ht(this,nt,this.onEditingAction.bind(this));ht(this,ft,this.onPageChanging.bind(this));ht(this,U,this.onScaleChanging.bind(this));ht(this,V,this.onRotationChanging.bind(this));ht(this,tt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ht(this,lt,[0,0]);ht(this,mt,null);ht(this,xt,null);ht(this,Et,null);ut(this,xt,k),ut(this,Et,Z),ut(this,st,vt),this._eventBus=Ct,this._eventBus._on("editingaction",r(this,nt)),this._eventBus._on("pagechanging",r(this,ft)),this._eventBus._on("scalechanging",r(this,U)),this._eventBus._on("rotationchanging",r(this,V)),ut(this,_,Rt.annotationStorage),ut(this,$,Rt.filterFactory),ut(this,X,Pt),this.viewParameters={realScale:n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const k=It.prototype,Z=Rt=>{const{activeElement:Pt}=document;return Pt&&r(Rt,xt).contains(Pt)&&Rt.hasSomethingToControl()},vt=this.TRANSLATE_SMALL,Ct=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],k.selectAll],[["ctrl+z","mac+meta+z"],k.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],k.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],k.delete],[["Escape","mac+Escape"],k.unselectAll],[["ArrowLeft","mac+ArrowLeft"],k.translateSelectedEditors,{args:[-vt,0],checker:Z}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],k.translateSelectedEditors,{args:[-Ct,0],checker:Z}],[["ArrowRight","mac+ArrowRight"],k.translateSelectedEditors,{args:[vt,0],checker:Z}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],k.translateSelectedEditors,{args:[Ct,0],checker:Z}],[["ArrowUp","mac+ArrowUp"],k.translateSelectedEditors,{args:[0,-vt],checker:Z}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],k.translateSelectedEditors,{args:[0,-Ct],checker:Z}],[["ArrowDown","mac+ArrowDown"],k.translateSelectedEditors,{args:[0,vt],checker:Z}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],k.translateSelectedEditors,{args:[0,Ct],checker:Z}]]))}destroy(){q(this,at,Ae).call(this),q(this,at,He).call(this),this._eventBus._off("editingaction",r(this,nt)),this._eventBus._off("pagechanging",r(this,ft)),this._eventBus._off("scalechanging",r(this,U)),this._eventBus._off("rotationchanging",r(this,V));for(const k of r(this,G).values())k.destroy();r(this,G).clear(),r(this,L).clear(),r(this,rt).clear(),ut(this,b,null),r(this,I).clear(),r(this,J).destroy(),r(this,st).destroy()}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",r(this,X)?r(this,$).addHCMFilter(r(this,X).foreground,r(this,X).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(r(this,xt)).direction)}editAltText(k){var Z;(Z=r(this,st))==null||Z.editAltText(this,k)}onPageChanging(k){let{pageNumber:Z}=k;ut(this,K,Z-1)}focusMainContainer(){r(this,xt).focus()}findParent(k,Z){for(const vt of r(this,G).values()){const{x:Ct,y:Rt,width:Pt,height:O}=vt.div.getBoundingClientRect();if(k>=Ct&&k<=Ct+Pt&&Z>=Rt&&Z<=Rt+O)return vt}return null}disableUserSelect(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;r(this,Et).classList.toggle("noUserSelect",k)}addShouldRescale(k){r(this,rt).add(k)}removeShouldRescale(k){r(this,rt).delete(k)}onScaleChanging(k){let{scale:Z}=k;this.commitOrRemove(),this.viewParameters.realScale=Z*n.PixelsPerInch.PDF_TO_CSS_UNITS;for(const vt of r(this,rt))vt.onScaleChanging()}onRotationChanging(k){let{pagesRotation:Z}=k;this.commitOrRemove(),this.viewParameters.rotation=Z}addToAnnotationStorage(k){!k.isEmpty()&&r(this,_)&&!r(this,_).has(k.id)&&r(this,_).setValue(k.id,k)}blur(){if(!this.hasSelection)return;const{activeElement:k}=document;for(const Z of r(this,I))if(Z.div.contains(k)){ut(this,N,[Z,k]),Z._focusEventsAllowed=!1;break}}focus(){if(!r(this,N))return;const[k,Z]=r(this,N);ut(this,N,null),Z.addEventListener("focusin",()=>{k._focusEventsAllowed=!0},{once:!0}),Z.focus()}addEditListeners(){q(this,at,$e).call(this),q(this,at,ze).call(this)}removeEditListeners(){q(this,at,Ae).call(this),q(this,at,Ge).call(this)}copy(k){var vt;if(k.preventDefault(),(vt=r(this,b))==null||vt.commitOrRemove(),!this.hasSelection)return;const Z=[];for(const Ct of r(this,I)){const Rt=Ct.serialize(!0);Rt&&Z.push(Rt)}Z.length!==0&&k.clipboardData.setData("application/pdfjs",JSON.stringify(Z))}cut(k){this.copy(k),this.delete()}paste(k){k.preventDefault();const{clipboardData:Z}=k;for(const Rt of Z.items)for(const Pt of r(this,Y))if(Pt.isHandlingMimeForPasting(Rt.type)){Pt.paste(Rt,this.currentLayer);return}let vt=Z.getData("application/pdfjs");if(!vt)return;try{vt=JSON.parse(vt)}catch(Rt){(0,e.warn)(`paste: "${Rt.message}".`);return}if(!Array.isArray(vt))return;this.unselectAll();const Ct=this.currentLayer;try{const Rt=[];for(const B of vt){const Q=Ct.deserialize(B);if(!Q)return;Rt.push(Q)}const Pt=()=>{for(const B of Rt)q(this,at,Ve).call(this,B);q(this,at,Xe).call(this,Rt)},O=()=>{for(const B of Rt)B.remove()};this.addCommands({cmd:Pt,undo:O,mustExec:!0})}catch(Rt){(0,e.warn)(`paste: "${Rt.message}".`)}}keydown(k){var Z;(Z=this.getActive())!=null&&Z.shouldGetKeyboardEvents()||It._keyboardManager.exec(this,k)}onEditingAction(k){["undo","redo","delete","selectAll"].includes(k.name)&&this[k.name]()}setEditingState(k){k?(q(this,at,En).call(this),q(this,at,$e).call(this),q(this,at,ze).call(this),q(this,at,qt).call(this,{isEditing:r(this,F)!==e.AnnotationEditorType.NONE,isEmpty:q(this,at,de).call(this),hasSomethingToUndo:r(this,J).hasSomethingToUndo(),hasSomethingToRedo:r(this,J).hasSomethingToRedo(),hasSelectedEditor:!1})):(q(this,at,He).call(this),q(this,at,Ae).call(this),q(this,at,Ge).call(this),q(this,at,qt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(k){if(!r(this,Y)){ut(this,Y,k);for(const Z of r(this,Y))q(this,at,ue).call(this,Z.defaultPropertiesToUpdate)}}getId(){return r(this,d).getId()}get currentLayer(){return r(this,G).get(r(this,K))}getLayer(k){return r(this,G).get(k)}get currentPageIndex(){return r(this,K)}addLayer(k){r(this,G).set(k.pageIndex,k),r(this,p)?k.enable():k.disable()}removeLayer(k){r(this,G).delete(k.pageIndex)}updateMode(k){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r(this,F)!==k){if(ut(this,F,k),k===e.AnnotationEditorType.NONE){this.setEditingState(!1),q(this,at,Tn).call(this);return}this.setEditingState(!0),q(this,at,xn).call(this),this.unselectAll();for(const vt of r(this,G).values())vt.updateMode(k);if(Z){for(const vt of r(this,L).values())if(vt.annotationElementId===Z){this.setSelected(vt),vt.enterInEditMode();break}}}}updateToolbar(k){k!==r(this,F)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:k})}updateParams(k,Z){if(r(this,Y)){if(k===e.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(k);return}for(const vt of r(this,I))vt.updateParams(k,Z);for(const vt of r(this,Y))vt.updateDefaultParams(k,Z)}}enableWaiting(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(r(this,M)!==k){ut(this,M,k);for(const Z of r(this,G).values())k?Z.disableClick():Z.enableClick(),Z.div.classList.toggle("waiting",k)}}getEditors(k){const Z=[];for(const vt of r(this,L).values())vt.pageIndex===k&&Z.push(vt);return Z}getEditor(k){return r(this,L).get(k)}addEditor(k){r(this,L).set(k.id,k)}removeEditor(k){var Z;r(this,L).delete(k.id),this.unselect(k),(!k.annotationElementId||!r(this,it).has(k.annotationElementId))&&((Z=r(this,_))==null||Z.remove(k.id))}addDeletedAnnotationElement(k){r(this,it).add(k.annotationElementId),k.deleted=!0}isDeletedAnnotationElement(k){return r(this,it).has(k)}removeDeletedAnnotationElement(k){r(this,it).delete(k.annotationElementId),k.deleted=!1}setActiveEditor(k){r(this,b)!==k&&(ut(this,b,k),k&&q(this,at,ue).call(this,k.propertiesToUpdate))}toggleSelected(k){if(r(this,I).has(k)){r(this,I).delete(k),k.unselect(),q(this,at,qt).call(this,{hasSelectedEditor:this.hasSelection});return}r(this,I).add(k),k.select(),q(this,at,ue).call(this,k.propertiesToUpdate),q(this,at,qt).call(this,{hasSelectedEditor:!0})}setSelected(k){for(const Z of r(this,I))Z!==k&&Z.unselect();r(this,I).clear(),r(this,I).add(k),k.select(),q(this,at,ue).call(this,k.propertiesToUpdate),q(this,at,qt).call(this,{hasSelectedEditor:!0})}isSelected(k){return r(this,I).has(k)}unselect(k){k.unselect(),r(this,I).delete(k),q(this,at,qt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return r(this,I).size!==0}undo(){r(this,J).undo(),q(this,at,qt).call(this,{hasSomethingToUndo:r(this,J).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:q(this,at,de).call(this)})}redo(){r(this,J).redo(),q(this,at,qt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:r(this,J).hasSomethingToRedo(),isEmpty:q(this,at,de).call(this)})}addCommands(k){r(this,J).add(k),q(this,at,qt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:q(this,at,de).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const k=[...r(this,I)],Z=()=>{for(const Ct of k)Ct.remove()},vt=()=>{for(const Ct of k)q(this,at,Ve).call(this,Ct)};this.addCommands({cmd:Z,undo:vt,mustExec:!0})}commitOrRemove(){var k;(k=r(this,b))==null||k.commitOrRemove()}hasSomethingToControl(){return r(this,b)||this.hasSelection}selectAll(){for(const k of r(this,I))k.commit();q(this,at,Xe).call(this,r(this,L).values())}unselectAll(){if(r(this,b)){r(this,b).commitOrRemove();return}if(this.hasSelection){for(const k of r(this,I))k.unselect();r(this,I).clear(),q(this,at,qt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(k,Z){if((arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1)||this.commitOrRemove(),!this.hasSelection)return;r(this,lt)[0]+=k,r(this,lt)[1]+=Z;const[Ct,Rt]=r(this,lt),Pt=[...r(this,I)],O=1e3;r(this,mt)&&clearTimeout(r(this,mt)),ut(this,mt,setTimeout(()=>{ut(this,mt,null),r(this,lt)[0]=r(this,lt)[1]=0,this.addCommands({cmd:()=>{for(const B of Pt)r(this,L).has(B.id)&&B.translateInPage(Ct,Rt)},undo:()=>{for(const B of Pt)r(this,L).has(B.id)&&B.translateInPage(-Ct,-Rt)},mustExec:!1})},O));for(const B of Pt)B.translateInPage(k,Z)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ut(this,W,new Map);for(const k of r(this,I))r(this,W).set(k,{savedX:k.x,savedY:k.y,savedPageIndex:k.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!r(this,W))return!1;this.disableUserSelect(!1);const k=r(this,W);ut(this,W,null);let Z=!1;for(const[{x:Ct,y:Rt,pageIndex:Pt},O]of k)O.newX=Ct,O.newY=Rt,O.newPageIndex=Pt,Z||(Z=Ct!==O.savedX||Rt!==O.savedY||Pt!==O.savedPageIndex);if(!Z)return!1;const vt=(Ct,Rt,Pt,O)=>{if(r(this,L).has(Ct.id)){const B=r(this,G).get(O);B?Ct._setParentAndPosition(B,Rt,Pt):(Ct.pageIndex=O,Ct.x=Rt,Ct.y=Pt)}};return this.addCommands({cmd:()=>{for(const[Ct,{newX:Rt,newY:Pt,newPageIndex:O}]of k)vt(Ct,Rt,Pt,O)},undo:()=>{for(const[Ct,{savedX:Rt,savedY:Pt,savedPageIndex:O}]of k)vt(Ct,Rt,Pt,O)},mustExec:!0}),!0}dragSelectedEditors(k,Z){if(r(this,W))for(const vt of r(this,W).keys())vt.drag(k,Z)}rebuild(k){if(k.parent===null){const Z=this.getLayer(k.pageIndex);Z?(Z.changeParent(k),Z.addOrRebuild(k)):(this.addEditor(k),this.addToAnnotationStorage(k),k.rebuild())}else k.parent.addOrRebuild(k)}isActive(k){return r(this,b)===k}getActive(){return r(this,b)}getMode(){return r(this,F)}get imageManager(){return(0,e.shadow)(this,"imageManager",new T)}};b=new WeakMap,L=new WeakMap,G=new WeakMap,st=new WeakMap,_=new WeakMap,J=new WeakMap,K=new WeakMap,it=new WeakMap,W=new WeakMap,Y=new WeakMap,rt=new WeakMap,$=new WeakMap,d=new WeakMap,p=new WeakMap,M=new WeakMap,N=new WeakMap,F=new WeakMap,I=new WeakMap,X=new WeakMap,H=new WeakMap,et=new WeakMap,dt=new WeakMap,gt=new WeakMap,At=new WeakMap,bt=new WeakMap,nt=new WeakMap,ft=new WeakMap,U=new WeakMap,V=new WeakMap,tt=new WeakMap,lt=new WeakMap,mt=new WeakMap,xt=new WeakMap,Et=new WeakMap,at=new WeakSet,En=function(){window.addEventListener("focus",r(this,et)),window.addEventListener("blur",r(this,H))},He=function(){window.removeEventListener("focus",r(this,et)),window.removeEventListener("blur",r(this,H))},$e=function(){window.addEventListener("keydown",r(this,bt),{capture:!0})},Ae=function(){window.removeEventListener("keydown",r(this,bt),{capture:!0})},ze=function(){document.addEventListener("copy",r(this,dt)),document.addEventListener("cut",r(this,gt)),document.addEventListener("paste",r(this,At))},Ge=function(){document.removeEventListener("copy",r(this,dt)),document.removeEventListener("cut",r(this,gt)),document.removeEventListener("paste",r(this,At))},qt=function(k){Object.entries(k).some(vt=>{let[Ct,Rt]=vt;return r(this,tt)[Ct]!==Rt})&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(r(this,tt),k)})},ue=function(k){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:k})},xn=function(){if(!r(this,p)){ut(this,p,!0);for(const k of r(this,G).values())k.enable()}},Tn=function(){if(this.unselectAll(),r(this,p)){ut(this,p,!1);for(const k of r(this,G).values())k.disable()}},Ve=function(k){const Z=r(this,G).get(k.pageIndex);Z?Z.addOrRebuild(k):this.addEditor(k)},de=function(){if(r(this,L).size===0)return!0;if(r(this,L).size===1)for(const k of r(this,L).values())return k.isEmpty();return!1},Xe=function(k){r(this,I).clear();for(const Z of k)Z.isEmpty()||(r(this,I).add(Z),Z.select());q(this,at,qt).call(this,{hasSelectedEditor:!0})},Qt(It,"TRANSLATE_SMALL",1),Qt(It,"TRANSLATE_BIG",10);let E=It;i.AnnotationEditorUIManager=E},(C,i,t)=>{var e=t(3),n=t(6),o=t(4),m=t(24),w=t(14),T=t(8),y=t(21),f=t(20),R=t(91),E=t(39),A=t(77),a=t(64),c=t(159),l=t(7),s=t(167),v=t(27),D=o.JSON,P=o.Number,h=o.SyntaxError,g=D&&D.parse,u=m("Object","keys"),S=Object.getOwnPropertyDescriptor,x=w("".charAt),z=w("".slice),b=w(/./.exec),L=w([].push),G=/^\d$/,st=/^[1-9]$/,_=/^(?:-|\d)$/,J=/^[\t\n\r ]$/,K=0,it=1,W=function(N,F){N=A(N);var I=new d(N,0),X=I.parse(),H=X.value,et=I.skip(J,X.end);if(et<N.length)throw h('Unexpected extra character: "'+x(N,et)+'" after the parsed data at: '+et);return y(F)?Y({"":H},"",F,X):H},Y=function(N,F,I,X){var H=N[F],et=X&&H===X.value,dt=et&&typeof X.source=="string"?{source:X.source}:{},gt,At,bt,nt,ft;if(f(H)){var U=R(H),V=et?X.nodes:U?[]:{};if(U)for(gt=V.length,bt=a(H),nt=0;nt<bt;nt++)rt(H,nt,Y(H,""+nt,I,nt<gt?V[nt]:void 0));else for(At=u(H),bt=a(At),nt=0;nt<bt;nt++)ft=At[nt],rt(H,ft,Y(H,ft,I,E(V,ft)?V[ft]:void 0))}return T(I,N,F,H,dt)},rt=function(N,F,I){if(n){var X=S(N,F);if(X&&!X.configurable)return}I===void 0?delete N[F]:c(N,F,I)},$=function(N,F,I,X){this.value=N,this.end=F,this.source=I,this.nodes=X},d=function(N,F){this.source=N,this.index=F};d.prototype={fork:function(N){return new d(this.source,N)},parse:function(){var N=this.source,F=this.skip(J,this.index),I=this.fork(F),X=x(N,F);if(b(_,X))return I.number();switch(X){case"{":return I.object();case"[":return I.array();case'"':return I.string();case"t":return I.keyword(!0);case"f":return I.keyword(!1);case"n":return I.keyword(null)}throw h('Unexpected character: "'+X+'" at: '+F)},node:function(N,F,I,X,H){return new $(F,X,N?null:z(this.source,I,X),H)},object:function(){for(var N=this.source,F=this.index+1,I=!1,X={},H={};F<N.length;){if(F=this.until(['"',"}"],F),x(N,F)==="}"&&!I){F++;break}var et=this.fork(F).string(),dt=et.value;F=et.end,F=this.until([":"],F)+1,F=this.skip(J,F),et=this.fork(F).parse(),c(H,dt,et),c(X,dt,et.value),F=this.until([",","}"],et.end);var gt=x(N,F);if(gt===",")I=!0,F++;else if(gt==="}"){F++;break}}return this.node(it,X,this.index,F,H)},array:function(){for(var N=this.source,F=this.index+1,I=!1,X=[],H=[];F<N.length;){if(F=this.skip(J,F),x(N,F)==="]"&&!I){F++;break}var et=this.fork(F).parse();if(L(H,et),L(X,et.value),F=this.until([",","]"],et.end),x(N,F)===",")I=!0,F++;else if(x(N,F)==="]"){F++;break}}return this.node(it,X,this.index,F,H)},string:function(){var N=this.index,F=s(this.source,this.index+1);return this.node(K,F.value,N,F.end)},number:function(){var N=this.source,F=this.index,I=F;if(x(N,I)==="-"&&I++,x(N,I)==="0")I++;else if(b(st,x(N,I)))I=this.skip(G,++I);else throw h("Failed to parse number at: "+I);if(x(N,I)==="."&&(I=this.skip(G,++I)),x(N,I)==="e"||x(N,I)==="E"){I++,(x(N,I)==="+"||x(N,I)==="-")&&I++;var X=I;if(I=this.skip(G,I),X===I)throw h("Failed to parse number's exponent value at: "+I)}return this.node(K,P(z(N,F,I)),F,I)},keyword:function(N){var F=""+N,I=this.index,X=I+F.length;if(z(this.source,I,X)!==F)throw h("Failed to parse value at: "+I);return this.node(K,N,I,X)},skip:function(N,F){for(var I=this.source;F<I.length&&b(N,x(I,F));F++);return F},until:function(N,F){F=this.skip(J,F);for(var I=x(this.source,F),X=0;X<N.length;X++)if(N[X]===I)return F;throw h('Unexpected character: "'+I+'" at: '+F)}};var p=l(function(){var N="9007199254740993",F;return g(N,function(I,X,H){F=H.source}),F!==N}),M=v&&!l(function(){return 1/g("-0 	")!==-1/0});e({target:"JSON",stat:!0,forced:p},{parse:function(F,I){return M&&!y(I)?g(F):W(F,I)}})},(C,i,t)=>{var e=t(14),n=t(39),o=SyntaxError,m=parseInt,w=String.fromCharCode,T=e("".charAt),y=e("".slice),f=e(/./.exec),R={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},E=/^[\da-f]{4}$/i,A=/^[\u0000-\u001F]$/;C.exports=function(a,c){for(var l=!0,s="";c<a.length;){var v=T(a,c);if(v==="\\"){var D=y(a,c,c+2);if(n(R,D))s+=R[D],c+=2;else if(D==="\\u"){c+=2;var P=y(a,c,c+4);if(!f(E,P))throw o("Bad Unicode escape at: "+c);s+=w(m(P,16)),c+=4}else throw o('Unknown escape sequence: "'+D+'"')}else if(v==='"'){l=!1,c++;break}else{if(f(A,v))throw o("Bad control character in string literal at: "+c);s+=v,c++}}if(l)throw o("Unterminated string at: "+c);return{value:s,end:c}}},(C,i,t)=>{var K,it,W,Y,rt,$,d,p,M,N,F,I,ae,oe,Ye,Se,Ee,fe,pe;Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMFilterFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=void 0,i.deprecated=u,i.getColorValues=L,i.getCurrentTransform=G,i.getCurrentTransformInverse=st,i.getFilenameFromUrl=s,i.getPdfFilenameFromUrl=v,i.getRGB=b,i.getXfaPageViewport=z,i.isDataScheme=c,i.isPdfFile=l,i.isValidFetchUrl=P,i.loadScript=g,i.noContextMenu=h,i.setLayerDimensions=_,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89),t(84),t(86),t(87);var e=t(169),n=t(1);const o="http://www.w3.org/2000/svg",J=class J{};Qt(J,"CSS",96),Qt(J,"PDF",72),Qt(J,"PDF_TO_CSS_UNITS",J.CSS/J.PDF);let m=J;i.PixelsPerInch=m;class w extends e.BaseFilterFactory{constructor(){let{docId:U,ownerDocument:V=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();ht(this,I);ht(this,K);ht(this,it);ht(this,W);ht(this,Y);ht(this,rt);ht(this,$);ht(this,d);ht(this,p);ht(this,M);ht(this,N);ht(this,F,0);ut(this,W,U),ut(this,Y,V)}addFilter(U){if(!U)return"none";let V=r(this,I,ae).get(U);if(V)return V;let tt,lt,mt,xt;if(U.length===1){const wt=U[0],$t=new Array(256);for(let Lt=0;Lt<256;Lt++)$t[Lt]=wt[Lt]/255;xt=tt=lt=mt=$t.join(",")}else{const[wt,$t,Lt]=U,Xt=new Array(256),Ft=new Array(256),Bt=new Array(256);for(let Gt=0;Gt<256;Gt++)Xt[Gt]=wt[Gt]/255,Ft[Gt]=$t[Gt]/255,Bt[Gt]=Lt[Gt]/255;tt=Xt.join(","),lt=Ft.join(","),mt=Bt.join(","),xt=`${tt}${lt}${mt}`}if(V=r(this,I,ae).get(xt),V)return r(this,I,ae).set(U,V),V;const Et=`g_${r(this,W)}_transfer_map_${he(this,F)._++}`,at=`url(#${Et})`;r(this,I,ae).set(U,at),r(this,I,ae).set(xt,at);const kt=q(this,I,Se).call(this,Et);return q(this,I,fe).call(this,tt,lt,mt,kt),at}addHCMFilter(U,V){var $t;const tt=`${U}-${V}`;if(r(this,$)===tt)return r(this,d);if(ut(this,$,tt),ut(this,d,"none"),($t=r(this,rt))==null||$t.remove(),!U||!V)return r(this,d);const lt=q(this,I,pe).call(this,U);U=n.Util.makeHexColor(...lt);const mt=q(this,I,pe).call(this,V);if(V=n.Util.makeHexColor(...mt),r(this,I,oe).style.color="",U==="#000000"&&V==="#ffffff"||U===V)return r(this,d);const xt=new Array(256);for(let Lt=0;Lt<=255;Lt++){const Xt=Lt/255;xt[Lt]=Xt<=.03928?Xt/12.92:((Xt+.055)/1.055)**2.4}const Et=xt.join(","),at=`g_${r(this,W)}_hcm_filter`,kt=ut(this,p,q(this,I,Se).call(this,at));q(this,I,fe).call(this,Et,Et,Et,kt),q(this,I,Ye).call(this,kt);const wt=(Lt,Xt)=>{const Ft=lt[Lt]/255,Bt=mt[Lt]/255,Gt=new Array(Xt+1);for(let Kt=0;Kt<=Xt;Kt++)Gt[Kt]=Ft+Kt/Xt*(Bt-Ft);return Gt.join(",")};return q(this,I,fe).call(this,wt(0,5),wt(1,5),wt(2,5),kt),ut(this,d,`url(#${at})`),r(this,d)}addHighlightHCMFilter(U,V,tt,lt){var Bt;const mt=`${U}-${V}-${tt}-${lt}`;if(r(this,M)===mt)return r(this,N);if(ut(this,M,mt),ut(this,N,"none"),(Bt=r(this,p))==null||Bt.remove(),!U||!V)return r(this,N);const[xt,Et]=[U,V].map(q(this,I,pe).bind(this));let at=Math.round(.2126*xt[0]+.7152*xt[1]+.0722*xt[2]),kt=Math.round(.2126*Et[0]+.7152*Et[1]+.0722*Et[2]),[wt,$t]=[tt,lt].map(q(this,I,pe).bind(this));kt<at&&([at,kt,wt,$t]=[kt,at,$t,wt]),r(this,I,oe).style.color="";const Lt=(Gt,Kt,Yt)=>{const Tt=new Array(256),ot=(kt-at)/Yt,ct=Gt/255,It=(Kt-Gt)/(255*Yt);let Wt=0;for(let k=0;k<=Yt;k++){const Z=Math.round(at+k*ot),vt=ct+k*It;for(let Ct=Wt;Ct<=Z;Ct++)Tt[Ct]=vt;Wt=Z+1}for(let k=Wt;k<256;k++)Tt[k]=Tt[Wt-1];return Tt.join(",")},Xt=`g_${r(this,W)}_hcm_highlight_filter`,Ft=ut(this,p,q(this,I,Se).call(this,Xt));return q(this,I,Ye).call(this,Ft),q(this,I,fe).call(this,Lt(wt[0],$t[0],5),Lt(wt[1],$t[1],5),Lt(wt[2],$t[2],5),Ft),ut(this,N,`url(#${Xt})`),r(this,N)}destroy(){arguments.length>0&&arguments[0]!==void 0&&arguments[0]&&(r(this,d)||r(this,N))||(r(this,it)&&(r(this,it).parentNode.parentNode.remove(),ut(this,it,null)),r(this,K)&&(r(this,K).clear(),ut(this,K,null)),ut(this,F,0))}}K=new WeakMap,it=new WeakMap,W=new WeakMap,Y=new WeakMap,rt=new WeakMap,$=new WeakMap,d=new WeakMap,p=new WeakMap,M=new WeakMap,N=new WeakMap,F=new WeakMap,I=new WeakSet,ae=function(){return r(this,K)||ut(this,K,new Map)},oe=function(){if(!r(this,it)){const U=r(this,Y).createElement("div"),{style:V}=U;V.visibility="hidden",V.contain="strict",V.width=V.height=0,V.position="absolute",V.top=V.left=0,V.zIndex=-1;const tt=r(this,Y).createElementNS(o,"svg");tt.setAttribute("width",0),tt.setAttribute("height",0),ut(this,it,r(this,Y).createElementNS(o,"defs")),U.append(tt),tt.append(r(this,it)),r(this,Y).body.append(U)}return r(this,it)},Ye=function(U){const V=r(this,Y).createElementNS(o,"feColorMatrix");V.setAttribute("type","matrix"),V.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),U.append(V)},Se=function(U){const V=r(this,Y).createElementNS(o,"filter");return V.setAttribute("color-interpolation-filters","sRGB"),V.setAttribute("id",U),r(this,I,oe).append(V),V},Ee=function(U,V,tt){const lt=r(this,Y).createElementNS(o,V);lt.setAttribute("type","discrete"),lt.setAttribute("tableValues",tt),U.append(lt)},fe=function(U,V,tt,lt){const mt=r(this,Y).createElementNS(o,"feComponentTransfer");lt.append(mt),q(this,I,Ee).call(this,mt,"feFuncR",U),q(this,I,Ee).call(this,mt,"feFuncG",V),q(this,I,Ee).call(this,mt,"feFuncB",tt)},pe=function(U){return r(this,I,oe).style.color=U,b(getComputedStyle(r(this,I,oe)).getPropertyValue("color"))},i.DOMFilterFactory=w;class T extends e.BaseCanvasFactory{constructor(){let{ownerDocument:ft=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=ft}_createCanvas(ft,U){const V=this._document.createElement("canvas");return V.width=ft,V.height=U,V}}i.DOMCanvasFactory=T;async function y(nt){let ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(P(nt,document.baseURI)){const U=await fetch(nt);if(!U.ok)throw new Error(U.statusText);return ft?new Uint8Array(await U.arrayBuffer()):(0,n.stringToBytes)(await U.text())}return new Promise((U,V)=>{const tt=new XMLHttpRequest;tt.open("GET",nt,!0),ft&&(tt.responseType="arraybuffer"),tt.onreadystatechange=()=>{if(tt.readyState===XMLHttpRequest.DONE){if(tt.status===200||tt.status===0){let lt;if(ft&&tt.response?lt=new Uint8Array(tt.response):!ft&&tt.responseText&&(lt=(0,n.stringToBytes)(tt.responseText)),lt){U(lt);return}}V(new Error(tt.statusText))}},tt.send(null)})}class f extends e.BaseCMapReaderFactory{_fetchData(ft,U){return y(ft,this.isCompressed).then(V=>({cMapData:V,compressionType:U}))}}i.DOMCMapReaderFactory=f;class R extends e.BaseStandardFontDataFactory{_fetchData(ft){return y(ft,!0)}}i.DOMStandardFontDataFactory=R;class E extends e.BaseSVGFactory{_createSVG(ft){return document.createElementNS(o,ft)}}i.DOMSVGFactory=E;class A{constructor(ft){let{viewBox:U,scale:V,rotation:tt,offsetX:lt=0,offsetY:mt=0,dontFlip:xt=!1}=ft;this.viewBox=U,this.scale=V,this.rotation=tt,this.offsetX=lt,this.offsetY=mt;const Et=(U[2]+U[0])/2,at=(U[3]+U[1])/2;let kt,wt,$t,Lt;switch(tt%=360,tt<0&&(tt+=360),tt){case 180:kt=-1,wt=0,$t=0,Lt=1;break;case 90:kt=0,wt=1,$t=1,Lt=0;break;case 270:kt=0,wt=-1,$t=-1,Lt=0;break;case 0:kt=1,wt=0,$t=0,Lt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}xt&&($t=-$t,Lt=-Lt);let Xt,Ft,Bt,Gt;kt===0?(Xt=Math.abs(at-U[1])*V+lt,Ft=Math.abs(Et-U[0])*V+mt,Bt=(U[3]-U[1])*V,Gt=(U[2]-U[0])*V):(Xt=Math.abs(Et-U[0])*V+lt,Ft=Math.abs(at-U[1])*V+mt,Bt=(U[2]-U[0])*V,Gt=(U[3]-U[1])*V),this.transform=[kt*V,wt*V,$t*V,Lt*V,Xt-kt*V*Et-$t*V*at,Ft-wt*V*Et-Lt*V*at],this.width=Bt,this.height=Gt}get rawDims(){const{viewBox:ft}=this;return(0,n.shadow)(this,"rawDims",{pageWidth:ft[2]-ft[0],pageHeight:ft[3]-ft[1],pageX:ft[0],pageY:ft[1]})}clone(){let{scale:ft=this.scale,rotation:U=this.rotation,offsetX:V=this.offsetX,offsetY:tt=this.offsetY,dontFlip:lt=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new A({viewBox:this.viewBox.slice(),scale:ft,rotation:U,offsetX:V,offsetY:tt,dontFlip:lt})}convertToViewportPoint(ft,U){return n.Util.applyTransform([ft,U],this.transform)}convertToViewportRectangle(ft){const U=n.Util.applyTransform([ft[0],ft[1]],this.transform),V=n.Util.applyTransform([ft[2],ft[3]],this.transform);return[U[0],U[1],V[0],V[1]]}convertToPdfPoint(ft,U){return n.Util.applyInverseTransform([ft,U],this.transform)}}i.PageViewport=A;class a extends n.BaseException{constructor(ft){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;super(ft,"RenderingCancelledException"),this.extraDelay=U}}i.RenderingCancelledException=a;function c(nt){const ft=nt.length;let U=0;for(;U<ft&&nt[U].trim()==="";)U++;return nt.substring(U,U+5).toLowerCase()==="data:"}function l(nt){return typeof nt=="string"&&/\.pdf$/i.test(nt)}function s(nt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)||([nt]=nt.split(/[#?]/,1)),nt.substring(nt.lastIndexOf("/")+1)}function v(nt){let ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof nt!="string")return ft;if(c(nt))return(0,n.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ft;const U=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,V=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,tt=U.exec(nt);let lt=V.exec(tt[1])||V.exec(tt[2])||V.exec(tt[3]);if(lt&&(lt=lt[0],lt.includes("%")))try{lt=V.exec(decodeURIComponent(lt))[0]}catch{}return lt||ft}class D{constructor(){Qt(this,"started",Object.create(null));Qt(this,"times",[])}time(ft){ft in this.started&&(0,n.warn)(`Timer is already running for ${ft}`),this.started[ft]=Date.now()}timeEnd(ft){ft in this.started||(0,n.warn)(`Timer has not been started for ${ft}`),this.times.push({name:ft,start:this.started[ft],end:Date.now()}),delete this.started[ft]}toString(){const ft=[];let U=0;for(const{name:V}of this.times)U=Math.max(V.length,U);for(const{name:V,start:tt,end:lt}of this.times)ft.push(`${V.padEnd(U)} ${lt-tt}ms
`);return ft.join("")}}i.StatTimer=D;function P(nt,ft){try{const{protocol:U}=ft?new URL(nt,ft):new URL(nt);return U==="http:"||U==="https:"}catch{return!1}}function h(nt){nt.preventDefault()}function g(nt){let ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((U,V)=>{const tt=document.createElement("script");tt.src=nt,tt.onload=function(lt){ft&&tt.remove(),U(lt)},tt.onerror=function(){V(new Error(`Cannot load script at: ${tt.src}`))},(document.head||document.documentElement).append(tt)})}function u(nt){console.log("Deprecated API usage: "+nt)}let S;class x{static toDateObject(ft){if(!ft||typeof ft!="string")return null;S||(S=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=S.exec(ft);if(!U)return null;const V=parseInt(U[1],10);let tt=parseInt(U[2],10);tt=tt>=1&&tt<=12?tt-1:0;let lt=parseInt(U[3],10);lt=lt>=1&&lt<=31?lt:1;let mt=parseInt(U[4],10);mt=mt>=0&&mt<=23?mt:0;let xt=parseInt(U[5],10);xt=xt>=0&&xt<=59?xt:0;let Et=parseInt(U[6],10);Et=Et>=0&&Et<=59?Et:0;const at=U[7]||"Z";let kt=parseInt(U[8],10);kt=kt>=0&&kt<=23?kt:0;let wt=parseInt(U[9],10)||0;return wt=wt>=0&&wt<=59?wt:0,at==="-"?(mt+=kt,xt+=wt):at==="+"&&(mt-=kt,xt-=wt),new Date(Date.UTC(V,tt,lt,mt,xt,Et))}}i.PDFDateString=x;function z(nt,ft){let{scale:U=1,rotation:V=0}=ft;const{width:tt,height:lt}=nt.attributes.style,mt=[0,0,parseInt(tt),parseInt(lt)];return new A({viewBox:mt,scale:U,rotation:V})}function b(nt){if(nt.startsWith("#")){const ft=parseInt(nt.slice(1),16);return[(ft&16711680)>>16,(ft&65280)>>8,ft&255]}return nt.startsWith("rgb(")?nt.slice(4,-1).split(",").map(ft=>parseInt(ft)):nt.startsWith("rgba(")?nt.slice(5,-1).split(",").map(ft=>parseInt(ft)).slice(0,3):((0,n.warn)(`Not a valid color format: "${nt}"`),[0,0,0])}function L(nt){const ft=document.createElement("span");ft.style.visibility="hidden",document.body.append(ft);for(const U of nt.keys()){ft.style.color=U;const V=window.getComputedStyle(ft).color;nt.set(U,b(V))}ft.remove()}function G(nt){const{a:ft,b:U,c:V,d:tt,e:lt,f:mt}=nt.getTransform();return[ft,U,V,tt,lt,mt]}function st(nt){const{a:ft,b:U,c:V,d:tt,e:lt,f:mt}=nt.getTransform().invertSelf();return[ft,U,V,tt,lt,mt]}function _(nt,ft){let U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(ft instanceof A){const{pageWidth:tt,pageHeight:lt}=ft.rawDims,{style:mt}=nt,xt=n.FeatureTest.isCSSRoundSupported,Et=`var(--scale-factor) * ${tt}px`,at=`var(--scale-factor) * ${lt}px`,kt=xt?`round(${Et}, 1px)`:`calc(${Et})`,wt=xt?`round(${at}, 1px)`:`calc(${at})`;!U||ft.rotation%180===0?(mt.width=kt,mt.height=wt):(mt.width=wt,mt.height=kt)}V&&nt.setAttribute("data-main-rotation",ft.rotation)}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseFilterFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0,t(2);var e=t(1);class n{constructor(){this.constructor===n&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,R){return"none"}addHighlightHCMFilter(f,R,E,A){return"none"}destroy(){}}i.BaseFilterFactory=n;class o{constructor(){this.constructor===o&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,R){if(f<=0||R<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(f,R);return{canvas:E,context:E.getContext("2d")}}reset(f,R,E){if(!f.canvas)throw new Error("Canvas is not specified");if(R<=0||E<=0)throw new Error("Invalid canvas size");f.canvas.width=R,f.canvas.height=E}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,R){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=o;class m{constructor(f){let{baseUrl:R=null,isCompressed:E=!0}=f;this.constructor===m&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=R,this.isCompressed=E}async fetch(f){let{name:R}=f;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!R)throw new Error("CMap name must be specified.");const E=this.baseUrl+R+(this.isCompressed?".bcmap":""),A=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(E,A).catch(a=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${E}`)})}_fetchData(f,R){(0,e.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=m;class w{constructor(f){let{baseUrl:R=null}=f;this.constructor===w&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=R}async fetch(f){let{filename:R}=f;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!R)throw new Error("Font filename must be specified.");const E=`${this.baseUrl}${R}`;return this._fetchData(E).catch(A=>{throw new Error(`Unable to load font data at: ${E}`)})}_fetchData(f){(0,e.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=w;class T{constructor(){this.constructor===T&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,R){let E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(f<=0||R<=0)throw new Error("Invalid SVG dimensions");const A=this._createSVG("svg:svg");return A.setAttribute("version","1.1"),E||(A.setAttribute("width",`${f}px`),A.setAttribute("height",`${R}px`)),A.setAttribute("preserveAspectRatio","none"),A.setAttribute("viewBox",`0 0 ${f} ${R}`),A}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,e.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=T},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2);var e=t(1);const n=3285377520,o=4294901760,m=65535;class w{constructor(y){this.h1=y?y&4294967295:n,this.h2=y?y&4294967295:n}update(y){let f,R;if(typeof y=="string"){f=new Uint8Array(y.length*2),R=0;for(let u=0,S=y.length;u<S;u++){const x=y.charCodeAt(u);x<=255?f[R++]=x:(f[R++]=x>>>8,f[R++]=x&255)}}else if((0,e.isArrayBuffer)(y))f=y.slice(),R=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const E=R>>2,A=R-E*4,a=new Uint32Array(f.buffer,0,E);let c=0,l=0,s=this.h1,v=this.h2;const D=3432918353,P=461845907,h=D&m,g=P&m;for(let u=0;u<E;u++)u&1?(c=a[u],c=c*D&o|c*h&m,c=c<<15|c>>>17,c=c*P&o|c*g&m,s^=c,s=s<<13|s>>>19,s=s*5+3864292196):(l=a[u],l=l*D&o|l*h&m,l=l<<15|l>>>17,l=l*P&o|l*g&m,v^=l,v=v<<13|v>>>19,v=v*5+3864292196);switch(c=0,A){case 3:c^=f[E*4+2]<<16;case 2:c^=f[E*4+1]<<8;case 1:c^=f[E*4],c=c*D&o|c*h&m,c=c<<15|c>>>17,c=c*P&o|c*g&m,E&1?s^=c:v^=c}this.h1=s,this.h2=v}hexdigest(){let y=this.h1,f=this.h2;return y^=f>>>1,y=y*3981806797&o|y*36045&m,f=f*4283543511&o|((f<<16|y>>>16)*2950163797&o)>>>16,y^=f>>>1,y=y*444984403&o|y*60499&m,f=f*3301882366&o|((f<<16|y>>>16)*3120437893&o)>>>16,y^=f>>>1,(y>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}i.MurmurHash3_64=w},(C,i,t)=>{var m;Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0,t(125),t(136),t(138),t(141),t(143),t(145),t(147),t(89),t(149);var e=t(1);class n{constructor(T){ht(this,m,new Set);let{ownerDocument:y=globalThis.document,styleElement:f=null}=T;this._document=y,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(T){this.nativeFontFaces.add(T),this._document.fonts.add(T)}removeNativeFontFace(T){this.nativeFontFaces.delete(T),this._document.fonts.delete(T)}insertRule(T){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const y=this.styleElement.sheet;y.insertRule(T,y.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.clear(),r(this,m).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(T){if(!(!T||r(this,m).has(T.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:y,src:f,style:R}=T,E=new FontFace(y,f,R);this.addNativeFontFace(E);try{await E.load(),r(this,m).add(y)}catch{(0,e.warn)(`Cannot load system font: ${T.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(E)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(T){if(T.attached||T.missingFile&&!T.systemFontInfo)return;if(T.attached=!0,T.systemFontInfo){await this.loadSystemFont(T.systemFontInfo);return}if(this.isFontLoadingAPISupported){const f=T.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(R){throw(0,e.warn)(`Failed to load font '${f.family}': '${R}'.`),T.disableFontFace=!0,R}}return}const y=T.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const R=this._queueLoadingCallback(f);this._prepareFontLoadEvent(T,R)})}}get isFontLoadingAPISupported(){var y;const T=!!((y=this._document)!=null&&y.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",T)}get isSyncFontLoadingSupported(){let T=!1;return(e.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(T=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){function y(){for((0,e.assert)(!R.done,"completeRequest() cannot be called twice."),R.done=!0;f.length>0&&f[0].done;){const E=f.shift();setTimeout(E.callback,0)}}const{loadingRequests:f}=this,R={done:!1,complete:y,callback:T};return f.push(R),R}get _loadTestFont(){const T=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",T)}_prepareFontLoadEvent(T,y){function f(b,L){return b.charCodeAt(L)<<24|b.charCodeAt(L+1)<<16|b.charCodeAt(L+2)<<8|b.charCodeAt(L+3)&255}function R(b,L,G,st){const _=b.substring(0,L),J=b.substring(L+G);return _+st+J}let E,A;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let l=0;function s(b,L){if(++l>30){(0,e.warn)("Load test font never loaded."),L();return}if(c.font="30px "+b,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(s.bind(null,b,L))}const v=`lt${Date.now()}${this.loadTestFontId++}`;let D=this._loadTestFont;D=R(D,976,v.length,v);const h=16,g=1482184792;let u=f(D,h);for(E=0,A=v.length-3;E<A;E+=4)u=u-g+f(v,E)|0;E<v.length&&(u=u-g+f(v+"XXX",E)|0),D=R(D,h,4,(0,e.string32)(u));const S=`url(data:font/opentype;base64,${btoa(D)});`,x=`@font-face {font-family:"${v}";src:${S}}`;this.insertRule(x);const z=this._document.createElement("div");z.style.visibility="hidden",z.style.width=z.style.height="10px",z.style.position="absolute",z.style.top=z.style.left="0px";for(const b of[T.loadedName,v]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=b,z.append(L)}this._document.body.append(z),s(v,()=>{z.remove(),y.complete()})}}m=new WeakMap,i.FontLoader=n;class o{constructor(T,y){let{isEvalSupported:f=!0,disableFontFace:R=!1,ignoreErrors:E=!1,inspectFont:A=null}=y;this.compiledGlyphs=Object.create(null);for(const a in T)this[a]=T[a];this.isEvalSupported=f!==!1,this.disableFontFace=R===!0,this.ignoreErrors=E===!0,this._inspectFont=A}createNativeFontFace(){var y;if(!this.data||this.disableFontFace)return null;let T;if(!this.cssFontInfo)T=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(y=this._inspectFont)==null||y.call(this,this),T}createFontFaceRule(){var R;if(!this.data||this.disableFontFace)return null;const T=(0,e.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(T)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let E=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(E+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${E}src:${y}}`}return(R=this._inspectFont)==null||R.call(this,this,y),f}getPathGenerator(T,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let f;try{f=T.get(this.loadedName+"_path_"+y)}catch(R){if(!this.ignoreErrors)throw R;return(0,e.warn)(`getPathGenerator - ignoring character: "${R}".`),this.compiledGlyphs[y]=function(E,A){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const R=[];for(const E of f){const A=E.args!==void 0?E.args.join(","):"";R.push("c.",E.cmd,"(",A,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",R.join(""))}return this.compiledGlyphs[y]=function(R,E){for(const A of f)A.cmd==="scale"&&(A.args=[E,-E]),R[A.cmd].apply(R,A.args)}}}i.FontFaceObject=o},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeFilterFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var e=t(169),n=t(1);(function(){if(!(globalThis.DOMMatrix||!n.isNodeJS))try{globalThis.DOMMatrix=require$$6.DOMMatrix}catch(R){(0,n.warn)(`Cannot polyfill \`DOMMatrix\`, rendering may be broken: "${R}".`)}})(),function(){if(!(globalThis.Path2D||!n.isNodeJS))try{const{CanvasRenderingContext2D:R}=require$$6,{polyfillPath2D:E}=requirePath2dPolyfill_esm();globalThis.CanvasRenderingContext2D=R,E(globalThis)}catch(R){(0,n.warn)(`Cannot polyfill \`Path2D\`, rendering may be broken: "${R}".`)}}();const o=function(f){return new Promise((R,E)=>{require$$6.readFile(f,(a,c)=>{if(a||!c){E(new Error(a));return}R(new Uint8Array(c))})})};class m extends e.BaseFilterFactory{}i.NodeFilterFactory=m;class w extends e.BaseCanvasFactory{_createCanvas(R,E){return require$$6.createCanvas(R,E)}}i.NodeCanvasFactory=w;class T extends e.BaseCMapReaderFactory{_fetchData(R,E){return o(R).then(A=>({cMapData:A,compressionType:E}))}}i.NodeCMapReaderFactory=T;class y extends e.BaseStandardFontDataFactory{_fetchData(R){return o(R)}}i.NodeStandardFontDataFactory=y},(C,i,t)=>{var it,_e,Ke;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0,t(2),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var e=t(1),n=t(168),o=t(174),m=t(175);const w=16,T=100,y=4096,f=15,R=10,E=1e3,A=16;function a($,d){if($._removeMirroring)throw new Error("Context is already forwarding operations.");$.__originalSave=$.save,$.__originalRestore=$.restore,$.__originalRotate=$.rotate,$.__originalScale=$.scale,$.__originalTranslate=$.translate,$.__originalTransform=$.transform,$.__originalSetTransform=$.setTransform,$.__originalResetTransform=$.resetTransform,$.__originalClip=$.clip,$.__originalMoveTo=$.moveTo,$.__originalLineTo=$.lineTo,$.__originalBezierCurveTo=$.bezierCurveTo,$.__originalRect=$.rect,$.__originalClosePath=$.closePath,$.__originalBeginPath=$.beginPath,$._removeMirroring=()=>{$.save=$.__originalSave,$.restore=$.__originalRestore,$.rotate=$.__originalRotate,$.scale=$.__originalScale,$.translate=$.__originalTranslate,$.transform=$.__originalTransform,$.setTransform=$.__originalSetTransform,$.resetTransform=$.__originalResetTransform,$.clip=$.__originalClip,$.moveTo=$.__originalMoveTo,$.lineTo=$.__originalLineTo,$.bezierCurveTo=$.__originalBezierCurveTo,$.rect=$.__originalRect,$.closePath=$.__originalClosePath,$.beginPath=$.__originalBeginPath,delete $._removeMirroring},$.save=function(){d.save(),this.__originalSave()},$.restore=function(){d.restore(),this.__originalRestore()},$.translate=function(M,N){d.translate(M,N),this.__originalTranslate(M,N)},$.scale=function(M,N){d.scale(M,N),this.__originalScale(M,N)},$.transform=function(M,N,F,I,X,H){d.transform(M,N,F,I,X,H),this.__originalTransform(M,N,F,I,X,H)},$.setTransform=function(M,N,F,I,X,H){d.setTransform(M,N,F,I,X,H),this.__originalSetTransform(M,N,F,I,X,H)},$.resetTransform=function(){d.resetTransform(),this.__originalResetTransform()},$.rotate=function(M){d.rotate(M),this.__originalRotate(M)},$.clip=function(M){d.clip(M),this.__originalClip(M)},$.moveTo=function(p,M){d.moveTo(p,M),this.__originalMoveTo(p,M)},$.lineTo=function(p,M){d.lineTo(p,M),this.__originalLineTo(p,M)},$.bezierCurveTo=function(p,M,N,F,I,X){d.bezierCurveTo(p,M,N,F,I,X),this.__originalBezierCurveTo(p,M,N,F,I,X)},$.rect=function(p,M,N,F){d.rect(p,M,N,F),this.__originalRect(p,M,N,F)},$.closePath=function(){d.closePath(),this.__originalClosePath()},$.beginPath=function(){d.beginPath(),this.__originalBeginPath()}}class c{constructor(d){this.canvasFactory=d,this.cache=Object.create(null)}getCanvas(d,p,M){let N;return this.cache[d]!==void 0?(N=this.cache[d],this.canvasFactory.reset(N,p,M)):(N=this.canvasFactory.create(p,M),this.cache[d]=N),N}delete(d){delete this.cache[d]}clear(){for(const d in this.cache){const p=this.cache[d];this.canvasFactory.destroy(p),delete this.cache[d]}}}function l($,d,p,M,N,F,I,X,H,et){const[dt,gt,At,bt,nt,ft]=(0,n.getCurrentTransform)($);if(gt===0&&At===0){const tt=I*dt+nt,lt=Math.round(tt),mt=X*bt+ft,xt=Math.round(mt),Et=(I+H)*dt+nt,at=Math.abs(Math.round(Et)-lt)||1,kt=(X+et)*bt+ft,wt=Math.abs(Math.round(kt)-xt)||1;return $.setTransform(Math.sign(dt),0,0,Math.sign(bt),lt,xt),$.drawImage(d,p,M,N,F,0,0,at,wt),$.setTransform(dt,gt,At,bt,nt,ft),[at,wt]}if(dt===0&&bt===0){const tt=X*At+nt,lt=Math.round(tt),mt=I*gt+ft,xt=Math.round(mt),Et=(X+et)*At+nt,at=Math.abs(Math.round(Et)-lt)||1,kt=(I+H)*gt+ft,wt=Math.abs(Math.round(kt)-xt)||1;return $.setTransform(0,Math.sign(gt),Math.sign(At),0,lt,xt),$.drawImage(d,p,M,N,F,0,0,wt,at),$.setTransform(dt,gt,At,bt,nt,ft),[wt,at]}$.drawImage(d,p,M,N,F,I,X,H,et);const U=Math.hypot(dt,gt),V=Math.hypot(At,bt);return[U*H,V*et]}function s($){const{width:d,height:p}=$;if(d>E||p>E)return null;const M=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),F=d+1;let I=new Uint8Array(F*(p+1)),X,H,et;const dt=d+7&-8;let gt=new Uint8Array(dt*p),At=0;for(const V of $.data){let tt=128;for(;tt>0;)gt[At++]=V&tt?0:255,tt>>=1}let bt=0;for(At=0,gt[At]!==0&&(I[0]=1,++bt),H=1;H<d;H++)gt[At]!==gt[At+1]&&(I[H]=gt[At]?2:1,++bt),At++;for(gt[At]!==0&&(I[H]=2,++bt),X=1;X<p;X++){At=X*dt,et=X*F,gt[At-dt]!==gt[At]&&(I[et]=gt[At]?1:8,++bt);let V=(gt[At]?4:0)+(gt[At-dt]?8:0);for(H=1;H<d;H++)V=(V>>2)+(gt[At+1]?4:0)+(gt[At-dt+1]?8:0),N[V]&&(I[et+H]=N[V],++bt),At++;if(gt[At-dt]!==gt[At]&&(I[et+H]=gt[At]?2:4,++bt),bt>M)return null}for(At=dt*(p-1),et=X*F,gt[At]!==0&&(I[et]=8,++bt),H=1;H<d;H++)gt[At]!==gt[At+1]&&(I[et+H]=gt[At]?4:8,++bt),At++;if(gt[At]!==0&&(I[et+H]=4,++bt),bt>M)return null;const nt=new Int32Array([0,F,-1,0,-F,0,0,0,1]),ft=new Path2D;for(X=0;bt&&X<=p;X++){let V=X*F;const tt=V+d;for(;V<tt&&!I[V];)V++;if(V===tt)continue;ft.moveTo(V%F,X);const lt=V;let mt=I[V];do{const xt=nt[mt];do V+=xt;while(!I[V]);const Et=I[V];Et!==5&&Et!==10?(mt=Et,I[V]=0):(mt=Et&51*mt>>4,I[V]&=mt>>2|mt<<2),ft.lineTo(V%F,V/F|0),I[V]||--bt}while(lt!==V);--X}return gt=null,I=null,function(V){V.save(),V.scale(1/d,-1/p),V.translate(0,-p),V.fill(ft),V.beginPath(),V.restore()}}class v{constructor(d,p){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,d,p])}clone(){const d=Object.create(this);return d.clipBox=this.clipBox.slice(),d}setCurrentPoint(d,p){this.x=d,this.y=p}updatePathMinMax(d,p,M){[p,M]=e.Util.applyTransform([p,M],d),this.minX=Math.min(this.minX,p),this.minY=Math.min(this.minY,M),this.maxX=Math.max(this.maxX,p),this.maxY=Math.max(this.maxY,M)}updateRectMinMax(d,p){const M=e.Util.applyTransform(p,d),N=e.Util.applyTransform(p.slice(2),d);this.minX=Math.min(this.minX,M[0],N[0]),this.minY=Math.min(this.minY,M[1],N[1]),this.maxX=Math.max(this.maxX,M[0],N[0]),this.maxY=Math.max(this.maxY,M[1],N[1])}updateScalingPathMinMax(d,p){e.Util.scaleMinMax(d,p),this.minX=Math.min(this.minX,p[0]),this.maxX=Math.max(this.maxX,p[1]),this.minY=Math.min(this.minY,p[2]),this.maxY=Math.max(this.maxY,p[3])}updateCurvePathMinMax(d,p,M,N,F,I,X,H,et,dt){const gt=e.Util.bezierBoundingBox(p,M,N,F,I,X,H,et);if(dt){dt[0]=Math.min(dt[0],gt[0],gt[2]),dt[1]=Math.max(dt[1],gt[0],gt[2]),dt[2]=Math.min(dt[2],gt[1],gt[3]),dt[3]=Math.max(dt[3],gt[1],gt[3]);return}this.updateRectMinMax(d,gt)}getPathBoundingBox(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.PathType.FILL,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const M=[this.minX,this.minY,this.maxX,this.maxY];if(d===o.PathType.STROKE){p||(0,e.unreachable)("Stroke bounding box must include transform.");const N=e.Util.singularValueDecompose2dScale(p),F=N[0]*this.lineWidth/2,I=N[1]*this.lineWidth/2;M[0]-=F,M[1]-=I,M[2]+=F,M[3]+=I}return M}updateClipFromPath(){const d=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(d||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(d){this.clipBox=d,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o.PathType.FILL,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.Util.intersect(this.clipBox,this.getPathBoundingBox(d,p))}}function D($,d){if(typeof ImageData<"u"&&d instanceof ImageData){$.putImageData(d,0,0);return}const p=d.height,M=d.width,N=p%A,F=(p-N)/A,I=N===0?F:F+1,X=$.createImageData(M,A);let H=0,et;const dt=d.data,gt=X.data;let At,bt,nt,ft;if(d.kind===e.ImageKind.GRAYSCALE_1BPP){const U=dt.byteLength,V=new Uint32Array(gt.buffer,0,gt.byteLength>>2),tt=V.length,lt=M+7>>3,mt=4294967295,xt=e.FeatureTest.isLittleEndian?4278190080:255;for(At=0;At<I;At++){for(nt=At<F?A:N,et=0,bt=0;bt<nt;bt++){const Et=U-H;let at=0;const kt=Et>lt?M:Et*8-7,wt=kt&-8;let $t=0,Lt=0;for(;at<wt;at+=8)Lt=dt[H++],V[et++]=Lt&128?mt:xt,V[et++]=Lt&64?mt:xt,V[et++]=Lt&32?mt:xt,V[et++]=Lt&16?mt:xt,V[et++]=Lt&8?mt:xt,V[et++]=Lt&4?mt:xt,V[et++]=Lt&2?mt:xt,V[et++]=Lt&1?mt:xt;for(;at<kt;at++)$t===0&&(Lt=dt[H++],$t=128),V[et++]=Lt&$t?mt:xt,$t>>=1}for(;et<tt;)V[et++]=0;$.putImageData(X,0,At*A)}}else if(d.kind===e.ImageKind.RGBA_32BPP){for(bt=0,ft=M*A*4,At=0;At<F;At++)gt.set(dt.subarray(H,H+ft)),H+=ft,$.putImageData(X,0,bt),bt+=A;At<I&&(ft=M*N*4,gt.set(dt.subarray(H,H+ft)),$.putImageData(X,0,bt))}else if(d.kind===e.ImageKind.RGB_24BPP)for(nt=A,ft=M*nt,At=0;At<I;At++){for(At>=F&&(nt=N,ft=M*nt),et=0,bt=ft;bt--;)gt[et++]=dt[H++],gt[et++]=dt[H++],gt[et++]=dt[H++],gt[et++]=255;$.putImageData(X,0,At*A)}else throw new Error(`bad image kind: ${d.kind}`)}function P($,d){if(d.bitmap){$.drawImage(d.bitmap,0,0);return}const p=d.height,M=d.width,N=p%A,F=(p-N)/A,I=N===0?F:F+1,X=$.createImageData(M,A);let H=0;const et=d.data,dt=X.data;for(let gt=0;gt<I;gt++){const At=gt<F?A:N;({srcPos:H}=(0,m.convertBlackAndWhiteToRGBA)({src:et,srcPos:H,dest:dt,width:M,height:At,nonBlackColor:0})),$.putImageData(X,0,gt*A)}}function h($,d){const p=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const M of p)$[M]!==void 0&&(d[M]=$[M]);$.setLineDash!==void 0&&(d.setLineDash($.getLineDash()),d.lineDashOffset=$.lineDashOffset)}function g($){if($.strokeStyle=$.fillStyle="#000000",$.fillRule="nonzero",$.globalAlpha=1,$.lineWidth=1,$.lineCap="butt",$.lineJoin="miter",$.miterLimit=10,$.globalCompositeOperation="source-over",$.font="10px sans-serif",$.setLineDash!==void 0&&($.setLineDash([]),$.lineDashOffset=0),!e.isNodeJS){const{filter:d}=$;d!=="none"&&d!==""&&($.filter="none")}}function u($,d,p,M){const N=$.length;for(let F=3;F<N;F+=4){const I=$[F];if(I===0)$[F-3]=d,$[F-2]=p,$[F-1]=M;else if(I<255){const X=255-I;$[F-3]=$[F-3]*I+d*X>>8,$[F-2]=$[F-2]*I+p*X>>8,$[F-1]=$[F-1]*I+M*X>>8}}}function S($,d,p){const M=$.length,N=1/255;for(let F=3;F<M;F+=4){const I=p?p[$[F]]:$[F];d[F]=d[F]*I*N|0}}function x($,d,p){const M=$.length;for(let N=3;N<M;N+=4){const F=$[N-3]*77+$[N-2]*152+$[N-1]*28;d[N]=p?d[N]*p[F>>8]>>8:d[N]*F>>16}}function z($,d,p,M,N,F,I,X,H,et,dt){const gt=!!F,At=gt?F[0]:0,bt=gt?F[1]:0,nt=gt?F[2]:0,ft=N==="Luminosity"?x:S,V=Math.min(M,Math.ceil(1048576/p));for(let tt=0;tt<M;tt+=V){const lt=Math.min(V,M-tt),mt=$.getImageData(X-et,tt+(H-dt),p,lt),xt=d.getImageData(X,tt+H,p,lt);gt&&u(mt.data,At,bt,nt),ft(mt.data,xt.data,I),d.putImageData(xt,X,tt+H)}}function b($,d,p,M){const N=M[0],F=M[1],I=M[2]-N,X=M[3]-F;I===0||X===0||(z(d.context,p,I,X,d.subtype,d.backdrop,d.transferMap,N,F,d.offsetX,d.offsetY),$.save(),$.globalAlpha=1,$.globalCompositeOperation="source-over",$.setTransform(1,0,0,1,0,0),$.drawImage(p.canvas,0,0),$.restore())}function L($,d){const p=e.Util.singularValueDecompose2dScale($);p[0]=Math.fround(p[0]),p[1]=Math.fround(p[1]);const M=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return d!==void 0?d:p[0]<=M||p[1]<=M}const G=["butt","round","square"],st=["miter","round","bevel"],_={},J={},rt=class rt{constructor(d,p,M,N,F,I,X,H){ht(this,it);let{optionalContentConfig:et,markedContentStack:dt=null}=I;this.ctx=d,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=p,this.objs=M,this.canvasFactory=N,this.filterFactory=F,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=dt||[],this.optionalContentConfig=et,this.cachedCanvases=new c(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=X,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=H,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(d){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof d=="string"?d.startsWith("g_")?this.commonObjs.get(d):this.objs.get(d):p}beginDrawing(d){let{transform:p,viewport:M,transparency:N=!1,background:F=null}=d;const I=this.ctx.canvas.width,X=this.ctx.canvas.height,H=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,I,X),this.ctx.fillStyle=H,N){const et=this.cachedCanvases.getCanvas("transparent",I,X);this.compositeCtx=this.ctx,this.transparentCanvas=et.canvas,this.ctx=et.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx),p&&(this.ctx.transform(...p),this.outputScaleX=p[0],this.outputScaleY=p[0]),this.ctx.transform(...M.transform),this.viewportScale=M.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx)}executeOperatorList(d,p,M,N){const F=d.argsArray,I=d.fnArray;let X=p||0;const H=F.length;if(H===X)return X;const et=H-X>R&&typeof M=="function",dt=et?Date.now()+f:0;let gt=0;const At=this.commonObjs,bt=this.objs;let nt;for(;;){if(N!==void 0&&X===N.nextBreakPoint)return N.breakIt(X,M),X;if(nt=I[X],nt!==e.OPS.dependency)this[nt].apply(this,F[X]);else for(const ft of F[X]){const U=ft.startsWith("g_")?At:bt;if(!U.has(ft))return U.get(ft,M),X}if(X++,X===H)return X;if(et&&++gt>R){if(Date.now()>dt)return M(),X;gt=0}}}endDrawing(){q(this,it,_e).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const d of this._cachedBitmapsMap.values()){for(const p of d.values())typeof HTMLCanvasElement<"u"&&p instanceof HTMLCanvasElement&&(p.width=p.height=0);d.clear()}this._cachedBitmapsMap.clear(),q(this,it,Ke).call(this)}_scaleImage(d,p){const M=d.width,N=d.height;let F=Math.max(Math.hypot(p[0],p[1]),1),I=Math.max(Math.hypot(p[2],p[3]),1),X=M,H=N,et="prescale1",dt,gt;for(;F>2&&X>1||I>2&&H>1;){let At=X,bt=H;F>2&&X>1&&(At=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X/2),F/=X/At),I>2&&H>1&&(bt=H>=16384?Math.floor(H/2)-1||1:Math.ceil(H)/2,I/=H/bt),dt=this.cachedCanvases.getCanvas(et,At,bt),gt=dt.context,gt.clearRect(0,0,At,bt),gt.drawImage(d,0,0,X,H,0,0,At,bt),d=dt.canvas,X=At,H=bt,et=et==="prescale1"?"prescale2":"prescale1"}return{img:d,paintWidth:X,paintHeight:H}}_createMaskCanvas(d){const p=this.ctx,{width:M,height:N}=d,F=this.current.fillColor,I=this.current.patternFill,X=(0,n.getCurrentTransform)(p);let H,et,dt,gt;if((d.bitmap||d.data)&&d.count>1){const at=d.bitmap||d.data.buffer;et=JSON.stringify(I?X:[X.slice(0,4),F]),H=this._cachedBitmapsMap.get(at),H||(H=new Map,this._cachedBitmapsMap.set(at,H));const kt=H.get(et);if(kt&&!I){const wt=Math.round(Math.min(X[0],X[2])+X[4]),$t=Math.round(Math.min(X[1],X[3])+X[5]);return{canvas:kt,offsetX:wt,offsetY:$t}}dt=kt}dt||(gt=this.cachedCanvases.getCanvas("maskCanvas",M,N),P(gt.context,d));let At=e.Util.transform(X,[1/M,0,0,-1/N,0,0]);At=e.Util.transform(At,[1,0,0,1,0,-N]);const bt=e.Util.applyTransform([0,0],At),nt=e.Util.applyTransform([M,N],At),ft=e.Util.normalizeRect([bt[0],bt[1],nt[0],nt[1]]),U=Math.round(ft[2]-ft[0])||1,V=Math.round(ft[3]-ft[1])||1,tt=this.cachedCanvases.getCanvas("fillCanvas",U,V),lt=tt.context,mt=Math.min(bt[0],nt[0]),xt=Math.min(bt[1],nt[1]);lt.translate(-mt,-xt),lt.transform(...At),dt||(dt=this._scaleImage(gt.canvas,(0,n.getCurrentTransformInverse)(lt)),dt=dt.img,H&&I&&H.set(et,dt)),lt.imageSmoothingEnabled=L((0,n.getCurrentTransform)(lt),d.interpolate),l(lt,dt,0,0,dt.width,dt.height,0,0,M,N),lt.globalCompositeOperation="source-in";const Et=e.Util.transform((0,n.getCurrentTransformInverse)(lt),[1,0,0,1,-mt,-xt]);return lt.fillStyle=I?F.getPattern(p,this,Et,o.PathType.FILL):F,lt.fillRect(0,0,M,N),H&&!I&&(this.cachedCanvases.delete("fillCanvas"),H.set(et,tt.canvas)),{canvas:tt.canvas,offsetX:Math.round(mt),offsetY:Math.round(xt)}}setLineWidth(d){d!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=d,this.ctx.lineWidth=d}setLineCap(d){this.ctx.lineCap=G[d]}setLineJoin(d){this.ctx.lineJoin=st[d]}setMiterLimit(d){this.ctx.miterLimit=d}setDash(d,p){const M=this.ctx;M.setLineDash!==void 0&&(M.setLineDash(d),M.lineDashOffset=p)}setRenderingIntent(d){}setFlatness(d){}setGState(d){for(const[p,M]of d)switch(p){case"LW":this.setLineWidth(M);break;case"LC":this.setLineCap(M);break;case"LJ":this.setLineJoin(M);break;case"ML":this.setMiterLimit(M);break;case"D":this.setDash(M[0],M[1]);break;case"RI":this.setRenderingIntent(M);break;case"FL":this.setFlatness(M);break;case"Font":this.setFont(M[0],M[1]);break;case"CA":this.current.strokeAlpha=M;break;case"ca":this.current.fillAlpha=M,this.ctx.globalAlpha=M;break;case"BM":this.ctx.globalCompositeOperation=M;break;case"SMask":this.current.activeSMask=M?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(M);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const d=this.inSMaskMode;this.current.activeSMask&&!d?this.beginSMaskMode():!this.current.activeSMask&&d&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const d=this.ctx.canvas.width,p=this.ctx.canvas.height,M="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(M,d,p);this.suspendedCtx=this.ctx,this.ctx=N.context;const F=this.ctx;F.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),h(this.suspendedCtx,F),a(F,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),h(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(d){if(!this.current.activeSMask)return;d?(d[0]=Math.floor(d[0]),d[1]=Math.floor(d[1]),d[2]=Math.ceil(d[2]),d[3]=Math.ceil(d[3])):d=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const p=this.current.activeSMask,M=this.suspendedCtx;b(M,p,this.ctx,d),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(h(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const d=this.current;this.stateStack.push(d),this.current=d.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),h(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(d,p,M,N,F,I){this.ctx.transform(d,p,M,N,F,I),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(d,p,M){const N=this.ctx,F=this.current;let I=F.x,X=F.y,H,et;const dt=(0,n.getCurrentTransform)(N),gt=dt[0]===0&&dt[3]===0||dt[1]===0&&dt[2]===0,At=gt?M.slice(0):null;for(let bt=0,nt=0,ft=d.length;bt<ft;bt++)switch(d[bt]|0){case e.OPS.rectangle:I=p[nt++],X=p[nt++];const U=p[nt++],V=p[nt++],tt=I+U,lt=X+V;N.moveTo(I,X),U===0||V===0?N.lineTo(tt,lt):(N.lineTo(tt,X),N.lineTo(tt,lt),N.lineTo(I,lt)),gt||F.updateRectMinMax(dt,[I,X,tt,lt]),N.closePath();break;case e.OPS.moveTo:I=p[nt++],X=p[nt++],N.moveTo(I,X),gt||F.updatePathMinMax(dt,I,X);break;case e.OPS.lineTo:I=p[nt++],X=p[nt++],N.lineTo(I,X),gt||F.updatePathMinMax(dt,I,X);break;case e.OPS.curveTo:H=I,et=X,I=p[nt+4],X=p[nt+5],N.bezierCurveTo(p[nt],p[nt+1],p[nt+2],p[nt+3],I,X),F.updateCurvePathMinMax(dt,H,et,p[nt],p[nt+1],p[nt+2],p[nt+3],I,X,At),nt+=6;break;case e.OPS.curveTo2:H=I,et=X,N.bezierCurveTo(I,X,p[nt],p[nt+1],p[nt+2],p[nt+3]),F.updateCurvePathMinMax(dt,H,et,I,X,p[nt],p[nt+1],p[nt+2],p[nt+3],At),I=p[nt+2],X=p[nt+3],nt+=4;break;case e.OPS.curveTo3:H=I,et=X,I=p[nt+2],X=p[nt+3],N.bezierCurveTo(p[nt],p[nt+1],I,X,I,X),F.updateCurvePathMinMax(dt,H,et,p[nt],p[nt+1],I,X,I,X,At),nt+=4;break;case e.OPS.closePath:N.closePath();break}gt&&F.updateScalingPathMinMax(dt,At),F.setCurrentPoint(I,X)}closePath(){this.ctx.closePath()}stroke(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const p=this.ctx,M=this.current.strokeColor;p.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof M=="object"&&(M!=null&&M.getPattern)?(p.save(),p.strokeStyle=M.getPattern(p,this,(0,n.getCurrentTransformInverse)(p),o.PathType.STROKE),this.rescaleAndStroke(!1),p.restore()):this.rescaleAndStroke(!0)),d&&this.consumePath(this.current.getClippedPathBoundingBox()),p.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const p=this.ctx,M=this.current.fillColor,N=this.current.patternFill;let F=!1;N&&(p.save(),p.fillStyle=M.getPattern(p,this,(0,n.getCurrentTransformInverse)(p),o.PathType.FILL),F=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(p.fill("evenodd"),this.pendingEOFill=!1):p.fill()),F&&p.restore(),d&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const d=this.pendingTextPaths,p=this.ctx;if(d===void 0){p.beginPath();return}p.save(),p.beginPath();for(const M of d)p.setTransform(...M.transform),p.translate(M.x,M.y),M.addToPath(p,M.fontSize);p.restore(),p.clip(),p.beginPath(),delete this.pendingTextPaths}setCharSpacing(d){this.current.charSpacing=d}setWordSpacing(d){this.current.wordSpacing=d}setHScale(d){this.current.textHScale=d/100}setLeading(d){this.current.leading=-d}setFont(d,p){var dt;const M=this.commonObjs.get(d),N=this.current;if(!M)throw new Error(`Can't find font for ${d}`);if(N.fontMatrix=M.fontMatrix||e.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+d),p<0?(p=-p,N.fontDirection=-1):N.fontDirection=1,this.current.font=M,this.current.fontSize=p,M.isType3Font)return;const F=M.loadedName||"sans-serif",I=((dt=M.systemFontInfo)==null?void 0:dt.css)||`"${F}", ${M.fallbackName}`;let X="normal";M.black?X="900":M.bold&&(X="bold");const H=M.italic?"italic":"normal";let et=p;p<w?et=w:p>T&&(et=T),this.current.fontSizeScale=p/et,this.ctx.font=`${H} ${X} ${et}px ${I}`}setTextRenderingMode(d){this.current.textRenderingMode=d}setTextRise(d){this.current.textRise=d}moveText(d,p){this.current.x=this.current.lineX+=d,this.current.y=this.current.lineY+=p}setLeadingMoveText(d,p){this.setLeading(-p),this.moveText(d,p)}setTextMatrix(d,p,M,N,F,I){this.current.textMatrix=[d,p,M,N,F,I],this.current.textMatrixScale=Math.hypot(d,p),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(d,p,M,N){const F=this.ctx,I=this.current,X=I.font,H=I.textRenderingMode,et=I.fontSize/I.fontSizeScale,dt=H&e.TextRenderingMode.FILL_STROKE_MASK,gt=!!(H&e.TextRenderingMode.ADD_TO_PATH_FLAG),At=I.patternFill&&!X.missingFile;let bt;(X.disableFontFace||gt||At)&&(bt=X.getPathGenerator(this.commonObjs,d)),X.disableFontFace||At?(F.save(),F.translate(p,M),F.beginPath(),bt(F,et),N&&F.setTransform(...N),(dt===e.TextRenderingMode.FILL||dt===e.TextRenderingMode.FILL_STROKE)&&F.fill(),(dt===e.TextRenderingMode.STROKE||dt===e.TextRenderingMode.FILL_STROKE)&&F.stroke(),F.restore()):((dt===e.TextRenderingMode.FILL||dt===e.TextRenderingMode.FILL_STROKE)&&F.fillText(d,p,M),(dt===e.TextRenderingMode.STROKE||dt===e.TextRenderingMode.FILL_STROKE)&&F.strokeText(d,p,M)),gt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(F),x:p,y:M,fontSize:et,addToPath:bt})}get isFontSubpixelAAEnabled(){const{context:d}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);d.scale(1.5,1),d.fillText("I",0,10);const p=d.getImageData(0,0,10,10).data;let M=!1;for(let N=3;N<p.length;N+=4)if(p[N]>0&&p[N]<255){M=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",M)}showText(d){const p=this.current,M=p.font;if(M.isType3Font)return this.showType3Text(d);const N=p.fontSize;if(N===0)return;const F=this.ctx,I=p.fontSizeScale,X=p.charSpacing,H=p.wordSpacing,et=p.fontDirection,dt=p.textHScale*et,gt=d.length,At=M.vertical,bt=At?1:-1,nt=M.defaultVMetrics,ft=N*p.fontMatrix[0],U=p.textRenderingMode===e.TextRenderingMode.FILL&&!M.disableFontFace&&!p.patternFill;F.save(),F.transform(...p.textMatrix),F.translate(p.x,p.y+p.textRise),et>0?F.scale(dt,-1):F.scale(dt,1);let V;if(p.patternFill){F.save();const Et=p.fillColor.getPattern(F,this,(0,n.getCurrentTransformInverse)(F),o.PathType.FILL);V=(0,n.getCurrentTransform)(F),F.restore(),F.fillStyle=Et}let tt=p.lineWidth;const lt=p.textMatrixScale;if(lt===0||tt===0){const Et=p.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(Et===e.TextRenderingMode.STROKE||Et===e.TextRenderingMode.FILL_STROKE)&&(tt=this.getSinglePixelWidth())}else tt/=lt;if(I!==1&&(F.scale(I,I),tt/=I),F.lineWidth=tt,M.isInvalidPDFjsFont){const Et=[];let at=0;for(const kt of d)Et.push(kt.unicode),at+=kt.width;F.fillText(Et.join(""),0,0),p.x+=at*ft*dt,F.restore(),this.compose();return}let mt=0,xt;for(xt=0;xt<gt;++xt){const Et=d[xt];if(typeof Et=="number"){mt+=bt*Et*N/1e3;continue}let at=!1;const kt=(Et.isSpace?H:0)+X,wt=Et.fontChar,$t=Et.accent;let Lt,Xt,Ft=Et.width;if(At){const Gt=Et.vmetric||nt,Kt=-(Et.vmetric?Gt[1]:Ft*.5)*ft,Yt=Gt[2]*ft;Ft=Gt?-Gt[0]:Ft,Lt=Kt/I,Xt=(mt+Yt)/I}else Lt=mt/I,Xt=0;if(M.remeasure&&Ft>0){const Gt=F.measureText(wt).width*1e3/N*I;if(Ft<Gt&&this.isFontSubpixelAAEnabled){const Kt=Ft/Gt;at=!0,F.save(),F.scale(Kt,1),Lt/=Kt}else Ft!==Gt&&(Lt+=(Ft-Gt)/2e3*N/I)}if(this.contentVisible&&(Et.isInFont||M.missingFile)){if(U&&!$t)F.fillText(wt,Lt,Xt);else if(this.paintChar(wt,Lt,Xt,V),$t){const Gt=Lt+N*$t.offset.x/I,Kt=Xt-N*$t.offset.y/I;this.paintChar($t.fontChar,Gt,Kt,V)}}const Bt=At?Ft*ft-kt*et:Ft*ft+kt*et;mt+=Bt,at&&F.restore()}At?p.y-=mt:p.x+=mt*dt,F.restore(),this.compose()}showType3Text(d){const p=this.ctx,M=this.current,N=M.font,F=M.fontSize,I=M.fontDirection,X=N.vertical?1:-1,H=M.charSpacing,et=M.wordSpacing,dt=M.textHScale*I,gt=M.fontMatrix||e.FONT_IDENTITY_MATRIX,At=d.length,bt=M.textRenderingMode===e.TextRenderingMode.INVISIBLE;let nt,ft,U,V;if(!(bt||F===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,p.save(),p.transform(...M.textMatrix),p.translate(M.x,M.y),p.scale(dt,I),nt=0;nt<At;++nt){if(ft=d[nt],typeof ft=="number"){V=X*ft*F/1e3,this.ctx.translate(V,0),M.x+=V*dt;continue}const tt=(ft.isSpace?et:0)+H,lt=N.charProcOperatorList[ft.operatorListId];if(!lt){(0,e.warn)(`Type3 character "${ft.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ft,this.save(),p.scale(F,F),p.transform(...gt),this.executeOperatorList(lt),this.restore()),U=e.Util.applyTransform([ft.width,0],gt)[0]*F+tt,p.translate(U,0),M.x+=U*dt}p.restore(),this.processingType3=null}}setCharWidth(d,p){}setCharWidthAndBounds(d,p,M,N,F,I){this.ctx.rect(M,N,F-M,I-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(d){let p;if(d[0]==="TilingPattern"){const M=d[1],N=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),F={createCanvasGraphics:I=>new rt(I,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};p=new o.TilingPattern(d,M,this.ctx,F,N)}else p=this._getPattern(d[1],d[2]);return p}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(d,p,M){const N=e.Util.makeHexColor(d,p,M);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(d,p,M){const N=e.Util.makeHexColor(d,p,M);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(d){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,M;return this.cachedPatterns.has(d)?M=this.cachedPatterns.get(d):(M=(0,o.getShadingPattern)(this.getObject(d)),this.cachedPatterns.set(d,M)),p&&(M.matrix=p),M}shadingFill(d){if(!this.contentVisible)return;const p=this.ctx;this.save();const M=this._getPattern(d);p.fillStyle=M.getPattern(p,this,(0,n.getCurrentTransformInverse)(p),o.PathType.SHADING);const N=(0,n.getCurrentTransformInverse)(p);if(N){const{width:F,height:I}=p.canvas,[X,H,et,dt]=e.Util.getAxialAlignedBoundingBox([0,0,F,I],N);this.ctx.fillRect(X,H,et-X,dt-H)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(d,p){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(d)&&d.length===6&&this.transform(...d),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),p)){const M=p[2]-p[0],N=p[3]-p[1];this.ctx.rect(p[0],p[1],M,N),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),p),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(d){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const p=this.ctx;d.isolated||(0,e.info)("TODO: Support non-isolated groups."),d.knockout&&(0,e.warn)("Knockout groups not supported.");const M=(0,n.getCurrentTransform)(p);if(d.matrix&&p.transform(...d.matrix),!d.bbox)throw new Error("Bounding box is required.");let N=e.Util.getAxialAlignedBoundingBox(d.bbox,(0,n.getCurrentTransform)(p));const F=[0,0,p.canvas.width,p.canvas.height];N=e.Util.intersect(N,F)||[0,0,0,0];const I=Math.floor(N[0]),X=Math.floor(N[1]);let H=Math.max(Math.ceil(N[2])-I,1),et=Math.max(Math.ceil(N[3])-X,1),dt=1,gt=1;H>y&&(dt=H/y,H=y),et>y&&(gt=et/y,et=y),this.current.startNewPathAndClipBox([0,0,H,et]);let At="groupAt"+this.groupLevel;d.smask&&(At+="_smask_"+this.smaskCounter++%2);const bt=this.cachedCanvases.getCanvas(At,H,et),nt=bt.context;nt.scale(1/dt,1/gt),nt.translate(-I,-X),nt.transform(...M),d.smask?this.smaskStack.push({canvas:bt.canvas,context:nt,offsetX:I,offsetY:X,scaleX:dt,scaleY:gt,subtype:d.smask.subtype,backdrop:d.smask.backdrop,transferMap:d.smask.transferMap||null,startTransformInverse:null}):(p.setTransform(1,0,0,1,0,0),p.translate(I,X),p.scale(dt,gt),p.save()),h(p,nt),this.ctx=nt,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(p),this.groupLevel++}endGroup(d){if(!this.contentVisible)return;this.groupLevel--;const p=this.ctx,M=this.groupStack.pop();if(this.ctx=M,this.ctx.imageSmoothingEnabled=!1,d.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const N=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);const F=e.Util.getAxialAlignedBoundingBox([0,0,p.canvas.width,p.canvas.height],N);this.ctx.drawImage(p.canvas,0,0),this.ctx.restore(),this.compose(F)}}beginAnnotation(d,p,M,N,F){if(q(this,it,_e).call(this),g(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(p)&&p.length===4){const I=p[2]-p[0],X=p[3]-p[1];if(F&&this.annotationCanvasMap){M=M.slice(),M[4]-=p[0],M[5]-=p[1],p=p.slice(),p[0]=p[1]=0,p[2]=I,p[3]=X;const[H,et]=e.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:dt}=this,gt=Math.ceil(I*this.outputScaleX*dt),At=Math.ceil(X*this.outputScaleY*dt);this.annotationCanvas=this.canvasFactory.create(gt,At);const{canvas:bt,context:nt}=this.annotationCanvas;this.annotationCanvasMap.set(d,bt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=nt,this.ctx.save(),this.ctx.setTransform(H,0,0,-et,0,X*et),g(this.ctx)}else g(this.ctx),this.ctx.rect(p[0],p[1],I,X),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...M),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),q(this,it,Ke).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(d){if(!this.contentVisible)return;const p=d.count;d=this.getObject(d.data,d),d.count=p;const M=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=s(d)),N.compiled)){N.compiled(M);return}const F=this._createMaskCanvas(d),I=F.canvas;M.save(),M.setTransform(1,0,0,1,0,0),M.drawImage(I,F.offsetX,F.offsetY),M.restore(),this.compose()}paintImageMaskXObjectRepeat(d,p){let M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,F=arguments.length>4?arguments[4]:void 0,I=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;d=this.getObject(d.data,d);const X=this.ctx;X.save();const H=(0,n.getCurrentTransform)(X);X.transform(p,M,N,F,0,0);const et=this._createMaskCanvas(d);X.setTransform(1,0,0,1,et.offsetX-H[4],et.offsetY-H[5]);for(let dt=0,gt=I.length;dt<gt;dt+=2){const At=e.Util.transform(H,[p,M,N,F,I[dt],I[dt+1]]),[bt,nt]=e.Util.applyTransform([0,0],At);X.drawImage(et.canvas,bt,nt)}X.restore(),this.compose()}paintImageMaskXObjectGroup(d){if(!this.contentVisible)return;const p=this.ctx,M=this.current.fillColor,N=this.current.patternFill;for(const F of d){const{data:I,width:X,height:H,transform:et}=F,dt=this.cachedCanvases.getCanvas("maskCanvas",X,H),gt=dt.context;gt.save();const At=this.getObject(I,F);P(gt,At),gt.globalCompositeOperation="source-in",gt.fillStyle=N?M.getPattern(gt,this,(0,n.getCurrentTransformInverse)(p),o.PathType.FILL):M,gt.fillRect(0,0,X,H),gt.restore(),p.save(),p.transform(...et),p.scale(1,-1),l(p,dt.canvas,0,0,X,H,0,-1,1,1),p.restore()}this.compose()}paintImageXObject(d){if(!this.contentVisible)return;const p=this.getObject(d);if(!p){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(p)}paintImageXObjectRepeat(d,p,M,N){if(!this.contentVisible)return;const F=this.getObject(d);if(!F){(0,e.warn)("Dependent image isn't ready yet");return}const I=F.width,X=F.height,H=[];for(let et=0,dt=N.length;et<dt;et+=2)H.push({transform:[p,0,0,M,N[et],N[et+1]],x:0,y:0,w:I,h:X});this.paintInlineImageXObjectGroup(F,H)}applyTransferMapsToCanvas(d){return this.current.transferMaps!=="none"&&(d.filter=this.current.transferMaps,d.drawImage(d.canvas,0,0),d.filter="none"),d.canvas}applyTransferMapsToBitmap(d){if(this.current.transferMaps==="none")return d.bitmap;const{bitmap:p,width:M,height:N}=d,F=this.cachedCanvases.getCanvas("inlineImage",M,N),I=F.context;return I.filter=this.current.transferMaps,I.drawImage(p,0,0),I.filter="none",F.canvas}paintInlineImageXObject(d){if(!this.contentVisible)return;const p=d.width,M=d.height,N=this.ctx;if(this.save(),!e.isNodeJS){const{filter:X}=N;X!=="none"&&X!==""&&(N.filter="none")}N.scale(1/p,-1/M);let F;if(d.bitmap)F=this.applyTransferMapsToBitmap(d);else if(typeof HTMLElement=="function"&&d instanceof HTMLElement||!d.data)F=d;else{const H=this.cachedCanvases.getCanvas("inlineImage",p,M).context;D(H,d),F=this.applyTransferMapsToCanvas(H)}const I=this._scaleImage(F,(0,n.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=L((0,n.getCurrentTransform)(N),d.interpolate),l(N,I.img,0,0,I.paintWidth,I.paintHeight,0,-M,p,M),this.compose(),this.restore()}paintInlineImageXObjectGroup(d,p){if(!this.contentVisible)return;const M=this.ctx;let N;if(d.bitmap)N=d.bitmap;else{const F=d.width,I=d.height,H=this.cachedCanvases.getCanvas("inlineImage",F,I).context;D(H,d),N=this.applyTransferMapsToCanvas(H)}for(const F of p)M.save(),M.transform(...F.transform),M.scale(1,-1),l(M,N,F.x,F.y,F.w,F.h,0,-1,1,1),M.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(d){}markPointProps(d,p){}beginMarkedContent(d){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(d,p){d==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(p)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(d){const p=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(d);const M=this.ctx;this.pendingClip&&(p||(this.pendingClip===J?M.clip("evenodd"):M.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),M.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const d=(0,n.getCurrentTransform)(this.ctx);if(d[1]===0&&d[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(d[0]),Math.abs(d[3]));else{const p=Math.abs(d[0]*d[3]-d[2]*d[1]),M=Math.hypot(d[0],d[2]),N=Math.hypot(d[1],d[3]);this._cachedGetSinglePixelWidth=Math.max(M,N)/p}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:d}=this.current,{a:p,b:M,c:N,d:F}=this.ctx.getTransform();let I,X;if(M===0&&N===0){const H=Math.abs(p),et=Math.abs(F);if(H===et)if(d===0)I=X=1/H;else{const dt=H*d;I=X=dt<1?1/dt:1}else if(d===0)I=1/H,X=1/et;else{const dt=H*d,gt=et*d;I=dt<1?1/dt:1,X=gt<1?1/gt:1}}else{const H=Math.abs(p*F-M*N),et=Math.hypot(p,M),dt=Math.hypot(N,F);if(d===0)I=dt/H,X=et/H;else{const gt=d*H;I=dt>gt?dt/gt:1,X=et>gt?et/gt:1}}this._cachedScaleForStroking[0]=I,this._cachedScaleForStroking[1]=X}return this._cachedScaleForStroking}rescaleAndStroke(d){const{ctx:p}=this,{lineWidth:M}=this.current,[N,F]=this.getScaleForStroking();if(p.lineWidth=M||1,N===1&&F===1){p.stroke();return}const I=p.getLineDash();if(d&&p.save(),p.scale(N,F),I.length>0){const X=Math.max(N,F);p.setLineDash(I.map(H=>H/X)),p.lineDashOffset/=X}p.stroke(),d&&p.restore()}isContentVisible(){for(let d=this.markedContentStack.length-1;d>=0;d--)if(!this.markedContentStack[d].visible)return!1;return!0}};it=new WeakSet,_e=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ke=function(){if(this.pageColors){const d=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(d!=="none"){const p=this.ctx.filter;this.ctx.filter=d,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=p}}};let K=rt;i.CanvasGraphics=K;for(const $ in e.OPS)K.prototype[$]!==void 0&&(K.prototype[e.OPS[$]]=K.prototype[$])},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=A,t(2);var e=t(1),n=t(168);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=o;function m(s,v){if(!v)return;const D=v[2]-v[0],P=v[3]-v[1],h=new Path2D;h.rect(v[0],v[1],D,P),s.clip(h)}class w{constructor(){this.constructor===w&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class T extends w{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let D;this._type==="axial"?D=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(D=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const P of this._colorStops)D.addColorStop(P[0],P[1]);return D}getPattern(v,D,P,h){let g;if(h===o.STROKE||h===o.FILL){const u=D.current.getClippedPathBoundingBox(h,(0,n.getCurrentTransform)(v))||[0,0,0,0],S=Math.ceil(u[2]-u[0])||1,x=Math.ceil(u[3]-u[1])||1,z=D.cachedCanvases.getCanvas("pattern",S,x,!0),b=z.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-u[0],-u[1]),P=e.Util.transform(P,[1,0,0,1,u[0],u[1]]),b.transform(...D.baseTransform),this.matrix&&b.transform(...this.matrix),m(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),g=v.createPattern(z.canvas,"no-repeat");const L=new DOMMatrix(P);g.setTransform(L)}else m(v,this._bbox),g=this._createGradient(v);return g}}function y(s,v,D,P,h,g,u,S){const x=v.coords,z=v.colors,b=s.data,L=s.width*4;let G;x[D+1]>x[P+1]&&(G=D,D=P,P=G,G=g,g=u,u=G),x[P+1]>x[h+1]&&(G=P,P=h,h=G,G=u,u=S,S=G),x[D+1]>x[P+1]&&(G=D,D=P,P=G,G=g,g=u,u=G);const st=(x[D]+v.offsetX)*v.scaleX,_=(x[D+1]+v.offsetY)*v.scaleY,J=(x[P]+v.offsetX)*v.scaleX,K=(x[P+1]+v.offsetY)*v.scaleY,it=(x[h]+v.offsetX)*v.scaleX,W=(x[h+1]+v.offsetY)*v.scaleY;if(_>=W)return;const Y=z[g],rt=z[g+1],$=z[g+2],d=z[u],p=z[u+1],M=z[u+2],N=z[S],F=z[S+1],I=z[S+2],X=Math.round(_),H=Math.round(W);let et,dt,gt,At,bt,nt,ft,U;for(let V=X;V<=H;V++){if(V<K){const Et=V<_?0:(_-V)/(_-K);et=st-(st-J)*Et,dt=Y-(Y-d)*Et,gt=rt-(rt-p)*Et,At=$-($-M)*Et}else{let Et;V>W?Et=1:K===W?Et=0:Et=(K-V)/(K-W),et=J-(J-it)*Et,dt=d-(d-N)*Et,gt=p-(p-F)*Et,At=M-(M-I)*Et}let tt;V<_?tt=0:V>W?tt=1:tt=(_-V)/(_-W),bt=st-(st-it)*tt,nt=Y-(Y-N)*tt,ft=rt-(rt-F)*tt,U=$-($-I)*tt;const lt=Math.round(Math.min(et,bt)),mt=Math.round(Math.max(et,bt));let xt=L*V+lt*4;for(let Et=lt;Et<=mt;Et++)tt=(et-Et)/(et-bt),tt<0?tt=0:tt>1&&(tt=1),b[xt++]=dt-(dt-nt)*tt|0,b[xt++]=gt-(gt-ft)*tt|0,b[xt++]=At-(At-U)*tt|0,b[xt++]=255}}function f(s,v,D){const P=v.coords,h=v.colors;let g,u;switch(v.type){case"lattice":const S=v.verticesPerRow,x=Math.floor(P.length/S)-1,z=S-1;for(g=0;g<x;g++){let b=g*S;for(let L=0;L<z;L++,b++)y(s,D,P[b],P[b+1],P[b+S],h[b],h[b+1],h[b+S]),y(s,D,P[b+S+1],P[b+1],P[b+S],h[b+S+1],h[b+1],h[b+S])}break;case"triangles":for(g=0,u=P.length;g<u;g+=3)y(s,D,P[g],P[g+1],P[g+2],h[g],h[g+1],h[g+2]);break;default:throw new Error("illegal figure")}}class R extends w{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,D,P){const S=Math.floor(this._bounds[0]),x=Math.floor(this._bounds[1]),z=Math.ceil(this._bounds[2])-S,b=Math.ceil(this._bounds[3])-x,L=Math.min(Math.ceil(Math.abs(z*v[0]*1.1)),3e3),G=Math.min(Math.ceil(Math.abs(b*v[1]*1.1)),3e3),st=z/L,_=b/G,J={coords:this._coords,colors:this._colors,offsetX:-S,offsetY:-x,scaleX:1/st,scaleY:1/_},K=L+2*2,it=G+2*2,W=P.getCanvas("mesh",K,it,!1),Y=W.context,rt=Y.createImageData(L,G);if(D){const d=rt.data;for(let p=0,M=d.length;p<M;p+=4)d[p]=D[0],d[p+1]=D[1],d[p+2]=D[2],d[p+3]=255}for(const d of this._figures)f(rt,d,J);return Y.putImageData(rt,2,2),{canvas:W.canvas,offsetX:S-2*st,offsetY:x-2*_,scaleX:st,scaleY:_}}getPattern(v,D,P,h){m(v,this._bbox);let g;if(h===o.SHADING)g=e.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(v));else if(g=e.Util.singularValueDecompose2dScale(D.baseTransform),this.matrix){const S=e.Util.singularValueDecompose2dScale(this.matrix);g=[g[0]*S[0],g[1]*S[1]]}const u=this._createMeshCanvas(g,h===o.SHADING?null:this._background,D.cachedCanvases);return h!==o.SHADING&&(v.setTransform(...D.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(u.offsetX,u.offsetY),v.scale(u.scaleX,u.scaleY),v.createPattern(u.canvas,"no-repeat")}}class E extends w{getPattern(){return"hotpink"}}function A(s){switch(s[0]){case"RadialAxial":return new T(s);case"Mesh":return new R(s);case"Dummy":return new E}throw new Error(`Unknown IR type: ${s[0]}`)}const a={COLORED:1,UNCOLORED:2},l=class l{constructor(v,D,P,h,g){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=D,this.ctx=P,this.canvasGraphicsFactory=h,this.baseTransform=g}createPatternCanvas(v){const D=this.operatorList,P=this.bbox,h=this.xstep,g=this.ystep,u=this.paintType,S=this.tilingType,x=this.color,z=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+S);const b=P[0],L=P[1],G=P[2],st=P[3],_=e.Util.singularValueDecompose2dScale(this.matrix),J=e.Util.singularValueDecompose2dScale(this.baseTransform),K=[_[0]*J[0],_[1]*J[1]],it=this.getSizeAndScale(h,this.ctx.canvas.width,K[0]),W=this.getSizeAndScale(g,this.ctx.canvas.height,K[1]),Y=v.cachedCanvases.getCanvas("pattern",it.size,W.size,!0),rt=Y.context,$=z.createCanvasGraphics(rt);$.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext($,u,x);let d=b,p=L,M=G,N=st;return b<0&&(d=0,M+=Math.abs(b)),L<0&&(p=0,N+=Math.abs(L)),rt.translate(-(it.scale*d),-(W.scale*p)),$.transform(it.scale,0,0,W.scale,0,0),rt.save(),this.clipBbox($,d,p,M,N),$.baseTransform=(0,n.getCurrentTransform)($.ctx),$.executeOperatorList(D),$.endDrawing(),{canvas:Y.canvas,scaleX:it.scale,scaleY:W.scale,offsetX:d,offsetY:p}}getSizeAndScale(v,D,P){v=Math.abs(v);const h=Math.max(l.MAX_PATTERN_SIZE,D);let g=Math.ceil(v*P);return g>=h?g=h:P=g/v,{scale:P,size:g}}clipBbox(v,D,P,h,g){const u=h-D,S=g-P;v.ctx.rect(D,P,u,S),v.current.updateRectMinMax((0,n.getCurrentTransform)(v.ctx),[D,P,h,g]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,D,P){const h=v.ctx,g=v.current;switch(D){case a.COLORED:const u=this.ctx;h.fillStyle=u.fillStyle,h.strokeStyle=u.strokeStyle,g.fillColor=u.fillStyle,g.strokeColor=u.strokeStyle;break;case a.UNCOLORED:const S=e.Util.makeHexColor(P[0],P[1],P[2]);h.fillStyle=S,h.strokeStyle=S,g.fillColor=S,g.strokeColor=S;break;default:throw new e.FormatError(`Unsupported paint type: ${D}`)}}getPattern(v,D,P,h){let g=P;h!==o.SHADING&&(g=e.Util.transform(g,D.baseTransform),this.matrix&&(g=e.Util.transform(g,this.matrix)));const u=this.createPatternCanvas(D);let S=new DOMMatrix(g);S=S.translate(u.offsetX,u.offsetY),S=S.scale(1/u.scaleX,1/u.scaleY);const x=v.createPattern(u.canvas,"repeat");return x.setTransform(S),x}};Qt(l,"MAX_PATTERN_SIZE",3e3);let c=l;i.TilingPattern=c},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.convertBlackAndWhiteToRGBA=o,i.convertToRGBA=n,i.grayToRGBA=w,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var e=t(1);function n(T){switch(T.kind){case e.ImageKind.GRAYSCALE_1BPP:return o(T);case e.ImageKind.RGB_24BPP:return m(T)}return null}function o(T){let{src:y,srcPos:f=0,dest:R,width:E,height:A,nonBlackColor:a=4294967295,inverseDecode:c=!1}=T;const l=e.FeatureTest.isLittleEndian?4278190080:255,[s,v]=c?[a,l]:[l,a],D=E>>3,P=E&7,h=y.length;R=new Uint32Array(R.buffer);let g=0;for(let u=0;u<A;u++){for(const x=f+D;f<x;f++){const z=f<h?y[f]:255;R[g++]=z&128?v:s,R[g++]=z&64?v:s,R[g++]=z&32?v:s,R[g++]=z&16?v:s,R[g++]=z&8?v:s,R[g++]=z&4?v:s,R[g++]=z&2?v:s,R[g++]=z&1?v:s}if(P===0)continue;const S=f<h?y[f++]:255;for(let x=0;x<P;x++)R[g++]=S&1<<7-x?v:s}return{srcPos:f,destPos:g}}function m(T){let{src:y,srcPos:f=0,dest:R,destPos:E=0,width:A,height:a}=T,c=0;const l=y.length>>2,s=new Uint32Array(y.buffer,f,l);if(e.FeatureTest.isLittleEndian){for(;c<l-2;c+=3,E+=4){const v=s[c],D=s[c+1],P=s[c+2];R[E]=v|4278190080,R[E+1]=v>>>24|D<<8|4278190080,R[E+2]=D>>>16|P<<16|4278190080,R[E+3]=P>>>8|4278190080}for(let v=c*4,D=y.length;v<D;v+=3)R[E++]=y[v]|y[v+1]<<8|y[v+2]<<16|4278190080}else{for(;c<l-2;c+=3,E+=4){const v=s[c],D=s[c+1],P=s[c+2];R[E]=v|255,R[E+1]=v<<24|D>>>8|255,R[E+2]=D<<16|P>>>16|255,R[E+3]=P<<8|255}for(let v=c*4,D=y.length;v<D;v+=3)R[E++]=y[v]<<24|y[v+1]<<16|y[v+2]<<8|255}return{srcPos:f,destPos:E}}function w(T,y){if(e.FeatureTest.isLittleEndian)for(let f=0,R=T.length;f<R;f++)y[f]=T[f]*65793|4278190080;else for(let f=0,R=T.length;f<R;f++)y[f]=T[f]*16843008|255}},(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const t=Object.create(null);i.GlobalWorkerOptions=t,t.workerPort=null,t.workerSrc=""},(C,i,t)=>{var T,Cn,Pn,xe;Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0,t(2);var e=t(1);const n={DATA:1,ERROR:2},o={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function m(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new e.AbortException(E.message);case"MissingPDFException":return new e.MissingPDFException(E.message);case"PasswordException":return new e.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new e.UnknownErrorException(E.message,E.details);default:return new e.UnknownErrorException(E.message,E.toString())}}class w{constructor(A,a,c){ht(this,T);this.sourceName=A,this.targetName=a,this.comObj=c,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=l=>{const s=l.data;if(s.targetName!==this.sourceName)return;if(s.stream){q(this,T,Pn).call(this,s);return}if(s.callback){const D=s.callbackId,P=this.callbackCapabilities[D];if(!P)throw new Error(`Cannot resolve callback ${D}`);if(delete this.callbackCapabilities[D],s.callback===n.DATA)P.resolve(s.data);else if(s.callback===n.ERROR)P.reject(m(s.reason));else throw new Error("Unexpected callback case");return}const v=this.actionHandler[s.action];if(!v)throw new Error(`Unknown action from worker: ${s.action}`);if(s.callbackId){const D=this.sourceName,P=s.sourceName;new Promise(function(h){h(v(s.data))}).then(function(h){c.postMessage({sourceName:D,targetName:P,callback:n.DATA,callbackId:s.callbackId,data:h})},function(h){c.postMessage({sourceName:D,targetName:P,callback:n.ERROR,callbackId:s.callbackId,reason:m(h)})});return}if(s.streamId){q(this,T,Cn).call(this,s);return}v(s.data)},c.addEventListener("message",this._onComObjOnMessage)}on(A,a){const c=this.actionHandler;if(c[A])throw new Error(`There is already an actionName called "${A}"`);c[A]=a}send(A,a,c){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:a},c)}sendWithPromise(A,a,c){const l=this.callbackId++,s=new e.PromiseCapability;this.callbackCapabilities[l]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:l,data:a},c)}catch(v){s.reject(v)}return s.promise}sendWithStream(A,a,c,l){const s=this.streamId++,v=this.sourceName,D=this.targetName,P=this.comObj;return new ReadableStream({start:h=>{const g=new e.PromiseCapability;return this.streamControllers[s]={controller:h,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},P.postMessage({sourceName:v,targetName:D,action:A,streamId:s,data:a,desiredSize:h.desiredSize},l),g.promise},pull:h=>{const g=new e.PromiseCapability;return this.streamControllers[s].pullCall=g,P.postMessage({sourceName:v,targetName:D,stream:o.PULL,streamId:s,desiredSize:h.desiredSize}),g.promise},cancel:h=>{(0,e.assert)(h instanceof Error,"cancel must have a valid reason");const g=new e.PromiseCapability;return this.streamControllers[s].cancelCall=g,this.streamControllers[s].isClosed=!0,P.postMessage({sourceName:v,targetName:D,stream:o.CANCEL,streamId:s,reason:m(h)}),g.promise}},c)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}T=new WeakSet,Cn=function(A){const a=A.streamId,c=this.sourceName,l=A.sourceName,s=this.comObj,v=this,D=this.actionHandler[A.action],P={enqueue(h){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,u=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const S=this.desiredSize;this.desiredSize-=g,S>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),s.postMessage({sourceName:c,targetName:l,stream:o.ENQUEUE,streamId:a,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:c,targetName:l,stream:o.CLOSE,streamId:a}),delete v.streamSinks[a])},error(h){(0,e.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:c,targetName:l,stream:o.ERROR,streamId:a,reason:m(h)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};P.sinkCapability.resolve(),P.ready=P.sinkCapability.promise,this.streamSinks[a]=P,new Promise(function(h){h(D(A.data,P))}).then(function(){s.postMessage({sourceName:c,targetName:l,stream:o.START_COMPLETE,streamId:a,success:!0})},function(h){s.postMessage({sourceName:c,targetName:l,stream:o.START_COMPLETE,streamId:a,reason:m(h)})})},Pn=function(A){const a=A.streamId,c=this.sourceName,l=A.sourceName,s=this.comObj,v=this.streamControllers[a],D=this.streamSinks[a];switch(A.stream){case o.START_COMPLETE:A.success?v.startCall.resolve():v.startCall.reject(m(A.reason));break;case o.PULL_COMPLETE:A.success?v.pullCall.resolve():v.pullCall.reject(m(A.reason));break;case o.PULL:if(!D){s.postMessage({sourceName:c,targetName:l,stream:o.PULL_COMPLETE,streamId:a,success:!0});break}D.desiredSize<=0&&A.desiredSize>0&&D.sinkCapability.resolve(),D.desiredSize=A.desiredSize,new Promise(function(P){var h;P((h=D.onPull)==null?void 0:h.call(D))}).then(function(){s.postMessage({sourceName:c,targetName:l,stream:o.PULL_COMPLETE,streamId:a,success:!0})},function(P){s.postMessage({sourceName:c,targetName:l,stream:o.PULL_COMPLETE,streamId:a,reason:m(P)})});break;case o.ENQUEUE:if((0,e.assert)(v,"enqueue should have stream controller"),v.isClosed)break;v.controller.enqueue(A.chunk);break;case o.CLOSE:if((0,e.assert)(v,"close should have stream controller"),v.isClosed)break;v.isClosed=!0,v.controller.close(),q(this,T,xe).call(this,v,a);break;case o.ERROR:(0,e.assert)(v,"error should have stream controller"),v.controller.error(m(A.reason)),q(this,T,xe).call(this,v,a);break;case o.CANCEL_COMPLETE:A.success?v.cancelCall.resolve():v.cancelCall.reject(m(A.reason)),q(this,T,xe).call(this,v,a);break;case o.CANCEL:if(!D)break;new Promise(function(P){var h;P((h=D.onCancel)==null?void 0:h.call(D,m(A.reason)))}).then(function(){s.postMessage({sourceName:c,targetName:l,stream:o.CANCEL_COMPLETE,streamId:a,success:!0})},function(P){s.postMessage({sourceName:c,targetName:l,stream:o.CANCEL_COMPLETE,streamId:a,reason:m(P)})}),D.sinkCapability.reject(m(A.reason)),D.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}},xe=async function(A,a){var c,l,s;await Promise.allSettled([(c=A.startCall)==null?void 0:c.promise,(l=A.pullCall)==null?void 0:l.promise,(s=A.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[a]},i.MessageHandler=w},(C,i,t)=>{var o,m;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var e=t(1);class n{constructor(T){ht(this,o);ht(this,m);let{parsedData:y,rawData:f}=T;ut(this,o,y),ut(this,m,f)}getRaw(){return r(this,m)}get(T){return r(this,o).get(T)??null}getAll(){return(0,e.objectFromMap)(r(this,o))}has(T){return r(this,o).has(T)}}o=new WeakMap,m=new WeakMap,i.Metadata=n},(C,i,t)=>{var T,y,f,R,E,A,Je;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var e=t(1),n=t(170);const o=Symbol("INTERNAL");class m{constructor(l,s){ht(this,T,!0);this.name=l,this.intent=s}get visible(){return r(this,T)}_setVisible(l,s){l!==o&&(0,e.unreachable)("Internal method `_setVisible` called."),ut(this,T,s)}}T=new WeakMap;class w{constructor(l){ht(this,A);ht(this,y,null);ht(this,f,new Map);ht(this,R,null);ht(this,E,null);if(this.name=null,this.creator=null,l!==null){this.name=l.name,this.creator=l.creator,ut(this,E,l.order);for(const s of l.groups)r(this,f).set(s.id,new m(s.name,s.intent));if(l.baseState==="OFF")for(const s of r(this,f).values())s._setVisible(o,!1);for(const s of l.on)r(this,f).get(s)._setVisible(o,!0);for(const s of l.off)r(this,f).get(s)._setVisible(o,!1);ut(this,R,this.getHash())}}isVisible(l){if(r(this,f).size===0)return!0;if(!l)return(0,e.warn)("Optional content group not defined."),!0;if(l.type==="OCG")return r(this,f).has(l.id)?r(this,f).get(l.id).visible:((0,e.warn)(`Optional content group not found: ${l.id}`),!0);if(l.type==="OCMD"){if(l.expression)return q(this,A,Je).call(this,l.expression);if(!l.policy||l.policy==="AnyOn"){for(const s of l.ids){if(!r(this,f).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(r(this,f).get(s).visible)return!0}return!1}else if(l.policy==="AllOn"){for(const s of l.ids){if(!r(this,f).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(!r(this,f).get(s).visible)return!1}return!0}else if(l.policy==="AnyOff"){for(const s of l.ids){if(!r(this,f).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(!r(this,f).get(s).visible)return!0}return!1}else if(l.policy==="AllOff"){for(const s of l.ids){if(!r(this,f).has(s))return(0,e.warn)(`Optional content group not found: ${s}`),!0;if(r(this,f).get(s).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${l.policy}.`),!0}return(0,e.warn)(`Unknown group type ${l.type}.`),!0}setVisibility(l){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!r(this,f).has(l)){(0,e.warn)(`Optional content group not found: ${l}`);return}r(this,f).get(l)._setVisible(o,!!s),ut(this,y,null)}get hasInitialVisibility(){return r(this,R)===null||this.getHash()===r(this,R)}getOrder(){return r(this,f).size?r(this,E)?r(this,E).slice():[...r(this,f).keys()]:null}getGroups(){return r(this,f).size>0?(0,e.objectFromMap)(r(this,f)):null}getGroup(l){return r(this,f).get(l)||null}getHash(){if(r(this,y)!==null)return r(this,y);const l=new n.MurmurHash3_64;for(const[s,v]of r(this,f))l.update(`${s}:${v.visible}`);return ut(this,y,l.hexdigest())}}y=new WeakMap,f=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakSet,Je=function(l){const s=l.length;if(s<2)return!0;const v=l[0];for(let D=1;D<s;D++){const P=l[D];let h;if(Array.isArray(P))h=q(this,A,Je).call(this,P);else if(r(this,f).has(P))h=r(this,f).get(P).visible;else return(0,e.warn)(`Optional content group not found: ${P}`),!0;switch(v){case"And":if(!h)return!1;break;case"Or":if(h)return!0;break;case"Not":return!h;default:return!0}}return v==="And"},i.OptionalContentConfig=w},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var e=t(1),n=t(168);class o{constructor(y,f){let{length:R,initialData:E,progressiveDone:A=!1,contentDispositionFilename:a=null,disableRange:c=!1,disableStream:l=!1}=y;if((0,e.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=a,(E==null?void 0:E.length)>0){const s=E instanceof Uint8Array&&E.byteLength===E.buffer.byteLength?E.buffer:new Uint8Array(E).buffer;this._queuedChunks.push(s)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!l,this._isRangeSupported=!c,this._contentLength=R,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((s,v)=>{this._onReceiveData({begin:s,chunk:v})}),this._pdfDataRangeTransport.addProgressListener((s,v)=>{this._onProgress({loaded:s,total:v})}),this._pdfDataRangeTransport.addProgressiveReadListener(s=>{this._onReceiveData({chunk:s})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){let{begin:f,chunk:R}=y;const E=R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength?R.buffer:new Uint8Array(R).buffer;if(f===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(E):this._queuedChunks.push(E);else{const A=this._rangeReaders.some(function(a){return a._begin!==f?!1:(a._enqueue(E),!0)});(0,e.assert)(A,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y;return((y=this._fullRequestReader)==null?void 0:y._loaded)??0}_onProgress(y){var f,R,E,A;y.total===void 0?(R=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||R.call(f,{loaded:y.loaded}):(A=(E=this._fullRequestReader)==null?void 0:E.onProgress)==null||A.call(E,{loaded:y.loaded,total:y.total})}_onProgressiveDone(){var y;(y=this._fullRequestReader)==null||y.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const f=this._rangeReaders.indexOf(y);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new m(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,f){if(f<=this._progressiveDataLength)return null;const R=new w(this,y,f);return this._pdfDataRangeTransport.requestDataRange(y,f),this._rangeReaders.push(R),R}cancelAllRequests(y){var f;(f=this._fullRequestReader)==null||f.cancel(y);for(const R of this._rangeReaders.slice(0))R.cancel(y);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=o;class m{constructor(y,f){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=y,this._done=R||!1,this._filename=(0,n.isPdfFile)(E)?E:null,this._queuedChunks=f||[],this._loaded=0;for(const A of this._queuedChunks)this._loaded+=A.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new e.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w{constructor(y,f,R){this._stream=y,this._begin=f,this._end=R,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new e.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0,t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(89);var e=t(1),n=t(182);function o(R,E,A){return{method:"GET",headers:R,signal:A.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function m(R){const E=new Headers;for(const A in R){const a=R[A];a!==void 0&&E.append(A,a)}return E}function w(R){return R instanceof Uint8Array?R.buffer:R instanceof ArrayBuffer?R:((0,e.warn)(`getArrayBuffer - unexpected data format: ${R}`),new Uint8Array(R).buffer)}class T{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new y(this),this._fullRequestReader}getRangeReader(E,A){if(A<=this._progressiveDataLength)return null;const a=new f(this,E,A);return this._rangeRequestReaders.push(a),a}cancelAllRequests(E){var A;(A=this._fullRequestReader)==null||A.cancel(E);for(const a of this._rangeRequestReaders.slice(0))a.cancel(E)}}i.PDFFetchStream=T;class y{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const A=E.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=new e.PromiseCapability,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=m(this._stream.httpHeaders);const a=A.url;fetch(a,o(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,n.validateResponseStatus)(c.status))throw(0,n.createResponseStatusError)(c.status,a);this._reader=c.body.getReader(),this._headersCapability.resolve();const l=D=>c.headers.get(D),{allowRangeRequests:s,suggestedLength:v}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=v||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;await this._headersCapability.promise;const{value:E,done:A}=await this._reader.read();return A?{value:E,done:A}:(this._loaded+=E.byteLength,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded,total:this._contentLength}),{value:w(E),done:!1})}cancel(E){var A;(A=this._reader)==null||A.cancel(E),this._abortController.abort()}}class f{constructor(E,A,a){this._stream=E,this._reader=null,this._loaded=0;const c=E.source;this._withCredentials=c.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController,this._headers=m(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${a-1}`);const l=c.url;fetch(l,o(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!(0,n.validateResponseStatus)(s.status))throw(0,n.createResponseStatusError)(s.status,l);this._readCapability.resolve(),this._reader=s.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var a;await this._readCapability.promise;const{value:E,done:A}=await this._reader.read();return A?{value:E,done:A}:(this._loaded+=E.byteLength,(a=this.onProgress)==null||a.call(this,{loaded:this._loaded}),{value:w(E),done:!1})}cancel(E){var A;(A=this._reader)==null||A.cancel(E),this._abortController.abort()}}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=T,i.extractFilenameFromHeader=w,i.validateRangeRequestCapabilities=m,i.validateResponseStatus=y;var e=t(1),n=t(183),o=t(168);function m(f){let{getResponseHeader:R,isHttp:E,rangeChunkSize:A,disableRange:a}=f;const c={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(R("Content-Length"),10);return!Number.isInteger(l)||(c.suggestedLength=l,l<=2*A)||a||!E||R("Accept-Ranges")!=="bytes"||(R("Content-Encoding")||"identity")!=="identity"||(c.allowRangeRequests=!0),c}function w(f){const R=f("Content-Disposition");if(R){let E=(0,n.getFilenameFromContentDispositionHeader)(R);if(E.includes("%"))try{E=decodeURIComponent(E)}catch{}if((0,o.isPdfFile)(E))return E}return null}function T(f,R){return f===404||f===0&&R.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+R+'".'):new e.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${R}".`,f)}function y(f){return f===200||f===206}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=n,t(89),t(149);var e=t(1);function n(o){let m=!0,w=T("filename\\*","i").exec(o);if(w){w=w[1];let c=E(w);return c=unescape(c),c=A(c),c=a(c),f(c)}if(w=R(o),w){const c=a(w);return f(c)}if(w=T("filename","i").exec(o),w){w=w[1];let c=E(w);return c=a(c),f(c)}function T(c,l){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',l)}function y(c,l){if(c){if(!/^[\x00-\xFF]+$/.test(l))return l;try{const s=new TextDecoder(c,{fatal:!0}),v=(0,e.stringToBytes)(l);l=s.decode(v),m=!1}catch{}}return l}function f(c){return m&&/[\x80-\xff]/.test(c)&&(c=y("utf-8",c),m&&(c=y("iso-8859-1",c))),c}function R(c){const l=[];let s;const v=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(s=v.exec(c))!==null;){let[,P,h,g]=s;if(P=parseInt(P,10),P in l){if(P===0)break;continue}l[P]=[h,g]}const D=[];for(let P=0;P<l.length&&P in l;++P){let[h,g]=l[P];g=E(g),h&&(g=unescape(g),P===0&&(g=A(g))),D.push(g)}return D.join("")}function E(c){if(c.startsWith('"')){const l=c.slice(1).split('\\"');for(let s=0;s<l.length;++s){const v=l[s].indexOf('"');v!==-1&&(l[s]=l[s].slice(0,v),l.length=s+1),l[s]=l[s].replaceAll(/\\(.)/g,"$1")}c=l.join('"')}return c}function A(c){const l=c.indexOf("'");if(l===-1)return c;const s=c.slice(0,l),D=c.slice(l+1).replace(/^[^']*'/,"");return y(s,D)}function a(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(l,s,v,D){if(v==="q"||v==="Q")return D=D.replaceAll("_"," "),D=D.replaceAll(/=([0-9a-fA-F]{2})/g,function(P,h){return String.fromCharCode(parseInt(h,16))}),y(s,D);try{D=atob(D)}catch{}return y(s,D)})}return""}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0,t(89);var e=t(1),n=t(182);const o=200,m=206;function w(E){const A=E.response;return typeof A!="string"?A:(0,e.stringToBytes)(A).buffer}class T{constructor(A){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=A,this.isHttp=/^https?:/i.test(A),this.httpHeaders=this.isHttp&&a.httpHeaders||Object.create(null),this.withCredentials=a.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(A,a,c){const l={begin:A,end:a};for(const s in c)l[s]=c[s];return this.request(l)}requestFull(A){return this.request(A)}request(A){const a=new XMLHttpRequest,c=this.currXhrId++,l=this.pendingRequests[c]={xhr:a};a.open("GET",this.url),a.withCredentials=this.withCredentials;for(const s in this.httpHeaders){const v=this.httpHeaders[s];v!==void 0&&a.setRequestHeader(s,v)}return this.isHttp&&"begin"in A&&"end"in A?(a.setRequestHeader("Range",`bytes=${A.begin}-${A.end-1}`),l.expectedStatus=m):l.expectedStatus=o,a.responseType="arraybuffer",A.onError&&(a.onerror=function(s){A.onError(a.status)}),a.onreadystatechange=this.onStateChange.bind(this,c),a.onprogress=this.onProgress.bind(this,c),l.onHeadersReceived=A.onHeadersReceived,l.onDone=A.onDone,l.onError=A.onError,l.onProgress=A.onProgress,a.send(null),c}onProgress(A,a){var l;const c=this.pendingRequests[A];c&&((l=c.onProgress)==null||l.call(c,a))}onStateChange(A,a){var P,h,g;const c=this.pendingRequests[A];if(!c)return;const l=c.xhr;if(l.readyState>=2&&c.onHeadersReceived&&(c.onHeadersReceived(),delete c.onHeadersReceived),l.readyState!==4||!(A in this.pendingRequests))return;if(delete this.pendingRequests[A],l.status===0&&this.isHttp){(P=c.onError)==null||P.call(c,l.status);return}const s=l.status||o;if(!(s===o&&c.expectedStatus===m)&&s!==c.expectedStatus){(h=c.onError)==null||h.call(c,l.status);return}const D=w(l);if(s===m){const u=l.getResponseHeader("Content-Range"),S=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);c.onDone({begin:parseInt(S[1],10),chunk:D})}else D?c.onDone({begin:0,chunk:D}):(g=c.onError)==null||g.call(c,l.status)}getRequestXhr(A){return this.pendingRequests[A].xhr}isPendingRequest(A){return A in this.pendingRequests}abortRequest(A){const a=this.pendingRequests[A].xhr;delete this.pendingRequests[A],a.abort()}}class y{constructor(A){this._source=A,this._manager=new T(A.url,{httpHeaders:A.httpHeaders,withCredentials:A.withCredentials}),this._rangeChunkSize=A.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(A){const a=this._rangeRequestReaders.indexOf(A);a>=0&&this._rangeRequestReaders.splice(a,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(A,a){const c=new R(this._manager,A,a);return c.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(c),c}cancelAllRequests(A){var a;(a=this._fullRequestReader)==null||a.cancel(A);for(const c of this._rangeRequestReaders.slice(0))c.cancel(A)}}i.PDFNetworkStream=y;class f{constructor(A,a){this._manager=A;const c={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=a.url,this._fullRequestId=A.requestFull(c),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=a.disableRange||!1,this._contentLength=a.length,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const A=this._fullRequestId,a=this._manager.getRequestXhr(A),c=v=>a.getResponseHeader(v),{allowRangeRequests:l,suggestedLength:s}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:c,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(c),this._isRangeSupported&&this._manager.abortRequest(A),this._headersReceivedCapability.resolve()}_onDone(A){if(A&&(this._requests.length>0?this._requests.shift().resolve({value:A.chunk,done:!1}):this._cachedChunks.push(A.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(A){this._storedError=(0,n.createResponseStatusError)(A,this._url),this._headersReceivedCapability.reject(this._storedError);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(A){var a;(a=this.onProgress)==null||a.call(this,{loaded:A.loaded,total:A.lengthComputable?A.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=new e.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0,this._headersReceivedCapability.reject(A);for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class R{constructor(A,a,c){this._manager=A;const l={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=A.url,this._requestId=A.requestRange(a,c,l),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var A;(A=this.onClosed)==null||A.call(this,this)}_onDone(A){const a=A.chunk;this._requests.length>0?this._requests.shift().resolve({value:a,done:!1}):this._queuedChunk=a,this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(A){this._storedError=(0,n.createResponseStatusError)(A,this._url);for(const a of this._requests)a.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(A){var a;this.isStreamingSupported||(a=this.onProgress)==null||a.call(this,{loaded:A.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};const A=new e.PromiseCapability;return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0,t(89),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123);var e=t(1),n=t(182);const o=/^file:\/\/\/[a-zA-Z]:\//;function m(c){const l=require$$6,s=l.parse(c);return s.protocol==="file:"||s.host?s:/^[a-z]:[/\\]/i.test(c)?l.parse(`file:///${c}`):(s.host||(s.protocol="file:"),s)}class w{constructor(l){this.source=l,this.url=m(l.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&l.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var l;return((l=this._fullRequestReader)==null?void 0:l._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new R(this),this._fullRequestReader}getRangeReader(l,s){if(s<=this._progressiveDataLength)return null;const v=this.isFsUrl?new a(this,l,s):new E(this,l,s);return this._rangeRequestReaders.push(v),v}cancelAllRequests(l){var s;(s=this._fullRequestReader)==null||s.cancel(l);for(const v of this._rangeRequestReaders.slice(0))v.cancel(l)}}i.PDFNodeStream=w;class T{constructor(l){this._url=l.url,this._done=!1,this._storedError=null,this.onProgress=null;const s=l.source;this._contentLength=s.length,this._loaded=0,this._filename=null,this._disableRange=s.disableRange||!1,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const l=this._readableStream.read();return l===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=l.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(l).buffer,done:!1})}cancel(l){if(!this._readableStream){this._error(l);return}this._readableStream.destroy(l)}_error(l){this._storedError=l,this._readCapability.resolve()}_setReadableStream(l){this._readableStream=l,l.on("readable",()=>{this._readCapability.resolve()}),l.on("end",()=>{l.destroy(),this._done=!0,this._readCapability.resolve()}),l.on("error",s=>{this._error(s)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(l){this._url=l.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const s=l.source;this._isStreamingSupported=!s.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const l=this._readableStream.read();return l===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=l.length,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:new Uint8Array(l).buffer,done:!1})}cancel(l){if(!this._readableStream){this._error(l);return}this._readableStream.destroy(l)}_error(l){this._storedError=l,this._readCapability.resolve()}_setReadableStream(l){this._readableStream=l,l.on("readable",()=>{this._readCapability.resolve()}),l.on("end",()=>{l.destroy(),this._done=!0,this._readCapability.resolve()}),l.on("error",s=>{this._error(s)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(c,l){return{protocol:c.protocol,auth:c.auth,host:c.hostname,port:c.port,path:c.path,method:"GET",headers:l}}class R extends T{constructor(l){super(l);const s=v=>{if(v.statusCode===404){const g=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=g,this._headersCapability.reject(g);return}this._headersCapability.resolve(),this._setReadableStream(v);const D=g=>this._readableStream.headers[g.toLowerCase()],{allowRangeRequests:P,suggestedLength:h}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:D,isHttp:l.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=P,this._contentLength=h||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(D)};if(this._request=null,this._url.protocol==="http:"){const v=require$$6;this._request=v.request(f(this._url,l.httpHeaders),s)}else{const v=require$$6;this._request=v.request(f(this._url,l.httpHeaders),s)}this._request.on("error",v=>{this._storedError=v,this._headersCapability.reject(v)}),this._request.end()}}class E extends y{constructor(l,s,v){super(l),this._httpHeaders={};for(const P in l.httpHeaders){const h=l.httpHeaders[P];h!==void 0&&(this._httpHeaders[P]=h)}this._httpHeaders.Range=`bytes=${s}-${v-1}`;const D=P=>{if(P.statusCode===404){const h=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=h;return}this._setReadableStream(P)};if(this._request=null,this._url.protocol==="http:"){const P=require$$6;this._request=P.request(f(this._url,this._httpHeaders),D)}else{const P=require$$6;this._request=P.request(f(this._url,this._httpHeaders),D)}this._request.on("error",P=>{this._storedError=P}),this._request.end()}}class A extends T{constructor(l){super(l);let s=decodeURIComponent(this._url.path);o.test(this._url.href)&&(s=s.replace(/^\//,""));const v=require$$6;v.lstat(s,(D,P)=>{if(D){D.code==="ENOENT"&&(D=new e.MissingPDFException(`Missing PDF "${s}".`)),this._storedError=D,this._headersCapability.reject(D);return}this._contentLength=P.size,this._setReadableStream(v.createReadStream(s)),this._headersCapability.resolve()})}}class a extends y{constructor(l,s,v){super(l);let D=decodeURIComponent(this._url.path);o.test(this._url.href)&&(D=D.replace(/^\//,""));const P=require$$6;this._setReadableStream(P.createReadStream(D,{start:s,end:v-1}))}}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0,t(84),t(86),t(87),t(93),t(101),t(102),t(105),t(107),t(109),t(113),t(116),t(123),t(2),t(89),t(187);var e=t(168),n=t(1);const o={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},m="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/1999/xlink",T=["butt","round","square"],y=["miter","round","bevel"],f=function(P){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!g)return URL.createObjectURL(new Blob([P],{type:h}));const u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${h};base64,`;for(let x=0,z=P.length;x<z;x+=3){const b=P[x]&255,L=P[x+1]&255,G=P[x+2]&255,st=b>>2,_=(b&3)<<4|L>>4,J=x+1<z?(L&15)<<2|G>>6:64,K=x+2<z?G&63:64;S+=u[st]+u[_]+u[J]+u[K]}return S},R=function(){const P=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,g=new Int32Array(256);for(let G=0;G<256;G++){let st=G;for(let _=0;_<8;_++)st=st&1?3988292384^st>>1&2147483647:st>>1&2147483647;g[G]=st}function u(G,st,_){let J=-1;for(let K=st;K<_;K++){const it=(J^G[K])&255,W=g[it];J=J>>>8^W}return J^-1}function S(G,st,_,J){let K=J;const it=st.length;_[K]=it>>24&255,_[K+1]=it>>16&255,_[K+2]=it>>8&255,_[K+3]=it&255,K+=4,_[K]=G.charCodeAt(0)&255,_[K+1]=G.charCodeAt(1)&255,_[K+2]=G.charCodeAt(2)&255,_[K+3]=G.charCodeAt(3)&255,K+=4,_.set(st,K),K+=st.length;const W=u(_,J+4,K);_[K]=W>>24&255,_[K+1]=W>>16&255,_[K+2]=W>>8&255,_[K+3]=W&255}function x(G,st,_){let J=1,K=0;for(let it=st;it<_;++it)J=(J+(G[it]&255))%65521,K=(K+J)%65521;return K<<16|J}function z(G){if(!n.isNodeJS)return b(G);try{const st=parseInt(process.versions.node)>=8?G:Buffer.from(G),_=require$$6.deflateSync(st,{level:9});return _ instanceof Uint8Array?_:new Uint8Array(_)}catch(st){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+st)}return b(G)}function b(G){let st=G.length;const _=65535,J=Math.ceil(st/_),K=new Uint8Array(2+st+J*5+4);let it=0;K[it++]=120,K[it++]=156;let W=0;for(;st>_;)K[it++]=0,K[it++]=255,K[it++]=255,K[it++]=0,K[it++]=0,K.set(G.subarray(W,W+_),it),it+=_,W+=_,st-=_;K[it++]=1,K[it++]=st&255,K[it++]=st>>8&255,K[it++]=~st&65535&255,K[it++]=(~st&65535)>>8&255,K.set(G.subarray(W),it),it+=G.length-W;const Y=x(G,0,G.length);return K[it++]=Y>>24&255,K[it++]=Y>>16&255,K[it++]=Y>>8&255,K[it++]=Y&255,K}function L(G,st,_,J){const K=G.width,it=G.height;let W,Y,rt;const $=G.data;switch(st){case n.ImageKind.GRAYSCALE_1BPP:Y=0,W=1,rt=K+7>>3;break;case n.ImageKind.RGB_24BPP:Y=2,W=8,rt=K*3;break;case n.ImageKind.RGBA_32BPP:Y=6,W=8,rt=K*4;break;default:throw new Error("invalid format")}const d=new Uint8Array((1+rt)*it);let p=0,M=0;for(let et=0;et<it;++et)d[p++]=0,d.set($.subarray(M,M+rt),p),M+=rt,p+=rt;if(st===n.ImageKind.GRAYSCALE_1BPP&&J){p=0;for(let et=0;et<it;et++){p++;for(let dt=0;dt<rt;dt++)d[p++]^=255}}const N=new Uint8Array([K>>24&255,K>>16&255,K>>8&255,K&255,it>>24&255,it>>16&255,it>>8&255,it&255,W,Y,0,0,0]),F=z(d),I=P.length+h*3+N.length+F.length,X=new Uint8Array(I);let H=0;return X.set(P,H),H+=P.length,S("IHDR",N,X,H),H+=h+N.length,S("IDATA",F,X,H),H+=h+F.length,S("IEND",new Uint8Array(0),X,H),f(X,"image/png",_)}return function(st,_,J){const K=st.kind===void 0?n.ImageKind.GRAYSCALE_1BPP:st.kind;return L(st,K,_,J)}}();class E{constructor(){this.fontSizeScale=1,this.fontWeight=o.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,g){this.x=h,this.y=g}}function A(P){let h=[];const g=[];for(const u of P){if(u.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),g.push(h),h=h.at(-1).items;continue}u.fn==="restore"?h=g.pop():h.push(u)}return h}function a(P){if(Number.isInteger(P))return P.toString();const h=P.toFixed(10);let g=h.length-1;if(h[g]!=="0")return h;do g--;while(h[g]==="0");return h.substring(0,h[g]==="."?g:g+1)}function c(P){if(P[4]===0&&P[5]===0){if(P[1]===0&&P[2]===0)return P[0]===1&&P[3]===1?"":`scale(${a(P[0])} ${a(P[3])})`;if(P[0]===P[3]&&P[1]===-P[2]){const h=Math.acos(P[0])*180/Math.PI;return`rotate(${a(h)})`}}else if(P[0]===1&&P[1]===0&&P[2]===0&&P[3]===1)return`translate(${a(P[4])} ${a(P[5])})`;return`matrix(${a(P[0])} ${a(P[1])} ${a(P[2])} ${a(P[3])} ${a(P[4])} ${a(P[5])})`}let l=0,s=0,v=0;class D{constructor(h,g){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new E,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=h,this.objs=g,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const S in n.OPS)this._operatorIdMapping[n.OPS[S]]=S}getObject(h){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):g}save(){this.transformStack.push(this.transformMatrix);const h=this.current;this.extraStack.push(h),this.current=h.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(h){this.save(),this.executeOpTree(h),this.restore()}loadDependencies(h){const g=h.fnArray,u=h.argsArray;for(let S=0,x=g.length;S<x;S++)if(g[S]===n.OPS.dependency)for(const z of u[S]){const b=z.startsWith("g_")?this.commonObjs:this.objs,L=new Promise(G=>{b.get(z,G)});this.current.dependencies.push(L)}return Promise.all(this.current.dependencies)}transform(h,g,u,S,x,z){const b=[h,g,u,S,x,z];this.transformMatrix=n.Util.transform(this.transformMatrix,b),this.tgrp=null}getSVG(h,g){this.viewport=g;const u=this._initialize(g);return this.loadDependencies(h).then(()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(h)),u))}convertOpList(h){const g=this._operatorIdMapping,u=h.argsArray,S=h.fnArray,x=[];for(let z=0,b=S.length;z<b;z++){const L=S[z];x.push({fnId:L,fn:g[L],args:u[z]})}return A(x)}executeOpTree(h){for(const g of h){const u=g.fn,S=g.fnId,x=g.args;switch(S|0){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(x);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(x[0],x[1]);break;case n.OPS.setFont:this.setFont(x);break;case n.OPS.showText:this.showText(x[0]);break;case n.OPS.showSpacedText:this.showText(x[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(x[0],x[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(x[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(x[0]);break;case n.OPS.setHScale:this.setHScale(x[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(x[0],x[1],x[2],x[3],x[4],x[5]);break;case n.OPS.setTextRise:this.setTextRise(x[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(x[0]);break;case n.OPS.setLineWidth:this.setLineWidth(x[0]);break;case n.OPS.setLineJoin:this.setLineJoin(x[0]);break;case n.OPS.setLineCap:this.setLineCap(x[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(x[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(x[0],x[1],x[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(x[0],x[1],x[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(x);break;case n.OPS.setFillColorN:this.setFillColorN(x);break;case n.OPS.shadingFill:this.shadingFill(x[0]);break;case n.OPS.setDash:this.setDash(x[0],x[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(x[0]);break;case n.OPS.setFlatness:this.setFlatness(x[0]);break;case n.OPS.setGState:this.setGState(x[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(x[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(x[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(x[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(x[0],x[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(x[0],x[1],x[2],x[3],x[4],x[5]);break;case n.OPS.constructPath:this.constructPath(x[0],x[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(g.items);break;default:(0,n.warn)(`Unimplemented operator ${u}`);break}}}setWordSpacing(h){this.current.wordSpacing=h}setCharSpacing(h){this.current.charSpacing=h}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(h,g,u,S,x,z){const b=this.current;b.textMatrix=b.lineMatrix=[h,g,u,S,x,z],b.textMatrixScale=Math.hypot(h,g),b.x=b.lineX=0,b.y=b.lineY=0,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${a(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",a(-b.y)),b.txtElement=this.svgFactory.createElement("svg:text"),b.txtElement.append(b.tspan)}beginText(){const h=this.current;h.x=h.lineX=0,h.y=h.lineY=0,h.textMatrix=n.IDENTITY_MATRIX,h.lineMatrix=n.IDENTITY_MATRIX,h.textMatrixScale=1,h.tspan=this.svgFactory.createElement("svg:tspan"),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtgrp=this.svgFactory.createElement("svg:g"),h.xcoords=[],h.ycoords=[]}moveText(h,g){const u=this.current;u.x=u.lineX+=h,u.y=u.lineY+=g,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${a(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",a(-u.y))}showText(h){const g=this.current,u=g.font,S=g.fontSize;if(S===0)return;const x=g.fontSizeScale,z=g.charSpacing,b=g.wordSpacing,L=g.fontDirection,G=g.textHScale*L,st=u.vertical,_=st?1:-1,J=u.defaultVMetrics,K=S*g.fontMatrix[0];let it=0;for(const rt of h){if(rt===null){it+=L*b;continue}else if(typeof rt=="number"){it+=_*rt*S/1e3;continue}const $=(rt.isSpace?b:0)+z,d=rt.fontChar;let p,M,N=rt.width;if(st){let I;const X=rt.vmetric||J;I=rt.vmetric?X[1]:N*.5,I=-I*K;const H=X[2]*K;N=X?-X[0]:N,p=I/x,M=(it+H)/x}else p=it/x,M=0;(rt.isInFont||u.missingFile)&&(g.xcoords.push(g.x+p),st&&g.ycoords.push(-g.y+M),g.tspan.textContent+=d);const F=st?N*K-$*L:N*K+$*L;it+=F}g.tspan.setAttributeNS(null,"x",g.xcoords.map(a).join(" ")),st?g.tspan.setAttributeNS(null,"y",g.ycoords.map(a).join(" ")):g.tspan.setAttributeNS(null,"y",a(-g.y)),st?g.y-=it:g.x+=it*G,g.tspan.setAttributeNS(null,"font-family",g.fontFamily),g.tspan.setAttributeNS(null,"font-size",`${a(g.fontSize)}px`),g.fontStyle!==o.fontStyle&&g.tspan.setAttributeNS(null,"font-style",g.fontStyle),g.fontWeight!==o.fontWeight&&g.tspan.setAttributeNS(null,"font-weight",g.fontWeight);const W=g.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(W===n.TextRenderingMode.FILL||W===n.TextRenderingMode.FILL_STROKE?(g.fillColor!==o.fillColor&&g.tspan.setAttributeNS(null,"fill",g.fillColor),g.fillAlpha<1&&g.tspan.setAttributeNS(null,"fill-opacity",g.fillAlpha)):g.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?g.tspan.setAttributeNS(null,"fill","transparent"):g.tspan.setAttributeNS(null,"fill","none"),W===n.TextRenderingMode.STROKE||W===n.TextRenderingMode.FILL_STROKE){const rt=1/(g.textMatrixScale||1);this._setStrokeAttributes(g.tspan,rt)}let Y=g.textMatrix;g.textRise!==0&&(Y=Y.slice(),Y[5]+=g.textRise),g.txtElement.setAttributeNS(null,"transform",`${c(Y)} scale(${a(G)}, -1)`),g.txtElement.setAttributeNS(m,"xml:space","preserve"),g.txtElement.append(g.tspan),g.txtgrp.append(g.txtElement),this._ensureTransformGroup().append(g.txtElement)}setLeadingMoveText(h,g){this.setLeading(-g),this.moveText(h,g)}addFontStyle(h){if(!h.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const g=f(h.data,h.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${h.loadedName}"; src: url(${g}); }
`}setFont(h){const g=this.current,u=this.commonObjs.get(h[0]);let S=h[1];g.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),g.fontMatrix=u.fontMatrix||n.FONT_IDENTITY_MATRIX;let x="normal";u.black?x="900":u.bold&&(x="bold");const z=u.italic?"italic":"normal";S<0?(S=-S,g.fontDirection=-1):g.fontDirection=1,g.fontSize=S,g.fontFamily=u.loadedName,g.fontWeight=x,g.fontStyle=z,g.tspan=this.svgFactory.createElement("svg:tspan"),g.tspan.setAttributeNS(null,"y",a(-g.y)),g.xcoords=[],g.ycoords=[]}endText(){var g;const h=this.current;h.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&((g=h.txtElement)!=null&&g.hasChildNodes())&&(h.element=h.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(h){h>0&&(this.current.lineWidth=h)}setLineCap(h){this.current.lineCap=T[h]}setLineJoin(h){this.current.lineJoin=y[h]}setMiterLimit(h){this.current.miterLimit=h}setStrokeAlpha(h){this.current.strokeAlpha=h}setStrokeRGBColor(h,g,u){this.current.strokeColor=n.Util.makeHexColor(h,g,u)}setFillAlpha(h){this.current.fillAlpha=h}setFillRGBColor(h,g,u){this.current.fillColor=n.Util.makeHexColor(h,g,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(h){this.current.strokeColor=this._makeColorN_Pattern(h)}setFillColorN(h){this.current.fillColor=this._makeColorN_Pattern(h)}shadingFill(h){const{width:g,height:u}=this.viewport,S=n.Util.inverseTransform(this.transformMatrix),[x,z,b,L]=n.Util.getAxialAlignedBoundingBox([0,0,g,u],S),G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x",x),G.setAttributeNS(null,"y",z),G.setAttributeNS(null,"width",b-x),G.setAttributeNS(null,"height",L-z),G.setAttributeNS(null,"fill",this._makeShadingPattern(h)),this.current.fillAlpha<1&&G.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(G)}_makeColorN_Pattern(h){return h[0]==="TilingPattern"?this._makeTilingPattern(h):this._makeShadingPattern(h)}_makeTilingPattern(h){const g=h[1],u=h[2],S=h[3]||n.IDENTITY_MATRIX,[x,z,b,L]=h[4],G=h[5],st=h[6],_=h[7],J=`shading${v++}`,[K,it,W,Y]=n.Util.normalizeRect([...n.Util.applyTransform([x,z],S),...n.Util.applyTransform([b,L],S)]),[rt,$]=n.Util.singularValueDecompose2dScale(S),d=G*rt,p=st*$,M=this.svgFactory.createElement("svg:pattern");M.setAttributeNS(null,"id",J),M.setAttributeNS(null,"patternUnits","userSpaceOnUse"),M.setAttributeNS(null,"width",d),M.setAttributeNS(null,"height",p),M.setAttributeNS(null,"x",`${K}`),M.setAttributeNS(null,"y",`${it}`);const N=this.svg,F=this.transformMatrix,I=this.current.fillColor,X=this.current.strokeColor,H=this.svgFactory.create(W-K,Y-it);if(this.svg=H,this.transformMatrix=S,_===2){const et=n.Util.makeHexColor(...g);this.current.fillColor=et,this.current.strokeColor=et}return this.executeOpTree(this.convertOpList(u)),this.svg=N,this.transformMatrix=F,this.current.fillColor=I,this.current.strokeColor=X,M.append(H.childNodes[0]),this.defs.append(M),`url(#${J})`}_makeShadingPattern(h){switch(typeof h=="string"&&(h=this.objs.get(h)),h[0]){case"RadialAxial":const g=`shading${v++}`,u=h[3];let S;switch(h[1]){case"axial":const x=h[4],z=h[5];S=this.svgFactory.createElement("svg:linearGradient"),S.setAttributeNS(null,"id",g),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"x1",x[0]),S.setAttributeNS(null,"y1",x[1]),S.setAttributeNS(null,"x2",z[0]),S.setAttributeNS(null,"y2",z[1]);break;case"radial":const b=h[4],L=h[5],G=h[6],st=h[7];S=this.svgFactory.createElement("svg:radialGradient"),S.setAttributeNS(null,"id",g),S.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),S.setAttributeNS(null,"cx",L[0]),S.setAttributeNS(null,"cy",L[1]),S.setAttributeNS(null,"r",st),S.setAttributeNS(null,"fx",b[0]),S.setAttributeNS(null,"fy",b[1]),S.setAttributeNS(null,"fr",G);break;default:throw new Error(`Unknown RadialAxial type: ${h[1]}`)}for(const x of u){const z=this.svgFactory.createElement("svg:stop");z.setAttributeNS(null,"offset",x[0]),z.setAttributeNS(null,"stop-color",x[1]),S.append(z)}return this.defs.append(S),`url(#${g})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${h[0]}`)}}setDash(h,g){this.current.dashArray=h,this.current.dashPhase=g}constructPath(h,g){const u=this.current;let S=u.x,x=u.y,z=[],b=0;for(const L of h)switch(L|0){case n.OPS.rectangle:S=g[b++],x=g[b++];const G=g[b++],st=g[b++],_=S+G,J=x+st;z.push("M",a(S),a(x),"L",a(_),a(x),"L",a(_),a(J),"L",a(S),a(J),"Z");break;case n.OPS.moveTo:S=g[b++],x=g[b++],z.push("M",a(S),a(x));break;case n.OPS.lineTo:S=g[b++],x=g[b++],z.push("L",a(S),a(x));break;case n.OPS.curveTo:S=g[b+4],x=g[b+5],z.push("C",a(g[b]),a(g[b+1]),a(g[b+2]),a(g[b+3]),a(S),a(x)),b+=6;break;case n.OPS.curveTo2:z.push("C",a(S),a(x),a(g[b]),a(g[b+1]),a(g[b+2]),a(g[b+3])),S=g[b+2],x=g[b+3],b+=4;break;case n.OPS.curveTo3:S=g[b+2],x=g[b+3],z.push("C",a(g[b]),a(g[b+1]),a(S),a(x),a(S),a(x)),b+=4;break;case n.OPS.closePath:z.push("Z");break}z=z.join(" "),u.path&&h.length>0&&h[0]!==n.OPS.rectangle&&h[0]!==n.OPS.moveTo?z=u.path.getAttributeNS(null,"d")+z:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(u.path)),u.path.setAttributeNS(null,"d",z),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(S,x)}endPath(){const h=this.current;if(h.path=null,!this.pendingClip)return;if(!h.element){this.pendingClip=null;return}const g=`clippath${l++}`,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",g),u.setAttributeNS(null,"transform",c(this.transformMatrix));const S=h.element.cloneNode(!0);if(this.pendingClip==="evenodd"?S.setAttributeNS(null,"clip-rule","evenodd"):S.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,u.append(S),this.defs.append(u),h.activeClipUrl){h.clipGroup=null;for(const x of this.extraStack)x.clipGroup=null;u.setAttributeNS(null,"clip-path",h.activeClipUrl)}h.activeClipUrl=`url(#${g})`,this.tgrp=null}clip(h){this.pendingClip=h}closePath(){const h=this.current;if(h.path){const g=`${h.path.getAttributeNS(null,"d")}Z`;h.path.setAttributeNS(null,"d",g)}}setLeading(h){this.current.leading=-h}setTextRise(h){this.current.textRise=h}setTextRenderingMode(h){this.current.textRenderingMode=h}setHScale(h){this.current.textHScale=h/100}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(const[g,u]of h)switch(g){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,n.warn)(`Unimplemented graphic state operator ${g}`);break}}fill(){const h=this.current;h.element&&(h.element.setAttributeNS(null,"fill",h.fillColor),h.element.setAttributeNS(null,"fill-opacity",h.fillAlpha),this.endPath())}stroke(){const h=this.current;h.element&&(this._setStrokeAttributes(h.element),h.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(h){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const u=this.current;let S=u.dashArray;g!==1&&S.length>0&&(S=S.map(function(x){return g*x})),h.setAttributeNS(null,"stroke",u.strokeColor),h.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),h.setAttributeNS(null,"stroke-miterlimit",a(u.miterLimit)),h.setAttributeNS(null,"stroke-linecap",u.lineCap),h.setAttributeNS(null,"stroke-linejoin",u.lineJoin),h.setAttributeNS(null,"stroke-width",a(g*u.lineWidth)+"px"),h.setAttributeNS(null,"stroke-dasharray",S.map(a).join(" ")),h.setAttributeNS(null,"stroke-dashoffset",a(g*u.dashPhase)+"px")}eoFill(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var h;(h=this.current.element)==null||h.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const h=this.svgFactory.createElement("svg:rect");h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y","0"),h.setAttributeNS(null,"width","1px"),h.setAttributeNS(null,"height","1px"),h.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(h)}paintImageXObject(h){const g=this.getObject(h);if(!g){(0,n.warn)(`Dependent image with object ID ${h} is not ready yet`);return}this.paintInlineImageXObject(g)}paintInlineImageXObject(h,g){const u=h.width,S=h.height,x=R(h,this.forceDataSchema,!!g),z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width",a(u)),z.setAttributeNS(null,"height",a(S)),this.current.element=z,this.clip("nonzero");const b=this.svgFactory.createElement("svg:image");b.setAttributeNS(w,"xlink:href",x),b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y",a(-S)),b.setAttributeNS(null,"width",a(u)+"px"),b.setAttributeNS(null,"height",a(S)+"px"),b.setAttributeNS(null,"transform",`scale(${a(1/u)} ${a(-1/S)})`),g?g.append(b):this._ensureTransformGroup().append(b)}paintImageMaskXObject(h){const g=this.getObject(h.data,h);if(g.bitmap){(0,n.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const u=this.current,S=g.width,x=g.height,z=u.fillColor;u.maskId=`mask${s++}`;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",u.maskId);const L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",a(S)),L.setAttributeNS(null,"height",a(x)),L.setAttributeNS(null,"fill",z),L.setAttributeNS(null,"mask",`url(#${u.maskId})`),this.defs.append(b),this._ensureTransformGroup().append(L),this.paintInlineImageXObject(g,b)}paintFormXObjectBegin(h,g){if(Array.isArray(h)&&h.length===6&&this.transform(h[0],h[1],h[2],h[3],h[4],h[5]),g){const u=g[2]-g[0],S=g[3]-g[1],x=this.svgFactory.createElement("svg:rect");x.setAttributeNS(null,"x",g[0]),x.setAttributeNS(null,"y",g[1]),x.setAttributeNS(null,"width",a(u)),x.setAttributeNS(null,"height",a(S)),this.current.element=x,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(h){const g=this.svgFactory.create(h.width,h.height),u=this.svgFactory.createElement("svg:defs");g.append(u),this.defs=u;const S=this.svgFactory.createElement("svg:g");return S.setAttributeNS(null,"transform",c(h.transform)),g.append(S),this.svg=S,g}_ensureClipGroup(){if(!this.current.clipGroup){const h=this.svgFactory.createElement("svg:g");h.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(h),this.current.clipGroup=h}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}i.SVGGraphics=D},(C,i,t)=>{var e=t(3),n=t(188),o=t(193);e({target:"Array",proto:!0},{group:function(w){var T=arguments.length>1?arguments[1]:void 0;return n(this,w,T)}}),o("group")},(C,i,t)=>{var e=t(99),n=t(14),o=t(13),m=t(40),w=t(18),T=t(64),y=t(189),f=t(108),R=Array,E=n([].push);C.exports=function(A,a,c,l){for(var s=m(A),v=o(s),D=e(a,c),P=y(null),h=T(v),g=0,u,S,x;h>g;g++)x=v[g],S=w(D(x,g,s)),S in P?E(P[S],x):P[S]=[x];if(l&&(u=l(s),u!==R))for(S in P)P[S]=f(u,P[S]);return P}},(C,i,t)=>{var e=t(47),n=t(190),o=t(66),m=t(55),w=t(192),T=t(43),y=t(54),f=">",R="<",E="prototype",A="script",a=y("IE_PROTO"),c=function(){},l=function(h){return R+A+f+h+R+"/"+A+f},s=function(h){h.write(l("")),h.close();var g=h.parentWindow.Object;return h=null,g},v=function(){var h=T("iframe"),g="java"+A+":",u;return h.style.display="none",w.appendChild(h),h.src=String(g),u=h.contentWindow.document,u.open(),u.write(l("document.F=Object")),u.close(),u.F},D,P=function(){try{D=new ActiveXObject("htmlfile")}catch{}P=typeof document<"u"?document.domain&&D?s(D):v():s(D);for(var h=o.length;h--;)delete P[E][o[h]];return P()};m[a]=!0,C.exports=Object.create||function(g,u){var S;return g!==null?(c[E]=e(g),S=new c,c[E]=null,S[a]=g):S=P(),u===void 0?S:n.f(S,u)}},(C,i,t)=>{var e=t(6),n=t(46),o=t(45),m=t(47),w=t(12),T=t(191);i.f=e&&!n?Object.defineProperties:function(f,R){m(f);for(var E=w(R),A=T(R),a=A.length,c=0,l;a>c;)o.f(f,l=A[c++],E[l]);return f}},(C,i,t)=>{var e=t(59),n=t(66);C.exports=Object.keys||function(m){return e(m,n)}},(C,i,t)=>{var e=t(24);C.exports=e("document","documentElement")},(C,i,t)=>{var e=t(34),n=t(189),o=t(45).f,m=e("unscopables"),w=Array.prototype;w[m]===void 0&&o(w,m,{configurable:!0,value:n(null)}),C.exports=function(T){w[m][T]=!0}},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0,t(89);class e{static textContent(o){const m=[],w={items:m,styles:Object.create(null)};function T(y){var E;if(!y)return;let f=null;const R=y.name;if(R==="#text")f=y.value;else if(e.shouldBuildText(R))(E=y==null?void 0:y.attributes)!=null&&E.textContent?f=y.attributes.textContent:y.value&&(f=y.value);else return;if(f!==null&&m.push({str:f}),!!y.children)for(const A of y.children)T(A)}return T(o),w}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}i.XfaText=e},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=c,i.updateTextLayer=l,t(89),t(2);var e=t(1),n=t(168);const o=1e5,m=30,w=.8,T=new Map;function y(s,v){let D;if(v&&e.FeatureTest.isOffscreenCanvasSupported)D=new OffscreenCanvas(s,s).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=s,D=P.getContext("2d",{alpha:!1})}return D}function f(s,v){const D=T.get(s);if(D)return D;const P=y(m,v);P.font=`${m}px ${s}`;const h=P.measureText("");let g=h.fontBoundingBoxAscent,u=Math.abs(h.fontBoundingBoxDescent);if(g){const x=g/(g+u);return T.set(s,x),P.canvas.width=P.canvas.height=0,x}P.strokeStyle="red",P.clearRect(0,0,m,m),P.strokeText("g",0,0);let S=P.getImageData(0,0,m,m).data;u=0;for(let x=S.length-1-3;x>=0;x-=4)if(S[x]>0){u=Math.ceil(x/4/m);break}P.clearRect(0,0,m,m),P.strokeText("A",0,m),S=P.getImageData(0,0,m,m).data,g=0;for(let x=0,z=S.length;x<z;x+=4)if(S[x]>0){g=m-Math.floor(x/4/m);break}if(P.canvas.width=P.canvas.height=0,g){const x=g/(g+u);return T.set(s,x),x}return T.set(s,w),w}function R(s,v,D){const P=document.createElement("span"),h={angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};s._textDivs.push(P);const g=e.Util.transform(s._transform,v.transform);let u=Math.atan2(g[1],g[0]);const S=D[v.fontName];S.vertical&&(u+=Math.PI/2);const x=Math.hypot(g[2],g[3]),z=x*f(S.fontFamily,s._isOffscreenCanvasSupported);let b,L;u===0?(b=g[4],L=g[5]-z):(b=g[4]+z*Math.sin(u),L=g[5]-z*Math.cos(u));const G="calc(var(--scale-factor)*",st=P.style;s._container===s._rootContainer?(st.left=`${(100*b/s._pageWidth).toFixed(2)}%`,st.top=`${(100*L/s._pageHeight).toFixed(2)}%`):(st.left=`${G}${b.toFixed(2)}px)`,st.top=`${G}${L.toFixed(2)}px)`),st.fontSize=`${G}${x.toFixed(2)}px)`,st.fontFamily=S.fontFamily,h.fontSize=x,P.setAttribute("role","presentation"),P.textContent=v.str,P.dir=v.dir,s._fontInspectorEnabled&&(P.dataset.fontName=v.fontName),u!==0&&(h.angle=u*(180/Math.PI));let _=!1;if(v.str.length>1)_=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const J=Math.abs(v.transform[0]),K=Math.abs(v.transform[3]);J!==K&&Math.max(J,K)/Math.min(J,K)>1.5&&(_=!0)}_&&(h.canvasWidth=S.vertical?v.height:v.width),s._textDivProperties.set(P,h),s._isReadableStream&&s._layoutText(P)}function E(s){const{div:v,scale:D,properties:P,ctx:h,prevFontSize:g,prevFontFamily:u}=s,{style:S}=v;let x="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:z}=S,{canvasWidth:b,fontSize:L}=P;(g!==L||u!==z)&&(h.font=`${L*D}px ${z}`,s.prevFontSize=L,s.prevFontFamily=z);const{width:G}=h.measureText(v.textContent);G>0&&(x=`scaleX(${b*D/G})`)}P.angle!==0&&(x=`rotate(${P.angle}deg) ${x}`),x.length>0&&(S.transform=x)}function A(s){if(s._canceled)return;const v=s._textDivs,D=s._capability;if(v.length>o){D.resolve();return}if(!s._isReadableStream)for(const h of v)s._layoutText(h);D.resolve()}class a{constructor(v){var st;let{textContentSource:D,container:P,viewport:h,textDivs:g,textDivProperties:u,textContentItemsStr:S,isOffscreenCanvasSupported:x}=v;this._textContentSource=D,this._isReadableStream=D instanceof ReadableStream,this._container=this._rootContainer=P,this._textDivs=g||[],this._textContentItemsStr=S||[],this._isOffscreenCanvasSupported=x,this._fontInspectorEnabled=!!((st=globalThis.FontInspector)!=null&&st.enabled),this._reader=null,this._textDivProperties=u||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:h.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:y(0,x)};const{pageWidth:z,pageHeight:b,pageX:L,pageY:G}=h.rawDims;this._transform=[1,0,0,-1,-L,G+b],this._pageWidth=z,this._pageHeight=b,(0,n.setLayerDimensions)(P,h),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(v,D){for(const P of v){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const h=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),h.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),R(this,P,D)}}_layoutText(v){const D=this._layoutTextParams.properties=this._textDivProperties.get(v);if(this._layoutTextParams.div=v,E(this._layoutTextParams),D.hasText&&this._container.append(v),D.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const v=new e.PromiseCapability;let D=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(h=>{let{value:g,done:u}=h;if(u){v.resolve();return}Object.assign(D,g.styles),this._processItems(g.items,D),P()},v.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:h}=this._textContentSource;this._processItems(P,h),v.resolve()}else throw new Error('No "textContentSource" parameter specified.');v.promise.then(()=>{D=null,A(this)},this._capability.reject)}}i.TextLayerRenderTask=a;function c(s){!s.textContentSource&&(s.textContent||s.textContentStream)&&((0,n.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),s.textContentSource=s.textContent||s.textContentStream);const{container:v,viewport:D}=s,P=getComputedStyle(v),h=P.getPropertyValue("visibility"),g=parseFloat(P.getPropertyValue("--scale-factor"));h==="visible"&&(!g||Math.abs(g-D.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const u=new a(s);return u._render(),u}function l(s){let{container:v,viewport:D,textDivs:P,textDivProperties:h,isOffscreenCanvasSupported:g,mustRotate:u=!0,mustRescale:S=!0}=s;if(u&&(0,n.setLayerDimensions)(v,{rotation:D.rotation}),S){const x=y(0,g),b={prevFontSize:null,prevFontFamily:null,div:null,scale:D.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:x};for(const L of P)b.properties=h.get(L),b.div=L,E(b)}}},(C,i,t)=>{var f,R,E,A,a,c,l,s,v,D,P,Qe,Te,Ze,je;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0,t(125),t(136),t(138),t(141),t(143),t(145),t(147);var e=t(1),n=t(164),o=t(197),m=t(202),w=t(168),T=t(203);const x=class x{constructor(b){ht(this,P);ht(this,f);ht(this,R,!1);ht(this,E,null);ht(this,A,this.pointerup.bind(this));ht(this,a,this.pointerdown.bind(this));ht(this,c,new Map);ht(this,l,!1);ht(this,s,!1);ht(this,v,!1);ht(this,D);let{uiManager:L,pageIndex:G,div:st,accessibilityManager:_,annotationLayer:J,viewport:K,l10n:it}=b;const W=[o.FreeTextEditor,m.InkEditor,T.StampEditor];if(!x._initialized){x._initialized=!0;for(const Y of W)Y.initialize(it)}L.registerEditorTypes(W),ut(this,D,L),this.pageIndex=G,this.div=st,ut(this,f,_),ut(this,E,J),this.viewport=K,r(this,D).addLayer(this)}get isEmpty(){return r(this,c).size===0}updateToolbar(b){r(this,D).updateToolbar(b)}updateMode(){let b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r(this,D).getMode();q(this,P,je).call(this),b===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),b!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",b===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",b===e.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",b===e.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(b){if(!b&&r(this,D).getMode()!==e.AnnotationEditorType.INK)return;if(!b){for(const G of r(this,c).values())if(G.isEmpty()){G.setInBackground();return}}q(this,P,Te).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(b){r(this,D).setEditingState(b)}addCommands(b){r(this,D).addCommands(b)}enable(){this.div.style.pointerEvents="auto";const b=new Set;for(const G of r(this,c).values())G.enableEditing(),G.annotationElementId&&b.add(G.annotationElementId);if(!r(this,E))return;const L=r(this,E).getEditableAnnotations();for(const G of L){if(G.hide(),r(this,D).isDeletedAnnotationElement(G.data.id)||b.has(G.data.id))continue;const st=this.deserialize(G);st&&(this.addOrRebuild(st),st.enableEditing())}}disable(){var L;ut(this,v,!0),this.div.style.pointerEvents="none";const b=new Set;for(const G of r(this,c).values()){if(G.disableEditing(),!G.annotationElementId||G.serialize()!==null){b.add(G.annotationElementId);continue}(L=this.getEditableAnnotation(G.annotationElementId))==null||L.show(),G.remove()}if(r(this,E)){const G=r(this,E).getEditableAnnotations();for(const st of G){const{id:_}=st.data;b.has(_)||r(this,D).isDeletedAnnotationElement(_)||st.show()}}q(this,P,je).call(this),this.isEmpty&&(this.div.hidden=!0),ut(this,v,!1)}getEditableAnnotation(b){var L;return((L=r(this,E))==null?void 0:L.getEditableAnnotation(b))||null}setActiveEditor(b){r(this,D).getActive()!==b&&r(this,D).setActiveEditor(b)}enableClick(){this.div.addEventListener("pointerdown",r(this,a)),this.div.addEventListener("pointerup",r(this,A))}disableClick(){this.div.removeEventListener("pointerdown",r(this,a)),this.div.removeEventListener("pointerup",r(this,A))}attach(b){r(this,c).set(b.id,b);const{annotationElementId:L}=b;L&&r(this,D).isDeletedAnnotationElement(L)&&r(this,D).removeDeletedAnnotationElement(b)}detach(b){var L;r(this,c).delete(b.id),(L=r(this,f))==null||L.removePointerInTextLayer(b.contentDiv),!r(this,v)&&b.annotationElementId&&r(this,D).addDeletedAnnotationElement(b)}remove(b){this.detach(b),r(this,D).removeEditor(b),b.div.contains(document.activeElement)&&setTimeout(()=>{r(this,D).focusMainContainer()},0),b.div.remove(),b.isAttachedToDOM=!1,r(this,s)||this.addInkEditorIfNeeded(!1)}changeParent(b){var L;b.parent!==this&&(b.annotationElementId&&(r(this,D).addDeletedAnnotationElement(b.annotationElementId),n.AnnotationEditor.deleteAnnotationElement(b),b.annotationElementId=null),this.attach(b),(L=b.parent)==null||L.detach(b),b.setParent(this),b.div&&b.isAttachedToDOM&&(b.div.remove(),this.div.append(b.div)))}add(b){if(this.changeParent(b),r(this,D).addEditor(b),this.attach(b),!b.isAttachedToDOM){const L=b.render();this.div.append(L),b.isAttachedToDOM=!0}b.fixAndSetPosition(),b.onceAdded(),r(this,D).addToAnnotationStorage(b)}moveEditorInDOM(b){var G;if(!b.isAttachedToDOM)return;const{activeElement:L}=document;b.div.contains(L)&&(b._focusEventsAllowed=!1,setTimeout(()=>{b.div.contains(document.activeElement)?b._focusEventsAllowed=!0:(b.div.addEventListener("focusin",()=>{b._focusEventsAllowed=!0},{once:!0}),L.focus())},0)),b._structTreeParentId=(G=r(this,f))==null?void 0:G.moveElementInDOM(this.div,b.div,b.contentDiv,!0)}addOrRebuild(b){b.needsToBeRebuilt()?b.rebuild():this.add(b)}addUndoableEditor(b){const L=()=>b._uiManager.rebuild(b),G=()=>{b.remove()};this.addCommands({cmd:L,undo:G,mustExec:!1})}getNextId(){return r(this,D).getId()}pasteEditor(b,L){r(this,D).updateToolbar(b),r(this,D).updateMode(b);const{offsetX:G,offsetY:st}=q(this,P,Ze).call(this),_=this.getNextId(),J=q(this,P,Qe).call(this,{parent:this,id:_,x:G,y:st,uiManager:r(this,D),isCentered:!0,...L});J&&this.add(J)}deserialize(b){switch(b.annotationType??b.annotationEditorType){case e.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(b,this,r(this,D));case e.AnnotationEditorType.INK:return m.InkEditor.deserialize(b,this,r(this,D));case e.AnnotationEditorType.STAMP:return T.StampEditor.deserialize(b,this,r(this,D))}return null}addNewEditor(){q(this,P,Te).call(this,q(this,P,Ze).call(this),!0)}setSelected(b){r(this,D).setSelected(b)}toggleSelected(b){r(this,D).toggleSelected(b)}isSelected(b){return r(this,D).isSelected(b)}unselect(b){r(this,D).unselect(b)}pointerup(b){const{isMac:L}=e.FeatureTest.platform;if(!(b.button!==0||b.ctrlKey&&L)&&b.target===this.div&&r(this,l)){if(ut(this,l,!1),!r(this,R)){ut(this,R,!0);return}if(r(this,D).getMode()===e.AnnotationEditorType.STAMP){r(this,D).unselectAll();return}q(this,P,Te).call(this,b,!1)}}pointerdown(b){if(r(this,l)){ut(this,l,!1);return}const{isMac:L}=e.FeatureTest.platform;if(b.button!==0||b.ctrlKey&&L||b.target!==this.div)return;ut(this,l,!0);const G=r(this,D).getActive();ut(this,R,!G||G.isEmpty())}findNewParent(b,L,G){const st=r(this,D).findParent(L,G);return st===null||st===this?!1:(st.changeParent(b),!0)}destroy(){var b,L;((b=r(this,D).getActive())==null?void 0:b.parent)===this&&(r(this,D).commitOrRemove(),r(this,D).setActiveEditor(null));for(const G of r(this,c).values())(L=r(this,f))==null||L.removePointerInTextLayer(G.contentDiv),G.setParent(null),G.isAttachedToDOM=!1,G.div.remove();this.div=null,r(this,c).clear(),r(this,D).removeLayer(this)}render(b){let{viewport:L}=b;this.viewport=L,(0,w.setLayerDimensions)(this.div,L);for(const G of r(this,D).getEditors(this.pageIndex))this.add(G);this.updateMode()}update(b){let{viewport:L}=b;r(this,D).commitOrRemove(),this.viewport=L,(0,w.setLayerDimensions)(this.div,{rotation:L.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:b,pageHeight:L}=this.viewport.rawDims;return[b,L]}};f=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakMap,v=new WeakMap,D=new WeakMap,P=new WeakSet,Qe=function(b){switch(r(this,D).getMode()){case e.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(b);case e.AnnotationEditorType.INK:return new m.InkEditor(b);case e.AnnotationEditorType.STAMP:return new T.StampEditor(b)}return null},Te=function(b,L){const G=this.getNextId(),st=q(this,P,Qe).call(this,{parent:this,id:G,x:b.offsetX,y:b.offsetY,uiManager:r(this,D),isCentered:L});return st&&this.add(st),st},Ze=function(){const{x:b,y:L,width:G,height:st}=this.div.getBoundingClientRect(),_=Math.max(0,b),J=Math.max(0,L),K=Math.min(window.innerWidth,b+G),it=Math.min(window.innerHeight,L+st),W=(_+K)/2-b,Y=(J+it)/2-L,[rt,$]=this.viewport.rotation%180===0?[W,Y]:[Y,W];return{offsetX:rt,offsetY:$}},je=function(){ut(this,s,!0);for(const b of r(this,c).values())b.isEmpty()&&b.remove();ut(this,s,!1)},Qt(x,"_initialized",!1);let y=x;i.AnnotationEditorLayer=y},(C,i,t)=>{var T,y,f,R,E,A,a,c,l,s,kn,Rn,wn,ge,qe,Mn,tn;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0,t(89);var e=t(1),n=t(165),o=t(164),m=t(198);const x=class x extends o.AnnotationEditor{constructor(L){super({...L,name:"freeTextEditor"});ht(this,s);ht(this,T,this.editorDivBlur.bind(this));ht(this,y,this.editorDivFocus.bind(this));ht(this,f,this.editorDivInput.bind(this));ht(this,R,this.editorDivKeydown.bind(this));ht(this,E);ht(this,A,"");ht(this,a,`${this.id}-editor`);ht(this,c);ht(this,l,null);ut(this,E,L.color||x._defaultColor||o.AnnotationEditor._defaultLineColor),ut(this,c,L.fontSize||x._defaultFontSize)}static get _keyboardManager(){const L=x.prototype,G=J=>J.isEmpty(),st=n.AnnotationEditorUIManager.TRANSLATE_SMALL,_=n.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new n.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],L.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],L.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],L._translateEmpty,{args:[-st,0],checker:G}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],L._translateEmpty,{args:[-_,0],checker:G}],[["ArrowRight","mac+ArrowRight"],L._translateEmpty,{args:[st,0],checker:G}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],L._translateEmpty,{args:[_,0],checker:G}],[["ArrowUp","mac+ArrowUp"],L._translateEmpty,{args:[0,-st],checker:G}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],L._translateEmpty,{args:[0,-_],checker:G}],[["ArrowDown","mac+ArrowDown"],L._translateEmpty,{args:[0,st],checker:G}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],L._translateEmpty,{args:[0,_],checker:G}]]))}static initialize(L){o.AnnotationEditor.initialize(L,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const G=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(G.getPropertyValue("--freetext-padding"))}static updateDefaultParams(L,G){switch(L){case e.AnnotationEditorParamsType.FREETEXT_SIZE:x._defaultFontSize=G;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:x._defaultColor=G;break}}updateParams(L,G){switch(L){case e.AnnotationEditorParamsType.FREETEXT_SIZE:q(this,s,kn).call(this,G);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:q(this,s,Rn).call(this,G);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,x._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,x._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,r(this,c)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,r(this,E)]]}_translateEmpty(L,G){this._uiManager.translateSelectedEditors(L,G,!0)}getInitialTranslation(){const L=this.parentScale;return[-x._internalPadding*L,-(x._internalPadding+r(this,c))*L]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",r(this,R)),this.editorDiv.addEventListener("focus",r(this,y)),this.editorDiv.addEventListener("blur",r(this,T)),this.editorDiv.addEventListener("input",r(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",r(this,a)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",r(this,R)),this.editorDiv.removeEventListener("focus",r(this,y)),this.editorDiv.removeEventListener("blur",r(this,T)),this.editorDiv.removeEventListener("input",r(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(L){this._focusEventsAllowed&&(super.focusin(L),L.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var L;if(this.width){q(this,s,tn).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(L=this._initialOptions)!=null&&L.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const L=r(this,A),G=ut(this,A,q(this,s,wn).call(this).trimEnd());if(L===G)return;const st=_=>{if(ut(this,A,_),!_){this.remove();return}q(this,s,qe).call(this),this._uiManager.rebuild(this),q(this,s,ge).call(this)};this.addCommands({cmd:()=>{st(G)},undo:()=>{st(L)},mustExec:!1}),q(this,s,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(L){this.enterInEditMode()}keydown(L){L.target===this.div&&L.key==="Enter"&&(this.enterInEditMode(),L.preventDefault())}editorDivKeydown(L){x._keyboardManager.exec(this,L)}editorDivFocus(L){this.isEditing=!0}editorDivBlur(L){this.isEditing=!1}editorDivInput(L){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let L,G;this.width&&(L=this.x,G=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",r(this,a)),this.enableEditing(),o.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(_=>{var J;return(J=this.editorDiv)==null?void 0:J.setAttribute("aria-label",_)}),o.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(_=>{var J;return(J=this.editorDiv)==null?void 0:J.setAttribute("default-content",_)}),this.editorDiv.contentEditable=!0;const{style:st}=this.editorDiv;if(st.fontSize=`calc(${r(this,c)}px * var(--scale-factor))`,st.color=r(this,E),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,n.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[_,J]=this.parentDimensions;if(this.annotationElementId){const{position:K}=r(this,l);let[it,W]=this.getInitialTranslation();[it,W]=this.pageTranslationToScreen(it,W);const[Y,rt]=this.pageDimensions,[$,d]=this.pageTranslation;let p,M;switch(this.rotation){case 0:p=L+(K[0]-$)/Y,M=G+this.height-(K[1]-d)/rt;break;case 90:p=L+(K[0]-$)/Y,M=G-(K[1]-d)/rt,[it,W]=[W,-it];break;case 180:p=L-this.width+(K[0]-$)/Y,M=G-(K[1]-d)/rt,[it,W]=[-it,-W];break;case 270:p=L+(K[0]-$-this.height*rt)/Y,M=G+(K[1]-d-this.width*Y)/rt,[it,W]=[-W,it];break}this.setAt(p*_,M*J,it,W)}else this.setAt(L*_,G*J,this.width*_,this.height*J);q(this,s,qe).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(L,G,st){let _=null;if(L instanceof m.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:K,fontColor:it},rect:W,rotation:Y,id:rt},textContent:$,textPosition:d,parent:{page:{pageNumber:p}}}=L;if(!$||$.length===0)return null;_=L={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(it),fontSize:K,value:$.join(`
`),position:d,pageIndex:p-1,rect:W,rotation:Y,id:rt,deleted:!1}}const J=super.deserialize(L,G,st);return ut(J,c,L.fontSize),ut(J,E,e.Util.makeHexColor(...L.color)),ut(J,A,L.value),J.annotationElementId=L.id||null,ut(J,l,_),J}serialize(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const G=x._internalPadding*this.parentScale,st=this.getRect(G,G),_=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:r(this,E)),J={annotationType:e.AnnotationEditorType.FREETEXT,color:_,fontSize:r(this,c),value:r(this,A),pageIndex:this.pageIndex,rect:st,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return L?J:this.annotationElementId&&!q(this,s,Mn).call(this,J)?null:(J.id=this.annotationElementId,J)}};T=new WeakMap,y=new WeakMap,f=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakSet,kn=function(L){const G=_=>{this.editorDiv.style.fontSize=`calc(${_}px * var(--scale-factor))`,this.translate(0,-(_-r(this,c))*this.parentScale),ut(this,c,_),q(this,s,ge).call(this)},st=r(this,c);this.addCommands({cmd:()=>{G(L)},undo:()=>{G(st)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Rn=function(L){const G=r(this,E);this.addCommands({cmd:()=>{ut(this,E,this.editorDiv.style.color=L)},undo:()=>{ut(this,E,this.editorDiv.style.color=G)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},wn=function(){const L=this.editorDiv.getElementsByTagName("div");if(L.length===0)return this.editorDiv.innerText;const G=[];for(const st of L)G.push(st.innerText.replace(/\r\n?|\n/,""));return G.join(`
`)},ge=function(){const[L,G]=this.parentDimensions;let st;if(this.isAttachedToDOM)st=this.div.getBoundingClientRect();else{const{currentLayer:_,div:J}=this,K=J.style.display;J.style.display="hidden",_.div.append(this.div),st=J.getBoundingClientRect(),J.remove(),J.style.display=K}this.rotation%180===this.parentRotation%180?(this.width=st.width/L,this.height=st.height/G):(this.width=st.height/L,this.height=st.width/G),this.fixAndSetPosition()},qe=function(){if(this.editorDiv.replaceChildren(),!!r(this,A))for(const L of r(this,A).split(`
`)){const G=document.createElement("div");G.append(L?document.createTextNode(L):document.createElement("br")),this.editorDiv.append(G)}},Mn=function(L){const{value:G,fontSize:st,color:_,rect:J,pageIndex:K}=r(this,l);return L.value!==G||L.fontSize!==st||L.rect.some((it,W)=>Math.abs(it-J[W])>=1)||L.color.some((it,W)=>it!==_[W])||L.pageIndex!==K},tn=function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.annotationElementId)return;if(q(this,s,ge).call(this),!L&&(this.width===0||this.height===0)){setTimeout(()=>q(this,s,tn).call(this,!0),0);return}const G=x._internalPadding*this.parentScale;r(this,l).rect=this.getRect(G,G)},Qt(x,"_freeTextDefaultContent",""),Qt(x,"_internalPadding",0),Qt(x,"_defaultColor",null),Qt(x,"_defaultFontSize",10),Qt(x,"_type","freetext");let w=x;i.FreeTextEditor=w},(C,i,t)=>{var M,F,se,Fn,H,et,dt,gt,At,bt,nt,ft,U,V,tt,lt,mt,xt,Et,at,kt,wt,In,Ce,en,nn,Bt,Gt,Kt,Yt,Tt,ot,ct,rn,Wt,k,Z,vt,On,sn;Object.defineProperty(i,"__esModule",{value:!0}),i.StampAnnotationElement=i.InkAnnotationElement=i.FreeTextAnnotationElement=i.AnnotationLayer=void 0,t(89),t(125),t(136),t(138),t(141),t(143),t(145),t(147);var e=t(1),n=t(168),o=t(163),m=t(199),w=t(200),T=t(201);const y=1e3,f=9,R=new WeakSet;function E(Pt){return{width:Pt[2]-Pt[0],height:Pt[3]-Pt[1]}}class A{static create(O){switch(O.data.annotationType){case e.AnnotationType.LINK:return new c(O);case e.AnnotationType.TEXT:return new l(O);case e.AnnotationType.WIDGET:switch(O.data.fieldType){case"Tx":return new v(O);case"Btn":return O.data.radioButton?new h(O):O.data.checkBox?new P(O):new g(O);case"Ch":return new u(O);case"Sig":return new D(O)}return new s(O);case e.AnnotationType.POPUP:return new S(O);case e.AnnotationType.FREETEXT:return new z(O);case e.AnnotationType.LINE:return new b(O);case e.AnnotationType.SQUARE:return new L(O);case e.AnnotationType.CIRCLE:return new G(O);case e.AnnotationType.POLYLINE:return new st(O);case e.AnnotationType.CARET:return new J(O);case e.AnnotationType.INK:return new K(O);case e.AnnotationType.POLYGON:return new _(O);case e.AnnotationType.HIGHLIGHT:return new it(O);case e.AnnotationType.UNDERLINE:return new W(O);case e.AnnotationType.SQUIGGLY:return new Y(O);case e.AnnotationType.STRIKEOUT:return new rt(O);case e.AnnotationType.STAMP:return new $(O);case e.AnnotationType.FILEATTACHMENT:return new d(O);default:return new a(O)}}}const N=class N{constructor(O){ht(this,M,!1);let{isRenderable:B=!1,ignoreBorder:Q=!1,createQuadrilaterals:j=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=B,this.data=O.data,this.layer=O.layer,this.linkService=O.linkService,this.downloadManager=O.downloadManager,this.imageResourcesPath=O.imageResourcesPath,this.renderForms=O.renderForms,this.svgFactory=O.svgFactory,this.annotationStorage=O.annotationStorage,this.enableScripting=O.enableScripting,this.hasJSActions=O.hasJSActions,this._fieldObjects=O.fieldObjects,this.parent=O.parent,B&&(this.container=this._createContainer(Q)),j&&this._createQuadrilaterals()}static _hasPopupData(O){let{titleObj:B,contentsObj:Q,richText:j}=O;return!!(B!=null&&B.str||Q!=null&&Q.str||j!=null&&j.str)}get hasPopupData(){return N._hasPopupData(this.data)}_createContainer(O){const{data:B,parent:{page:Q,viewport:j}}=this,pt=document.createElement("section");pt.setAttribute("data-annotation-id",B.id),this instanceof s||(pt.tabIndex=y),pt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&pt.setAttribute("aria-haspopup","dialog"),B.noRotate&&pt.classList.add("norotate");const{pageWidth:yt,pageHeight:St,pageX:Dt,pageY:Ut}=j.rawDims;if(!B.rect||this instanceof S){const{rotation:Vt}=B;return!B.hasOwnCanvas&&Vt!==0&&this.setRotation(Vt,pt),pt}const{width:Mt,height:zt}=E(B.rect),Ot=e.Util.normalizeRect([B.rect[0],Q.view[3]-B.rect[1]+Q.view[1],B.rect[2],Q.view[3]-B.rect[3]+Q.view[1]]);if(!O&&B.borderStyle.width>0){pt.style.borderWidth=`${B.borderStyle.width}px`;const Vt=B.borderStyle.horizontalCornerRadius,Ht=B.borderStyle.verticalCornerRadius;if(Vt>0||Ht>0){const Jt=`calc(${Vt}px * var(--scale-factor)) / calc(${Ht}px * var(--scale-factor))`;pt.style.borderRadius=Jt}else if(this instanceof h){const Jt=`calc(${Mt}px * var(--scale-factor)) / calc(${zt}px * var(--scale-factor))`;pt.style.borderRadius=Jt}switch(B.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:pt.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:pt.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:pt.style.borderBottomStyle="solid";break}const _t=B.borderColor||null;_t?(ut(this,M,!0),pt.style.borderColor=e.Util.makeHexColor(_t[0]|0,_t[1]|0,_t[2]|0)):pt.style.borderWidth=0}pt.style.left=`${100*(Ot[0]-Dt)/yt}%`,pt.style.top=`${100*(Ot[1]-Ut)/St}%`;const{rotation:Nt}=B;return B.hasOwnCanvas||Nt===0?(pt.style.width=`${100*Mt/yt}%`,pt.style.height=`${100*zt/St}%`):this.setRotation(Nt,pt),pt}setRotation(O){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:Q,pageHeight:j}=this.parent.viewport.rawDims,{width:pt,height:yt}=E(this.data.rect);let St,Dt;O%180===0?(St=100*pt/Q,Dt=100*yt/j):(St=100*yt/Q,Dt=100*pt/j),B.style.width=`${St}%`,B.style.height=`${Dt}%`,B.setAttribute("data-main-rotation",(360-O)%360)}get _commonActions(){const O=(B,Q,j)=>{const pt=j.detail[B],yt=pt[0],St=pt.slice(1);j.target.style[Q]=m.ColorConverters[`${yt}_HTML`](St),this.annotationStorage.setValue(this.data.id,{[Q]:m.ColorConverters[`${yt}_rgb`](St)})};return(0,e.shadow)(this,"_commonActions",{display:B=>{const{display:Q}=B.detail,j=Q%2===1;this.container.style.visibility=j?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:j,noPrint:Q===1||Q===2})},print:B=>{this.annotationStorage.setValue(this.data.id,{noPrint:!B.detail.print})},hidden:B=>{const{hidden:Q}=B.detail;this.container.style.visibility=Q?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Q,noView:Q})},focus:B=>{setTimeout(()=>B.target.focus({preventScroll:!1}),0)},userName:B=>{B.target.title=B.detail.userName},readonly:B=>{B.target.disabled=B.detail.readonly},required:B=>{this._setRequired(B.target,B.detail.required)},bgColor:B=>{O("bgColor","backgroundColor",B)},fillColor:B=>{O("fillColor","backgroundColor",B)},fgColor:B=>{O("fgColor","color",B)},textColor:B=>{O("textColor","color",B)},borderColor:B=>{O("borderColor","borderColor",B)},strokeColor:B=>{O("strokeColor","borderColor",B)},rotation:B=>{const Q=B.detail.rotation;this.setRotation(Q),this.annotationStorage.setValue(this.data.id,{rotation:Q})}})}_dispatchEventFromSandbox(O,B){const Q=this._commonActions;for(const j of Object.keys(B.detail)){const pt=O[j]||Q[j];pt==null||pt(B)}}_setDefaultPropertiesFromJS(O){if(!this.enableScripting)return;const B=this.annotationStorage.getRawValue(this.data.id);if(!B)return;const Q=this._commonActions;for(const[j,pt]of Object.entries(B)){const yt=Q[j];if(yt){const St={detail:{[j]:pt},target:O};yt(St),delete B[j]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:O}=this.data;if(!O)return;const[B,Q,j,pt]=this.data.rect;if(O.length===1){const[,{x:Ht,y:_t},{x:Jt,y:jt}]=O[0];if(j===Ht&&pt===_t&&B===Jt&&Q===jt)return}const{style:yt}=this.container;let St;if(r(this,M)){const{borderColor:Ht,borderWidth:_t}=yt;yt.borderWidth=0,St=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ht}" stroke-width="${_t}">`],this.container.classList.add("hasBorder")}const Dt=j-B,Ut=pt-Q,{svgFactory:Mt}=this,zt=Mt.createElement("svg");zt.classList.add("quadrilateralsContainer"),zt.setAttribute("width",0),zt.setAttribute("height",0);const Ot=Mt.createElement("defs");zt.append(Ot);const Nt=Mt.createElement("clipPath"),Vt=`clippath_${this.data.id}`;Nt.setAttribute("id",Vt),Nt.setAttribute("clipPathUnits","objectBoundingBox"),Ot.append(Nt);for(const[,{x:Ht,y:_t},{x:Jt,y:jt}]of O){const Zt=Mt.createElement("rect"),te=(Jt-B)/Dt,ne=(pt-_t)/Ut,re=(Ht-Jt)/Dt,pn=(_t-jt)/Ut;Zt.setAttribute("x",te),Zt.setAttribute("y",ne),Zt.setAttribute("width",re),Zt.setAttribute("height",pn),Nt.append(Zt),St==null||St.push(`<rect vector-effect="non-scaling-stroke" x="${te}" y="${ne}" width="${re}" height="${pn}"/>`)}r(this,M)&&(St.push("</g></svg>')"),yt.backgroundImage=St.join("")),this.container.append(zt),this.container.style.clipPath=`url(#${Vt})`}_createPopup(){const{container:O,data:B}=this;O.setAttribute("aria-haspopup","dialog");const Q=new S({data:{color:B.color,titleObj:B.titleObj,modificationDate:B.modificationDate,contentsObj:B.contentsObj,richText:B.richText,parentRect:B.rect,borderStyle:0,id:`popup_${B.id}`,rotation:B.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Q.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(O){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const Q=[];if(this._fieldObjects){const j=this._fieldObjects[O];if(j)for(const{page:pt,id:yt,exportValues:St}of j){if(pt===-1||yt===B)continue;const Dt=typeof St=="string"?St:null,Ut=document.querySelector(`[data-element-id="${yt}"]`);if(Ut&&!R.has(Ut)){(0,e.warn)(`_getElementsByName - element not allowed: ${yt}`);continue}Q.push({id:yt,exportValue:Dt,domElement:Ut})}return Q}for(const j of document.getElementsByName(O)){const{exportValue:pt}=j,yt=j.getAttribute("data-element-id");yt!==B&&R.has(j)&&Q.push({id:yt,exportValue:pt,domElement:j})}return Q}show(){var O;this.container&&(this.container.hidden=!1),(O=this.popup)==null||O.maybeShow()}hide(){var O;this.container&&(this.container.hidden=!0),(O=this.popup)==null||O.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const O=this.getElementsToTriggerPopup();if(Array.isArray(O))for(const B of O)B.classList.add("highlightArea");else O.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:O,data:{id:B}}=this;this.container.addEventListener("dblclick",()=>{var Q;(Q=this.linkService.eventBus)==null||Q.dispatch("switchannotationeditormode",{source:this,mode:O,editId:B})})}};M=new WeakMap;let a=N;class c extends a{constructor(B){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(B,{isRenderable:!0,ignoreBorder:!!(Q!=null&&Q.ignoreBorder),createQuadrilaterals:!0});ht(this,F);this.isTooltipOnly=B.data.isTooltipOnly}render(){const{data:B,linkService:Q}=this,j=document.createElement("a");j.setAttribute("data-element-id",B.id);let pt=!1;return B.url?(Q.addLinkAttributes(j,B.url,B.newWindow),pt=!0):B.action?(this._bindNamedAction(j,B.action),pt=!0):B.attachment?(this._bindAttachment(j,B.attachment),pt=!0):B.setOCGState?(q(this,F,Fn).call(this,j,B.setOCGState),pt=!0):B.dest?(this._bindLink(j,B.dest),pt=!0):(B.actions&&(B.actions.Action||B.actions["Mouse Up"]||B.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(j,B),pt=!0),B.resetForm?(this._bindResetFormAction(j,B.resetForm),pt=!0):this.isTooltipOnly&&!pt&&(this._bindLink(j,""),pt=!0)),this.container.classList.add("linkAnnotation"),pt&&this.container.append(j),this.container}_bindLink(B,Q){B.href=this.linkService.getDestinationHash(Q),B.onclick=()=>(Q&&this.linkService.goToDestination(Q),!1),(Q||Q==="")&&q(this,F,se).call(this)}_bindNamedAction(B,Q){B.href=this.linkService.getAnchorUrl(""),B.onclick=()=>(this.linkService.executeNamedAction(Q),!1),q(this,F,se).call(this)}_bindAttachment(B,Q){B.href=this.linkService.getAnchorUrl(""),B.onclick=()=>{var j;return(j=this.downloadManager)==null||j.openOrDownloadData(this.container,Q.content,Q.filename),!1},q(this,F,se).call(this)}_bindJSAction(B,Q){B.href=this.linkService.getAnchorUrl("");const j=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const pt of Object.keys(Q.actions)){const yt=j.get(pt);yt&&(B[yt]=()=>{var St;return(St=this.linkService.eventBus)==null||St.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Q.id,name:pt}}),!1})}B.onclick||(B.onclick=()=>!1),q(this,F,se).call(this)}_bindResetFormAction(B,Q){const j=B.onclick;if(j||(B.href=this.linkService.getAnchorUrl("")),q(this,F,se).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),j||(B.onclick=()=>!1);return}B.onclick=()=>{var zt;j==null||j();const{fields:pt,refs:yt,include:St}=Q,Dt=[];if(pt.length!==0||yt.length!==0){const Ot=new Set(yt);for(const Nt of pt){const Vt=this._fieldObjects[Nt]||[];for(const{id:Ht}of Vt)Ot.add(Ht)}for(const Nt of Object.values(this._fieldObjects))for(const Vt of Nt)Ot.has(Vt.id)===St&&Dt.push(Vt)}else for(const Ot of Object.values(this._fieldObjects))Dt.push(...Ot);const Ut=this.annotationStorage,Mt=[];for(const Ot of Dt){const{id:Nt}=Ot;switch(Mt.push(Nt),Ot.type){case"text":{const Ht=Ot.defaultValue||"";Ut.setValue(Nt,{value:Ht});break}case"checkbox":case"radiobutton":{const Ht=Ot.defaultValue===Ot.exportValues;Ut.setValue(Nt,{value:Ht});break}case"combobox":case"listbox":{const Ht=Ot.defaultValue||"";Ut.setValue(Nt,{value:Ht});break}default:continue}const Vt=document.querySelector(`[data-element-id="${Nt}"]`);if(Vt){if(!R.has(Vt)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Nt}`);continue}}else continue;Vt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((zt=this.linkService.eventBus)==null||zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Mt,name:"ResetForm"}})),!1}}}F=new WeakSet,se=function(){this.container.setAttribute("data-internal-link","")},Fn=function(B,Q){B.href=this.linkService.getAnchorUrl(""),B.onclick=()=>(this.linkService.executeSetOCGState(Q),!1),q(this,F,se).call(this)};class l extends a{constructor(O){super(O,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const O=document.createElement("img");return O.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",O.alt="[{{type}} Annotation]",O.dataset.l10nId="text_annotation_type",O.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(O),this.container}}class s extends a{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(O){var B;this.data.hasOwnCanvas&&(((B=O.previousSibling)==null?void 0:B.nodeName)==="CANVAS"&&(O.previousSibling.hidden=!0),O.hidden=!1)}_getKeyModifier(O){const{isWin:B,isMac:Q}=e.FeatureTest.platform;return B&&O.ctrlKey||Q&&O.metaKey}_setEventListener(O,B,Q,j,pt){Q.includes("mouse")?O.addEventListener(Q,yt=>{var St;(St=this.linkService.eventBus)==null||St.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:pt(yt),shift:yt.shiftKey,modifier:this._getKeyModifier(yt)}})}):O.addEventListener(Q,yt=>{var St;if(Q==="blur"){if(!B.focused||!yt.relatedTarget)return;B.focused=!1}else if(Q==="focus"){if(B.focused)return;B.focused=!0}pt&&((St=this.linkService.eventBus)==null||St.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:j,value:pt(yt)}}))})}_setEventListeners(O,B,Q,j){var pt,yt,St;for(const[Dt,Ut]of Q)(Ut==="Action"||(pt=this.data.actions)!=null&&pt[Ut])&&((Ut==="Focus"||Ut==="Blur")&&(B||(B={focused:!1})),this._setEventListener(O,B,Dt,Ut,j),Ut==="Focus"&&!((yt=this.data.actions)!=null&&yt.Blur)?this._setEventListener(O,B,"blur","Blur",null):Ut==="Blur"&&!((St=this.data.actions)!=null&&St.Focus)&&this._setEventListener(O,B,"focus","Focus",null))}_setBackgroundColor(O){const B=this.data.backgroundColor||null;O.style.backgroundColor=B===null?"transparent":e.Util.makeHexColor(B[0],B[1],B[2])}_setTextStyle(O){const B=["left","center","right"],{fontColor:Q}=this.data.defaultAppearanceData,j=this.data.defaultAppearanceData.fontSize||f,pt=O.style;let yt;const St=2,Dt=Ut=>Math.round(10*Ut)/10;if(this.data.multiLine){const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]-St),Mt=Math.round(Ut/(e.LINE_FACTOR*j))||1,zt=Ut/Mt;yt=Math.min(j,Dt(zt/e.LINE_FACTOR))}else{const Ut=Math.abs(this.data.rect[3]-this.data.rect[1]-St);yt=Math.min(j,Dt(Ut/e.LINE_FACTOR))}pt.fontSize=`calc(${yt}px * var(--scale-factor))`,pt.color=e.Util.makeHexColor(Q[0],Q[1],Q[2]),this.data.textAlignment!==null&&(pt.textAlign=B[this.data.textAlignment])}_setRequired(O,B){B?O.setAttribute("required",!0):O.removeAttribute("required"),O.setAttribute("aria-required",B)}}class v extends s{constructor(O){const B=O.renderForms||!O.data.hasAppearance&&!!O.data.fieldValue;super(O,{isRenderable:B})}setPropertyOnSiblings(O,B,Q,j){const pt=this.annotationStorage;for(const yt of this._getElementsByName(O.name,O.id))yt.domElement&&(yt.domElement[B]=Q),pt.setValue(yt.id,{[j]:Q})}render(){var j,pt;const O=this.annotationStorage,B=this.data.id;this.container.classList.add("textWidgetAnnotation");let Q=null;if(this.renderForms){const yt=O.getValue(B,{value:this.data.fieldValue});let St=yt.value||"";const Dt=O.getValue(B,{charLimit:this.data.maxLen}).charLimit;Dt&&St.length>Dt&&(St=St.slice(0,Dt));let Ut=yt.formattedValue||((j=this.data.textContent)==null?void 0:j.join(`
`))||null;Ut&&this.data.comb&&(Ut=Ut.replaceAll(/\s+/g,""));const Mt={userValue:St,formattedValue:Ut,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Q=document.createElement("textarea"),Q.textContent=Ut??St,this.data.doNotScroll&&(Q.style.overflowY="hidden")):(Q=document.createElement("input"),Q.type="text",Q.setAttribute("value",Ut??St),this.data.doNotScroll&&(Q.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Q.hidden=!0),R.add(Q),Q.setAttribute("data-element-id",B),Q.disabled=this.data.readOnly,Q.name=this.data.fieldName,Q.tabIndex=y,this._setRequired(Q,this.data.required),Dt&&(Q.maxLength=Dt),Q.addEventListener("input",Ot=>{O.setValue(B,{value:Ot.target.value}),this.setPropertyOnSiblings(Q,"value",Ot.target.value,"value"),Mt.formattedValue=null}),Q.addEventListener("resetform",Ot=>{const Nt=this.data.defaultFieldValue??"";Q.value=Mt.userValue=Nt,Mt.formattedValue=null});let zt=Ot=>{const{formattedValue:Nt}=Mt;Nt!=null&&(Ot.target.value=Nt),Ot.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Q.addEventListener("focus",Nt=>{if(Mt.focused)return;const{target:Vt}=Nt;Mt.userValue&&(Vt.value=Mt.userValue),Mt.lastCommittedValue=Vt.value,Mt.commitKey=1,Mt.focused=!0}),Q.addEventListener("updatefromsandbox",Nt=>{this.showElementAndHideCanvas(Nt.target);const Vt={value(Ht){Mt.userValue=Ht.detail.value??"",O.setValue(B,{value:Mt.userValue.toString()}),Ht.target.value=Mt.userValue},formattedValue(Ht){const{formattedValue:_t}=Ht.detail;Mt.formattedValue=_t,_t!=null&&Ht.target!==document.activeElement&&(Ht.target.value=_t),O.setValue(B,{formattedValue:_t})},selRange(Ht){Ht.target.setSelectionRange(...Ht.detail.selRange)},charLimit:Ht=>{var Zt;const{charLimit:_t}=Ht.detail,{target:Jt}=Ht;if(_t===0){Jt.removeAttribute("maxLength");return}Jt.setAttribute("maxLength",_t);let jt=Mt.userValue;!jt||jt.length<=_t||(jt=jt.slice(0,_t),Jt.value=Mt.userValue=jt,O.setValue(B,{value:jt}),(Zt=this.linkService.eventBus)==null||Zt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:jt,willCommit:!0,commitKey:1,selStart:Jt.selectionStart,selEnd:Jt.selectionEnd}}))}};this._dispatchEventFromSandbox(Vt,Nt)}),Q.addEventListener("keydown",Nt=>{var _t;Mt.commitKey=1;let Vt=-1;if(Nt.key==="Escape"?Vt=0:Nt.key==="Enter"&&!this.data.multiLine?Vt=2:Nt.key==="Tab"&&(Mt.commitKey=3),Vt===-1)return;const{value:Ht}=Nt.target;Mt.lastCommittedValue!==Ht&&(Mt.lastCommittedValue=Ht,Mt.userValue=Ht,(_t=this.linkService.eventBus)==null||_t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:Ht,willCommit:!0,commitKey:Vt,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}}))});const Ot=zt;zt=null,Q.addEventListener("blur",Nt=>{var Ht;if(!Mt.focused||!Nt.relatedTarget)return;Mt.focused=!1;const{value:Vt}=Nt.target;Mt.userValue=Vt,Mt.lastCommittedValue!==Vt&&((Ht=this.linkService.eventBus)==null||Ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:Vt,willCommit:!0,commitKey:Mt.commitKey,selStart:Nt.target.selectionStart,selEnd:Nt.target.selectionEnd}})),Ot(Nt)}),(pt=this.data.actions)!=null&&pt.Keystroke&&Q.addEventListener("beforeinput",Nt=>{var ne;Mt.lastCommittedValue=null;const{data:Vt,target:Ht}=Nt,{value:_t,selectionStart:Jt,selectionEnd:jt}=Ht;let Zt=Jt,te=jt;switch(Nt.inputType){case"deleteWordBackward":{const re=_t.substring(0,Jt).match(/\w*[^\w]*$/);re&&(Zt-=re[0].length);break}case"deleteWordForward":{const re=_t.substring(Jt).match(/^[^\w]*\w*/);re&&(te+=re[0].length);break}case"deleteContentBackward":Jt===jt&&(Zt-=1);break;case"deleteContentForward":Jt===jt&&(te+=1);break}Nt.preventDefault(),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:_t,change:Vt||"",willCommit:!1,selStart:Zt,selEnd:te}})}),this._setEventListeners(Q,Mt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Nt=>Nt.target.value)}if(zt&&Q.addEventListener("blur",zt),this.data.comb){const Nt=(this.data.rect[2]-this.data.rect[0])/Dt;Q.classList.add("comb"),Q.style.letterSpacing=`calc(${Nt}px * var(--scale-factor) - 1ch)`}}else Q=document.createElement("div"),Q.textContent=this.data.fieldValue,Q.style.verticalAlign="middle",Q.style.display="table-cell";return this._setTextStyle(Q),this._setBackgroundColor(Q),this._setDefaultPropertiesFromJS(Q),this.container.append(Q),this.container}}class D extends s{constructor(O){super(O,{isRenderable:!!O.data.hasOwnCanvas})}}class P extends s{constructor(O){super(O,{isRenderable:O.renderForms})}render(){const O=this.annotationStorage,B=this.data,Q=B.id;let j=O.getValue(Q,{value:B.exportValue===B.fieldValue}).value;typeof j=="string"&&(j=j!=="Off",O.setValue(Q,{value:j})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const pt=document.createElement("input");return R.add(pt),pt.setAttribute("data-element-id",Q),pt.disabled=B.readOnly,this._setRequired(pt,this.data.required),pt.type="checkbox",pt.name=B.fieldName,j&&pt.setAttribute("checked",!0),pt.setAttribute("exportValue",B.exportValue),pt.tabIndex=y,pt.addEventListener("change",yt=>{const{name:St,checked:Dt}=yt.target;for(const Ut of this._getElementsByName(St,Q)){const Mt=Dt&&Ut.exportValue===B.exportValue;Ut.domElement&&(Ut.domElement.checked=Mt),O.setValue(Ut.id,{value:Mt})}O.setValue(Q,{value:Dt})}),pt.addEventListener("resetform",yt=>{const St=B.defaultFieldValue||"Off";yt.target.checked=St===B.exportValue}),this.enableScripting&&this.hasJSActions&&(pt.addEventListener("updatefromsandbox",yt=>{const St={value(Dt){Dt.target.checked=Dt.detail.value!=="Off",O.setValue(Q,{value:Dt.target.checked})}};this._dispatchEventFromSandbox(St,yt)}),this._setEventListeners(pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],yt=>yt.target.checked)),this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class h extends s{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const O=this.annotationStorage,B=this.data,Q=B.id;let j=O.getValue(Q,{value:B.fieldValue===B.buttonValue}).value;typeof j=="string"&&(j=j!==B.buttonValue,O.setValue(Q,{value:j}));const pt=document.createElement("input");if(R.add(pt),pt.setAttribute("data-element-id",Q),pt.disabled=B.readOnly,this._setRequired(pt,this.data.required),pt.type="radio",pt.name=B.fieldName,j&&pt.setAttribute("checked",!0),pt.tabIndex=y,pt.addEventListener("change",yt=>{const{name:St,checked:Dt}=yt.target;for(const Ut of this._getElementsByName(St,Q))O.setValue(Ut.id,{value:!1});O.setValue(Q,{value:Dt})}),pt.addEventListener("resetform",yt=>{const St=B.defaultFieldValue;yt.target.checked=St!=null&&St===B.buttonValue}),this.enableScripting&&this.hasJSActions){const yt=B.buttonValue;pt.addEventListener("updatefromsandbox",St=>{const Dt={value:Ut=>{const Mt=yt===Ut.detail.value;for(const zt of this._getElementsByName(Ut.target.name)){const Ot=Mt&&zt.id===Q;zt.domElement&&(zt.domElement.checked=Ot),O.setValue(zt.id,{value:Ot})}}};this._dispatchEventFromSandbox(Dt,St)}),this._setEventListeners(pt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],St=>St.target.checked)}return this._setBackgroundColor(pt),this._setDefaultPropertiesFromJS(pt),this.container.append(pt),this.container}}class g extends c{constructor(O){super(O,{ignoreBorder:O.data.hasAppearance})}render(){const O=super.render();O.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(O.title=this.data.alternativeText);const B=O.lastChild;return this.enableScripting&&this.hasJSActions&&B&&(this._setDefaultPropertiesFromJS(B),B.addEventListener("updatefromsandbox",Q=>{this._dispatchEventFromSandbox({},Q)})),O}}class u extends s{constructor(O){super(O,{isRenderable:O.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const O=this.annotationStorage,B=this.data.id,Q=O.getValue(B,{value:this.data.fieldValue}),j=document.createElement("select");R.add(j),j.setAttribute("data-element-id",B),j.disabled=this.data.readOnly,this._setRequired(j,this.data.required),j.name=this.data.fieldName,j.tabIndex=y;let pt=this.data.combo&&this.data.options.length>0;this.data.combo||(j.size=this.data.options.length,this.data.multiSelect&&(j.multiple=!0)),j.addEventListener("resetform",Mt=>{const zt=this.data.defaultFieldValue;for(const Ot of j.options)Ot.selected=Ot.value===zt});for(const Mt of this.data.options){const zt=document.createElement("option");zt.textContent=Mt.displayValue,zt.value=Mt.exportValue,Q.value.includes(Mt.exportValue)&&(zt.setAttribute("selected",!0),pt=!1),j.append(zt)}let yt=null;if(pt){const Mt=document.createElement("option");Mt.value=" ",Mt.setAttribute("hidden",!0),Mt.setAttribute("selected",!0),j.prepend(Mt),yt=()=>{Mt.remove(),j.removeEventListener("input",yt),yt=null},j.addEventListener("input",yt)}const St=Mt=>{const zt=Mt?"value":"textContent",{options:Ot,multiple:Nt}=j;return Nt?Array.prototype.filter.call(Ot,Vt=>Vt.selected).map(Vt=>Vt[zt]):Ot.selectedIndex===-1?null:Ot[Ot.selectedIndex][zt]};let Dt=St(!1);const Ut=Mt=>{const zt=Mt.target.options;return Array.prototype.map.call(zt,Ot=>({displayValue:Ot.textContent,exportValue:Ot.value}))};return this.enableScripting&&this.hasJSActions?(j.addEventListener("updatefromsandbox",Mt=>{const zt={value(Ot){yt==null||yt();const Nt=Ot.detail.value,Vt=new Set(Array.isArray(Nt)?Nt:[Nt]);for(const Ht of j.options)Ht.selected=Vt.has(Ht.value);O.setValue(B,{value:St(!0)}),Dt=St(!1)},multipleSelection(Ot){j.multiple=!0},remove(Ot){const Nt=j.options,Vt=Ot.detail.remove;Nt[Vt].selected=!1,j.remove(Vt),Nt.length>0&&Array.prototype.findIndex.call(Nt,_t=>_t.selected)===-1&&(Nt[0].selected=!0),O.setValue(B,{value:St(!0),items:Ut(Ot)}),Dt=St(!1)},clear(Ot){for(;j.length!==0;)j.remove(0);O.setValue(B,{value:null,items:[]}),Dt=St(!1)},insert(Ot){const{index:Nt,displayValue:Vt,exportValue:Ht}=Ot.detail.insert,_t=j.children[Nt],Jt=document.createElement("option");Jt.textContent=Vt,Jt.value=Ht,_t?_t.before(Jt):j.append(Jt),O.setValue(B,{value:St(!0),items:Ut(Ot)}),Dt=St(!1)},items(Ot){const{items:Nt}=Ot.detail;for(;j.length!==0;)j.remove(0);for(const Vt of Nt){const{displayValue:Ht,exportValue:_t}=Vt,Jt=document.createElement("option");Jt.textContent=Ht,Jt.value=_t,j.append(Jt)}j.options.length>0&&(j.options[0].selected=!0),O.setValue(B,{value:St(!0),items:Ut(Ot)}),Dt=St(!1)},indices(Ot){const Nt=new Set(Ot.detail.indices);for(const Vt of Ot.target.options)Vt.selected=Nt.has(Vt.index);O.setValue(B,{value:St(!0)}),Dt=St(!1)},editable(Ot){Ot.target.disabled=!Ot.detail.editable}};this._dispatchEventFromSandbox(zt,Mt)}),j.addEventListener("input",Mt=>{var Ot;const zt=St(!0);O.setValue(B,{value:zt}),Mt.preventDefault(),(Ot=this.linkService.eventBus)==null||Ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:B,name:"Keystroke",value:Dt,changeEx:zt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(j,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Mt=>Mt.target.value)):j.addEventListener("input",function(Mt){O.setValue(B,{value:St(!0)})}),this.data.combo&&this._setTextStyle(j),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class S extends a{constructor(O){const{data:B,elements:Q}=O;super(O,{isRenderable:a._hasPopupData(B)}),this.elements=Q}render(){this.container.classList.add("popupAnnotation");const O=new x({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),B=[];for(const Q of this.elements)Q.popup=O,B.push(Q.data.id),Q.addHighlightArea();return this.container.setAttribute("aria-controls",B.map(Q=>`${e.AnnotationPrefix}${Q}`).join(",")),this.container}}class x{constructor(O){ht(this,wt);ht(this,H,null);ht(this,et,q(this,wt,In).bind(this));ht(this,dt,q(this,wt,nn).bind(this));ht(this,gt,q(this,wt,en).bind(this));ht(this,At,q(this,wt,Ce).bind(this));ht(this,bt,null);ht(this,nt,null);ht(this,ft,null);ht(this,U,null);ht(this,V,null);ht(this,tt,null);ht(this,lt,!1);ht(this,mt,null);ht(this,xt,null);ht(this,Et,null);ht(this,at,null);ht(this,kt,!1);var Vt;let{container:B,color:Q,elements:j,titleObj:pt,modificationDate:yt,contentsObj:St,richText:Dt,parent:Ut,rect:Mt,parentRect:zt,open:Ot}=O;ut(this,nt,B),ut(this,at,pt),ut(this,ft,St),ut(this,Et,Dt),ut(this,V,Ut),ut(this,bt,Q),ut(this,xt,Mt),ut(this,tt,zt),ut(this,U,j);const Nt=n.PDFDateString.toDateObject(yt);Nt&&ut(this,H,Ut.l10n.get("annotation_date_string",{date:Nt.toLocaleDateString(),time:Nt.toLocaleTimeString()})),this.trigger=j.flatMap(Ht=>Ht.getElementsToTriggerPopup());for(const Ht of this.trigger)Ht.addEventListener("click",r(this,At)),Ht.addEventListener("mouseenter",r(this,gt)),Ht.addEventListener("mouseleave",r(this,dt)),Ht.classList.add("popupTriggerArea");for(const Ht of j)(Vt=Ht.container)==null||Vt.addEventListener("keydown",r(this,et));r(this,nt).hidden=!0,Ot&&q(this,wt,Ce).call(this)}render(){if(r(this,mt))return;const{page:{view:O},viewport:{rawDims:{pageWidth:B,pageHeight:Q,pageX:j,pageY:pt}}}=r(this,V),yt=ut(this,mt,document.createElement("div"));if(yt.className="popup",r(this,bt)){const Zt=yt.style.outlineColor=e.Util.makeHexColor(...r(this,bt));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?yt.style.backgroundColor=`color-mix(in srgb, ${Zt} 30%, white)`:yt.style.backgroundColor=e.Util.makeHexColor(...r(this,bt).map(ne=>Math.floor(.7*(255-ne)+ne)))}const St=document.createElement("span");St.className="header";const Dt=document.createElement("h1");if(St.append(Dt),{dir:Dt.dir,str:Dt.textContent}=r(this,at),yt.append(St),r(this,H)){const Zt=document.createElement("span");Zt.classList.add("popupDate"),r(this,H).then(te=>{Zt.textContent=te}),St.append(Zt)}const Ut=r(this,ft),Mt=r(this,Et);if(Mt!=null&&Mt.str&&(!(Ut!=null&&Ut.str)||Ut.str===Mt.str))T.XfaLayer.render({xfaHtml:Mt.html,intent:"richText",div:yt}),yt.lastChild.classList.add("richText","popupContent");else{const Zt=this._formatContents(Ut);yt.append(Zt)}let zt=!!r(this,tt),Ot=zt?r(this,tt):r(this,xt);for(const Zt of r(this,U))if(!Ot||e.Util.intersect(Zt.data.rect,Ot)!==null){Ot=Zt.data.rect,zt=!0;break}const Nt=e.Util.normalizeRect([Ot[0],O[3]-Ot[1]+O[1],Ot[2],O[3]-Ot[3]+O[1]]),Ht=zt?Ot[2]-Ot[0]+5:0,_t=Nt[0]+Ht,Jt=Nt[1],{style:jt}=r(this,nt);jt.left=`${100*(_t-j)/B}%`,jt.top=`${100*(Jt-pt)/Q}%`,r(this,nt).append(yt)}_formatContents(O){let{str:B,dir:Q}=O;const j=document.createElement("p");j.classList.add("popupContent"),j.dir=Q;const pt=B.split(/(?:\r\n?|\n)/);for(let yt=0,St=pt.length;yt<St;++yt){const Dt=pt[yt];j.append(document.createTextNode(Dt)),yt<St-1&&j.append(document.createElement("br"))}return j}forceHide(){ut(this,kt,this.isVisible),r(this,kt)&&(r(this,nt).hidden=!0)}maybeShow(){r(this,kt)&&(ut(this,kt,!1),r(this,nt).hidden=!1)}get isVisible(){return r(this,nt).hidden===!1}}H=new WeakMap,et=new WeakMap,dt=new WeakMap,gt=new WeakMap,At=new WeakMap,bt=new WeakMap,nt=new WeakMap,ft=new WeakMap,U=new WeakMap,V=new WeakMap,tt=new WeakMap,lt=new WeakMap,mt=new WeakMap,xt=new WeakMap,Et=new WeakMap,at=new WeakMap,kt=new WeakMap,wt=new WeakSet,In=function(O){O.altKey||O.shiftKey||O.ctrlKey||O.metaKey||(O.key==="Enter"||O.key==="Escape"&&r(this,lt))&&q(this,wt,Ce).call(this)},Ce=function(){ut(this,lt,!r(this,lt)),r(this,lt)?(q(this,wt,en).call(this),r(this,nt).addEventListener("click",r(this,At)),r(this,nt).addEventListener("keydown",r(this,et))):(q(this,wt,nn).call(this),r(this,nt).removeEventListener("click",r(this,At)),r(this,nt).removeEventListener("keydown",r(this,et)))},en=function(){r(this,mt)||this.render(),this.isVisible?r(this,lt)&&r(this,nt).classList.add("focused"):(r(this,nt).hidden=!1,r(this,nt).style.zIndex=parseInt(r(this,nt).style.zIndex)+1e3)},nn=function(){r(this,nt).classList.remove("focused"),!(r(this,lt)||!this.isVisible)&&(r(this,nt).hidden=!0,r(this,nt).style.zIndex=parseInt(r(this,nt).style.zIndex)-1e3)};class z extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0}),this.textContent=O.data.textContent,this.textPosition=O.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const O=document.createElement("div");O.classList.add("annotationTextContent"),O.setAttribute("role","comment");for(const B of this.textContent){const Q=document.createElement("span");Q.textContent=B,O.append(Q)}this.container.append(O)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}i.FreeTextAnnotationElement=z;class b extends a{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0});ht(this,Bt,null)}render(){this.container.classList.add("lineAnnotation");const B=this.data,{width:Q,height:j}=E(B.rect),pt=this.svgFactory.create(Q,j,!0),yt=ut(this,Bt,this.svgFactory.createElement("svg:line"));return yt.setAttribute("x1",B.rect[2]-B.lineCoordinates[0]),yt.setAttribute("y1",B.rect[3]-B.lineCoordinates[1]),yt.setAttribute("x2",B.rect[2]-B.lineCoordinates[2]),yt.setAttribute("y2",B.rect[3]-B.lineCoordinates[3]),yt.setAttribute("stroke-width",B.borderStyle.width||1),yt.setAttribute("stroke","transparent"),yt.setAttribute("fill","transparent"),pt.append(yt),this.container.append(pt),!B.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Bt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bt=new WeakMap;class L extends a{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0});ht(this,Gt,null)}render(){this.container.classList.add("squareAnnotation");const B=this.data,{width:Q,height:j}=E(B.rect),pt=this.svgFactory.create(Q,j,!0),yt=B.borderStyle.width,St=ut(this,Gt,this.svgFactory.createElement("svg:rect"));return St.setAttribute("x",yt/2),St.setAttribute("y",yt/2),St.setAttribute("width",Q-yt),St.setAttribute("height",j-yt),St.setAttribute("stroke-width",yt||1),St.setAttribute("stroke","transparent"),St.setAttribute("fill","transparent"),pt.append(St),this.container.append(pt),!B.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Gt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gt=new WeakMap;class G extends a{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0});ht(this,Kt,null)}render(){this.container.classList.add("circleAnnotation");const B=this.data,{width:Q,height:j}=E(B.rect),pt=this.svgFactory.create(Q,j,!0),yt=B.borderStyle.width,St=ut(this,Kt,this.svgFactory.createElement("svg:ellipse"));return St.setAttribute("cx",Q/2),St.setAttribute("cy",j/2),St.setAttribute("rx",Q/2-yt/2),St.setAttribute("ry",j/2-yt/2),St.setAttribute("stroke-width",yt||1),St.setAttribute("stroke","transparent"),St.setAttribute("fill","transparent"),pt.append(St),this.container.append(pt),!B.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Kt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kt=new WeakMap;class st extends a{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0});ht(this,Yt,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const B=this.data,{width:Q,height:j}=E(B.rect),pt=this.svgFactory.create(Q,j,!0);let yt=[];for(const Dt of B.vertices){const Ut=Dt.x-B.rect[0],Mt=B.rect[3]-Dt.y;yt.push(Ut+","+Mt)}yt=yt.join(" ");const St=ut(this,Yt,this.svgFactory.createElement(this.svgElementName));return St.setAttribute("points",yt),St.setAttribute("stroke-width",B.borderStyle.width||1),St.setAttribute("stroke","transparent"),St.setAttribute("fill","transparent"),pt.append(St),this.container.append(pt),!B.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return r(this,Yt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yt=new WeakMap;class _ extends st{constructor(O){super(O),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class K extends a{constructor(B){super(B,{isRenderable:!0,ignoreBorder:!0});ht(this,Tt,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const B=this.data,{width:Q,height:j}=E(B.rect),pt=this.svgFactory.create(Q,j,!0);for(const yt of B.inkLists){let St=[];for(const Ut of yt){const Mt=Ut.x-B.rect[0],zt=B.rect[3]-Ut.y;St.push(`${Mt},${zt}`)}St=St.join(" ");const Dt=this.svgFactory.createElement(this.svgElementName);r(this,Tt).push(Dt),Dt.setAttribute("points",St),Dt.setAttribute("stroke-width",B.borderStyle.width||1),Dt.setAttribute("stroke","transparent"),Dt.setAttribute("fill","transparent"),!B.popupRef&&this.hasPopupData&&this._createPopup(),pt.append(Dt)}return this.container.append(pt),this.container}getElementsToTriggerPopup(){return r(this,Tt)}addHighlightArea(){this.container.classList.add("highlightArea")}}Tt=new WeakMap,i.InkAnnotationElement=K;class it extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class W extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Y extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rt extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class $ extends a{constructor(O){super(O,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}i.StampAnnotationElement=$;class d extends a{constructor(B){var pt;super(B,{isRenderable:!0});ht(this,ct);ht(this,ot,null);const{filename:Q,content:j}=this.data.file;this.filename=(0,n.getFilenameFromUrl)(Q,!0),this.content=j,(pt=this.linkService.eventBus)==null||pt.dispatch("fileattachmentannotation",{source:this,filename:Q,content:j})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:B,data:Q}=this;let j;Q.hasAppearance||Q.fillAlpha===0?j=document.createElement("div"):(j=document.createElement("img"),j.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Q.name)?"paperclip":"pushpin"}.svg`,Q.fillAlpha&&Q.fillAlpha<1&&(j.style=`filter: opacity(${Math.round(Q.fillAlpha*100)}%);`)),j.addEventListener("dblclick",q(this,ct,rn).bind(this)),ut(this,ot,j);const{isMac:pt}=e.FeatureTest.platform;return B.addEventListener("keydown",yt=>{yt.key==="Enter"&&(pt?yt.metaKey:yt.ctrlKey)&&q(this,ct,rn).call(this)}),!Q.popupRef&&this.hasPopupData?this._createPopup():j.classList.add("popupTriggerArea"),B.append(j),B}getElementsToTriggerPopup(){return r(this,ot)}addHighlightArea(){this.container.classList.add("highlightArea")}}ot=new WeakMap,ct=new WeakSet,rn=function(){var B;(B=this.downloadManager)==null||B.openOrDownloadData(this.container,this.content,this.filename)};class p{constructor(O){ht(this,vt);ht(this,Wt,null);ht(this,k,null);ht(this,Z,new Map);let{div:B,accessibilityManager:Q,annotationCanvasMap:j,l10n:pt,page:yt,viewport:St}=O;this.div=B,ut(this,Wt,Q),ut(this,k,j),this.l10n=pt,this.page=yt,this.viewport=St,this.zIndex=0,this.l10n||(this.l10n=w.NullL10n)}async render(O){const{annotations:B}=O,Q=this.div;(0,n.setLayerDimensions)(Q,this.viewport);const j=new Map,pt={data:null,layer:Q,linkService:O.linkService,downloadManager:O.downloadManager,imageResourcesPath:O.imageResourcesPath||"",renderForms:O.renderForms!==!1,svgFactory:new n.DOMSVGFactory,annotationStorage:O.annotationStorage||new o.AnnotationStorage,enableScripting:O.enableScripting===!0,hasJSActions:O.hasJSActions,fieldObjects:O.fieldObjects,parent:this,elements:null};for(const yt of B){if(yt.noHTML)continue;const St=yt.annotationType===e.AnnotationType.POPUP;if(St){const Mt=j.get(yt.id);if(!Mt)continue;pt.elements=Mt}else{const{width:Mt,height:zt}=E(yt.rect);if(Mt<=0||zt<=0)continue}pt.data=yt;const Dt=A.create(pt);if(!Dt.isRenderable)continue;if(!St&&yt.popupRef){const Mt=j.get(yt.popupRef);Mt?Mt.push(Dt):j.set(yt.popupRef,[Dt])}Dt.annotationEditorType>0&&r(this,Z).set(Dt.data.id,Dt);const Ut=Dt.render();yt.hidden&&(Ut.style.visibility="hidden"),q(this,vt,On).call(this,Ut,yt.id)}q(this,vt,sn).call(this),await this.l10n.translate(Q)}update(O){let{viewport:B}=O;const Q=this.div;this.viewport=B,(0,n.setLayerDimensions)(Q,{rotation:B.rotation}),q(this,vt,sn).call(this),Q.hidden=!1}getEditableAnnotations(){return Array.from(r(this,Z).values())}getEditableAnnotation(O){return r(this,Z).get(O)}}Wt=new WeakMap,k=new WeakMap,Z=new WeakMap,vt=new WeakSet,On=function(O,B){var j;const Q=O.firstChild||O;Q.id=`${e.AnnotationPrefix}${B}`,this.div.append(O),(j=r(this,Wt))==null||j.moveElementInDOM(this.div,O,Q,!1)},sn=function(){if(!r(this,k))return;const O=this.div;for(const[B,Q]of r(this,k)){const j=O.querySelector(`[data-annotation-id="${B}"]`);if(!j)continue;const{firstChild:pt}=j;pt?pt.nodeName==="CANVAS"?pt.replaceWith(Q):pt.before(Q):j.append(Q)}r(this,k).clear()},i.AnnotationLayer=p},(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function t(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function e(o){return Math.max(0,Math.min(255,255*o))}class n{static CMYK_G(m){let[w,T,y,f]=m;return["G",1-Math.min(1,.3*w+.59*y+.11*T+f)]}static G_CMYK(m){let[w]=m;return["CMYK",0,0,0,1-w]}static G_RGB(m){let[w]=m;return["RGB",w,w,w]}static G_rgb(m){let[w]=m;return w=e(w),[w,w,w]}static G_HTML(m){let[w]=m;const T=t(w);return`#${T}${T}${T}`}static RGB_G(m){let[w,T,y]=m;return["G",.3*w+.59*T+.11*y]}static RGB_rgb(m){return m.map(e)}static RGB_HTML(m){return`#${m.map(t).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(m){let[w,T,y,f]=m;return["RGB",1-Math.min(1,w+f),1-Math.min(1,y+f),1-Math.min(1,T+f)]}static CMYK_rgb(m){let[w,T,y,f]=m;return[e(1-Math.min(1,w+f)),e(1-Math.min(1,y+f)),e(1-Math.min(1,T+f))]}static CMYK_HTML(m){const w=this.CMYK_RGB(m).slice(1);return this.RGB_HTML(w)}static RGB_CMYK(m){let[w,T,y]=m;const f=1-w,R=1-T,E=1-y,A=Math.min(f,R,E);return["CMYK",f,R,E,A]}}i.ColorConverters=n},(C,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NullL10n=void 0,i.getL10nFallback=e;const t={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};t.print_progress_percent="{{progress}}%";function e(m,w){switch(m){case"find_match_count":m=`find_match_count[${w.total===1?"one":"other"}]`;break;case"find_match_count_limit":m=`find_match_count_limit[${w.limit===1?"one":"other"}]`;break}return t[m]||""}function n(m,w){return w?m.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(T,y)=>y in w?w[y]:"{{"+y+"}}"):m}const o={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(m){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e(m,w);return n(T,w)},async translate(m){}};i.NullL10n=o},(C,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0,t(89);var e=t(194);class n{static setupStorage(m,w,T,y,f){const R=y.getValue(w,{value:null});switch(T.name){case"textarea":if(R.value!==null&&(m.textContent=R.value),f==="print")break;m.addEventListener("input",E=>{y.setValue(w,{value:E.target.value})});break;case"input":if(T.attributes.type==="radio"||T.attributes.type==="checkbox"){if(R.value===T.attributes.xfaOn?m.setAttribute("checked",!0):R.value===T.attributes.xfaOff&&m.removeAttribute("checked"),f==="print")break;m.addEventListener("change",E=>{y.setValue(w,{value:E.target.checked?E.target.getAttribute("xfaOn"):E.target.getAttribute("xfaOff")})})}else{if(R.value!==null&&m.setAttribute("value",R.value),f==="print")break;m.addEventListener("input",E=>{y.setValue(w,{value:E.target.value})})}break;case"select":if(R.value!==null){m.setAttribute("value",R.value);for(const E of T.children)E.attributes.value===R.value?E.attributes.selected=!0:E.attributes.hasOwnProperty("selected")&&delete E.attributes.selected}m.addEventListener("input",E=>{const A=E.target.options,a=A.selectedIndex===-1?"":A[A.selectedIndex].value;y.setValue(w,{value:a})});break}}static setAttributes(m){let{html:w,element:T,storage:y=null,intent:f,linkService:R}=m;const{attributes:E}=T,A=w instanceof HTMLAnchorElement;E.type==="radio"&&(E.name=`${E.name}-${f}`);for(const[a,c]of Object.entries(E))if(c!=null)switch(a){case"class":c.length&&w.setAttribute(a,c.join(" "));break;case"dataId":break;case"id":w.setAttribute("data-element-id",c);break;case"style":Object.assign(w.style,c);break;case"textContent":w.textContent=c;break;default:(!A||a!=="href"&&a!=="newWindow")&&w.setAttribute(a,c)}A&&R.addLinkAttributes(w,E.href,E.newWindow),y&&E.dataId&&this.setupStorage(w,E.dataId,T,y)}static render(m){var c;const w=m.annotationStorage,T=m.linkService,y=m.xfaHtml,f=m.intent||"display",R=document.createElement(y.name);y.attributes&&this.setAttributes({html:R,element:y,intent:f,linkService:T});const E=[[y,-1,R]],A=m.div;if(A.append(R),m.viewport){const l=`matrix(${m.viewport.transform.join(",")})`;A.style.transform=l}f!=="richText"&&A.setAttribute("class","xfaLayer xfaFont");const a=[];for(;E.length>0;){const[l,s,v]=E.at(-1);if(s+1===l.children.length){E.pop();continue}const D=l.children[++E.at(-1)[1]];if(D===null)continue;const{name:P}=D;if(P==="#text"){const g=document.createTextNode(D.value);a.push(g),v.append(g);continue}const h=(c=D==null?void 0:D.attributes)!=null&&c.xmlns?document.createElementNS(D.attributes.xmlns,P):document.createElement(P);if(v.append(h),D.attributes&&this.setAttributes({html:h,element:D,storage:w,intent:f,linkService:T}),D.children&&D.children.length>0)E.push([D,-1,h]);else if(D.value){const g=document.createTextNode(D.value);e.XfaText.shouldBuildText(P)&&a.push(g),h.append(g)}}for(const l of A.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))l.setAttribute("readOnly",!0);return{textDivs:a}}static update(m){const w=`matrix(${m.viewport.transform.join(",")})`;m.div.style.transform=w,m.div.hidden=!1}}i.XfaLayer=n},(C,i,t)=>{var y,f,R,E,A,a,c,l,s,v,D,P,h,g,u,Dn,Ln,Nn,Bn,an,Un,on,Wn,Hn,$n,zn,Gn,ee,ln,Pe,ke,le,cn,Re,F,Vn,hn,Xn,Yn,un,we,ce;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,t(89),t(2);var e=t(1),n=t(164),o=t(198),m=t(168),w=t(165);const bt=class bt extends n.AnnotationEditor{constructor(U){super({...U,name:"inkEditor"});ht(this,u);ht(this,y,0);ht(this,f,0);ht(this,R,this.canvasPointermove.bind(this));ht(this,E,this.canvasPointerleave.bind(this));ht(this,A,this.canvasPointerup.bind(this));ht(this,a,this.canvasPointerdown.bind(this));ht(this,c,new Path2D);ht(this,l,!1);ht(this,s,!1);ht(this,v,!1);ht(this,D,null);ht(this,P,0);ht(this,h,0);ht(this,g,null);this.color=U.color||null,this.thickness=U.thickness||null,this.opacity=U.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(U){n.AnnotationEditor.initialize(U,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(U,V){switch(U){case e.AnnotationEditorParamsType.INK_THICKNESS:bt._defaultThickness=V;break;case e.AnnotationEditorParamsType.INK_COLOR:bt._defaultColor=V;break;case e.AnnotationEditorParamsType.INK_OPACITY:bt._defaultOpacity=V/100;break}}updateParams(U,V){switch(U){case e.AnnotationEditorParamsType.INK_THICKNESS:q(this,u,Dn).call(this,V);break;case e.AnnotationEditorParamsType.INK_COLOR:q(this,u,Ln).call(this,V);break;case e.AnnotationEditorParamsType.INK_OPACITY:q(this,u,Nn).call(this,V);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,bt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,bt._defaultColor||n.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(bt._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||bt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||bt._defaultColor||n.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??bt._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(q(this,u,Pe).call(this),q(this,u,ke).call(this)),this.isAttachedToDOM||(this.parent.add(this),q(this,u,le).call(this)),q(this,u,ce).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,r(this,D).disconnect(),ut(this,D,null),super.remove())}setParent(U){!this.parent&&U?this._uiManager.removeShouldRescale(this):this.parent&&U===null&&this._uiManager.addShouldRescale(this),super.setParent(U)}onScaleChanging(){const[U,V]=this.parentDimensions,tt=this.width*U,lt=this.height*V;this.setDimensions(tt,lt)}enableEditMode(){r(this,l)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",r(this,a)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",r(this,a)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){r(this,l)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ut(this,l,!0),this.div.classList.add("disabled"),q(this,u,ce).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(U){this._focusEventsAllowed&&(super.focusin(U),this.enableEditMode())}canvasPointerdown(U){U.button!==0||!this.isInEditMode()||r(this,l)||(this.setInForeground(),U.preventDefault(),U.type!=="mouse"&&this.div.focus(),q(this,u,Un).call(this,U.offsetX,U.offsetY))}canvasPointermove(U){U.preventDefault(),q(this,u,on).call(this,U.offsetX,U.offsetY)}canvasPointerup(U){U.preventDefault(),q(this,u,ln).call(this,U)}canvasPointerleave(U){q(this,u,ln).call(this,U)}get isResizable(){return!this.isEmpty()&&r(this,l)}render(){if(this.div)return this.div;let U,V;this.width&&(U=this.x,V=this.y),super.render(),n.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Et=>{var at;return(at=this.div)==null?void 0:at.setAttribute("aria-label",Et)});const[tt,lt,mt,xt]=q(this,u,Bn).call(this);if(this.setAt(tt,lt,0,0),this.setDims(mt,xt),q(this,u,Pe).call(this),this.width){const[Et,at]=this.parentDimensions;this.setAspectRatio(this.width*Et,this.height*at),this.setAt(U*Et,V*at,this.width*Et,this.height*at),ut(this,v,!0),q(this,u,le).call(this),this.setDims(this.width*Et,this.height*at),q(this,u,ee).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return q(this,u,ke).call(this),this.div}setDimensions(U,V){const tt=Math.round(U),lt=Math.round(V);if(r(this,P)===tt&&r(this,h)===lt)return;ut(this,P,tt),ut(this,h,lt),this.canvas.style.visibility="hidden";const[mt,xt]=this.parentDimensions;this.width=U/mt,this.height=V/xt,this.fixAndSetPosition(),r(this,l)&&q(this,u,cn).call(this,U,V),q(this,u,le).call(this),q(this,u,ee).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(U,V,tt){var Bt,Gt,Kt;if(U instanceof o.InkAnnotationElement)return null;const lt=super.deserialize(U,V,tt);lt.thickness=U.thickness,lt.color=e.Util.makeHexColor(...U.color),lt.opacity=U.opacity;const[mt,xt]=lt.pageDimensions,Et=lt.width*mt,at=lt.height*xt,kt=lt.parentScale,wt=U.thickness/2;ut(lt,l,!0),ut(lt,P,Math.round(Et)),ut(lt,h,Math.round(at));const{paths:$t,rect:Lt,rotation:Xt}=U;for(let{bezier:Yt}of $t){Yt=q(Bt=bt,F,Xn).call(Bt,Yt,Lt,Xt);const Tt=[];lt.paths.push(Tt);let ot=kt*(Yt[0]-wt),ct=kt*(Yt[1]-wt);for(let Wt=2,k=Yt.length;Wt<k;Wt+=6){const Z=kt*(Yt[Wt]-wt),vt=kt*(Yt[Wt+1]-wt),Ct=kt*(Yt[Wt+2]-wt),Rt=kt*(Yt[Wt+3]-wt),Pt=kt*(Yt[Wt+4]-wt),O=kt*(Yt[Wt+5]-wt);Tt.push([[ot,ct],[Z,vt],[Ct,Rt],[Pt,O]]),ot=Pt,ct=O}const It=q(this,F,Vn).call(this,Tt);lt.bezierPath2D.push(It)}const Ft=q(Gt=lt,u,un).call(Gt);return ut(lt,f,Math.max(n.AnnotationEditor.MIN_SIZE,Ft[2]-Ft[0])),ut(lt,y,Math.max(n.AnnotationEditor.MIN_SIZE,Ft[3]-Ft[1])),q(Kt=lt,u,cn).call(Kt,Et,at),lt}serialize(){if(this.isEmpty())return null;const U=this.getRect(0,0),V=n.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:V,thickness:this.thickness,opacity:this.opacity,paths:q(this,u,Yn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,U),pageIndex:this.pageIndex,rect:U,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};y=new WeakMap,f=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakMap,v=new WeakMap,D=new WeakMap,P=new WeakMap,h=new WeakMap,g=new WeakMap,u=new WeakSet,Dn=function(U){const V=this.thickness;this.addCommands({cmd:()=>{this.thickness=U,q(this,u,ce).call(this)},undo:()=>{this.thickness=V,q(this,u,ce).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ln=function(U){const V=this.color;this.addCommands({cmd:()=>{this.color=U,q(this,u,ee).call(this)},undo:()=>{this.color=V,q(this,u,ee).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nn=function(U){U/=100;const V=this.opacity;this.addCommands({cmd:()=>{this.opacity=U,q(this,u,ee).call(this)},undo:()=>{this.opacity=V,q(this,u,ee).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Bn=function(){const{parentRotation:U,parentDimensions:[V,tt]}=this;switch(U){case 90:return[0,tt,tt,V];case 180:return[V,tt,V,tt];case 270:return[V,0,tt,V];default:return[0,0,V,tt]}},an=function(){const{ctx:U,color:V,opacity:tt,thickness:lt,parentScale:mt,scaleFactor:xt}=this;U.lineWidth=lt*mt/xt,U.lineCap="round",U.lineJoin="round",U.miterLimit=10,U.strokeStyle=`${V}${(0,w.opacityToHex)(tt)}`},Un=function(U,V){this.canvas.addEventListener("contextmenu",m.noContextMenu),this.canvas.addEventListener("pointerleave",r(this,E)),this.canvas.addEventListener("pointermove",r(this,R)),this.canvas.addEventListener("pointerup",r(this,A)),this.canvas.removeEventListener("pointerdown",r(this,a)),this.isEditing=!0,r(this,v)||(ut(this,v,!0),q(this,u,le).call(this),this.thickness||(this.thickness=bt._defaultThickness),this.color||(this.color=bt._defaultColor||n.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=bt._defaultOpacity)),this.currentPath.push([U,V]),ut(this,s,!1),q(this,u,an).call(this),ut(this,g,()=>{q(this,u,$n).call(this),r(this,g)&&window.requestAnimationFrame(r(this,g))}),window.requestAnimationFrame(r(this,g))},on=function(U,V){const[tt,lt]=this.currentPath.at(-1);if(this.currentPath.length>1&&U===tt&&V===lt)return;const mt=this.currentPath;let xt=r(this,c);if(mt.push([U,V]),ut(this,s,!0),mt.length<=2){xt.moveTo(...mt[0]),xt.lineTo(U,V);return}mt.length===3&&(ut(this,c,xt=new Path2D),xt.moveTo(...mt[0])),q(this,u,zn).call(this,xt,...mt.at(-3),...mt.at(-2),U,V)},Wn=function(){if(this.currentPath.length===0)return;const U=this.currentPath.at(-1);r(this,c).lineTo(...U)},Hn=function(U,V){ut(this,g,null),U=Math.min(Math.max(U,0),this.canvas.width),V=Math.min(Math.max(V,0),this.canvas.height),q(this,u,on).call(this,U,V),q(this,u,Wn).call(this);let tt;if(this.currentPath.length!==1)tt=q(this,u,Gn).call(this);else{const at=[U,V];tt=[[at,at.slice(),at.slice(),at]]}const lt=r(this,c),mt=this.currentPath;this.currentPath=[],ut(this,c,new Path2D);const xt=()=>{this.allRawPaths.push(mt),this.paths.push(tt),this.bezierPath2D.push(lt),this.rebuild()},Et=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(q(this,u,Pe).call(this),q(this,u,ke).call(this)),q(this,u,ce).call(this))};this.addCommands({cmd:xt,undo:Et,mustExec:!0})},$n=function(){if(!r(this,s))return;ut(this,s,!1);const U=Math.ceil(this.thickness*this.parentScale),V=this.currentPath.slice(-3),tt=V.map(xt=>xt[0]),lt=V.map(xt=>xt[1]);Math.min(...tt)-U,Math.max(...tt)+U,Math.min(...lt)-U,Math.max(...lt)+U;const{ctx:mt}=this;mt.save(),mt.clearRect(0,0,this.canvas.width,this.canvas.height);for(const xt of this.bezierPath2D)mt.stroke(xt);mt.stroke(r(this,c)),mt.restore()},zn=function(U,V,tt,lt,mt,xt,Et){const at=(V+lt)/2,kt=(tt+mt)/2,wt=(lt+xt)/2,$t=(mt+Et)/2;U.bezierCurveTo(at+2*(lt-at)/3,kt+2*(mt-kt)/3,wt+2*(lt-wt)/3,$t+2*(mt-$t)/3,wt,$t)},Gn=function(){const U=this.currentPath;if(U.length<=2)return[[U[0],U[0],U.at(-1),U.at(-1)]];const V=[];let tt,[lt,mt]=U[0];for(tt=1;tt<U.length-2;tt++){const[Lt,Xt]=U[tt],[Ft,Bt]=U[tt+1],Gt=(Lt+Ft)/2,Kt=(Xt+Bt)/2,Yt=[lt+2*(Lt-lt)/3,mt+2*(Xt-mt)/3],Tt=[Gt+2*(Lt-Gt)/3,Kt+2*(Xt-Kt)/3];V.push([[lt,mt],Yt,Tt,[Gt,Kt]]),[lt,mt]=[Gt,Kt]}const[xt,Et]=U[tt],[at,kt]=U[tt+1],wt=[lt+2*(xt-lt)/3,mt+2*(Et-mt)/3],$t=[at+2*(xt-at)/3,kt+2*(Et-kt)/3];return V.push([[lt,mt],wt,$t,[at,kt]]),V},ee=function(){if(this.isEmpty()){q(this,u,Re).call(this);return}q(this,u,an).call(this);const{canvas:U,ctx:V}=this;V.setTransform(1,0,0,1,0,0),V.clearRect(0,0,U.width,U.height),q(this,u,Re).call(this);for(const tt of this.bezierPath2D)V.stroke(tt)},ln=function(U){this.canvas.removeEventListener("pointerleave",r(this,E)),this.canvas.removeEventListener("pointermove",r(this,R)),this.canvas.removeEventListener("pointerup",r(this,A)),this.canvas.addEventListener("pointerdown",r(this,a)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",m.noContextMenu)},10),q(this,u,Hn).call(this,U.offsetX,U.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Pe=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",n.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(U=>{var V;return(V=this.canvas)==null?void 0:V.setAttribute("aria-label",U)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ke=function(){ut(this,D,new ResizeObserver(U=>{const V=U[0].contentRect;V.width&&V.height&&this.setDimensions(V.width,V.height)})),r(this,D).observe(this.div)},le=function(){if(!r(this,v))return;const[U,V]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*U),this.canvas.height=Math.ceil(this.height*V),q(this,u,Re).call(this)},cn=function(U,V){const tt=q(this,u,we).call(this),lt=(U-tt)/r(this,f),mt=(V-tt)/r(this,y);this.scaleFactor=Math.min(lt,mt)},Re=function(){const U=q(this,u,we).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+U,this.translationY*this.scaleFactor+U)},F=new WeakSet,Vn=function(U){const V=new Path2D;for(let tt=0,lt=U.length;tt<lt;tt++){const[mt,xt,Et,at]=U[tt];tt===0&&V.moveTo(...mt),V.bezierCurveTo(xt[0],xt[1],Et[0],Et[1],at[0],at[1])}return V},hn=function(U,V,tt){const[lt,mt,xt,Et]=V;switch(tt){case 0:for(let at=0,kt=U.length;at<kt;at+=2)U[at]+=lt,U[at+1]=Et-U[at+1];break;case 90:for(let at=0,kt=U.length;at<kt;at+=2){const wt=U[at];U[at]=U[at+1]+lt,U[at+1]=wt+mt}break;case 180:for(let at=0,kt=U.length;at<kt;at+=2)U[at]=xt-U[at],U[at+1]+=mt;break;case 270:for(let at=0,kt=U.length;at<kt;at+=2){const wt=U[at];U[at]=xt-U[at+1],U[at+1]=Et-wt}break;default:throw new Error("Invalid rotation")}return U},Xn=function(U,V,tt){const[lt,mt,xt,Et]=V;switch(tt){case 0:for(let at=0,kt=U.length;at<kt;at+=2)U[at]-=lt,U[at+1]=Et-U[at+1];break;case 90:for(let at=0,kt=U.length;at<kt;at+=2){const wt=U[at];U[at]=U[at+1]-mt,U[at+1]=wt-lt}break;case 180:for(let at=0,kt=U.length;at<kt;at+=2)U[at]=xt-U[at],U[at+1]-=mt;break;case 270:for(let at=0,kt=U.length;at<kt;at+=2){const wt=U[at];U[at]=Et-U[at+1],U[at+1]=xt-wt}break;default:throw new Error("Invalid rotation")}return U},Yn=function(U,V,tt,lt){var kt,wt;const mt=[],xt=this.thickness/2,Et=U*V+xt,at=U*tt+xt;for(const $t of this.paths){const Lt=[],Xt=[];for(let Ft=0,Bt=$t.length;Ft<Bt;Ft++){const[Gt,Kt,Yt,Tt]=$t[Ft],ot=U*Gt[0]+Et,ct=U*Gt[1]+at,It=U*Kt[0]+Et,Wt=U*Kt[1]+at,k=U*Yt[0]+Et,Z=U*Yt[1]+at,vt=U*Tt[0]+Et,Ct=U*Tt[1]+at;Ft===0&&(Lt.push(ot,ct),Xt.push(ot,ct)),Lt.push(It,Wt,k,Z,vt,Ct),Xt.push(It,Wt),Ft===Bt-1&&Xt.push(vt,Ct)}mt.push({bezier:q(kt=bt,F,hn).call(kt,Lt,lt,this.rotation),points:q(wt=bt,F,hn).call(wt,Xt,lt,this.rotation)})}return mt},un=function(){let U=1/0,V=-1/0,tt=1/0,lt=-1/0;for(const mt of this.paths)for(const[xt,Et,at,kt]of mt){const wt=e.Util.bezierBoundingBox(...xt,...Et,...at,...kt);U=Math.min(U,wt[0]),tt=Math.min(tt,wt[1]),V=Math.max(V,wt[2]),lt=Math.max(lt,wt[3])}return[U,tt,V,lt]},we=function(){return r(this,l)?Math.ceil(this.thickness*this.parentScale):0},ce=function(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!r(this,l)){q(this,u,ee).call(this);return}const V=q(this,u,un).call(this),tt=q(this,u,we).call(this);ut(this,f,Math.max(n.AnnotationEditor.MIN_SIZE,V[2]-V[0])),ut(this,y,Math.max(n.AnnotationEditor.MIN_SIZE,V[3]-V[1]));const lt=Math.ceil(tt+r(this,f)*this.scaleFactor),mt=Math.ceil(tt+r(this,y)*this.scaleFactor),[xt,Et]=this.parentDimensions;this.width=lt/xt,this.height=mt/Et,this.setAspectRatio(lt,mt);const at=this.translationX,kt=this.translationY;this.translationX=-V[0],this.translationY=-V[1],q(this,u,le).call(this),q(this,u,ee).call(this),ut(this,P,lt),ut(this,h,mt),this.setDims(lt,mt);const wt=U?tt/this.scaleFactor/2:0;this.translate(at-this.translationX-wt,kt-this.translationY-wt)},ht(bt,F),Qt(bt,"_defaultColor",null),Qt(bt,"_defaultOpacity",1),Qt(bt,"_defaultThickness",1),Qt(bt,"_type","ink");let T=bt;i.InkEditor=T},(C,i,t)=>{var T,y,f,R,E,A,a,c,l,s,v,me,ve,Me,dn,_n,Kn,fn,Fe,Jn;Object.defineProperty(i,"__esModule",{value:!0}),i.StampEditor=void 0,t(149),t(152);var e=t(1),n=t(164),o=t(168),m=t(198);const L=class L extends n.AnnotationEditor{constructor(_){super({..._,name:"stampEditor"});ht(this,v);ht(this,T,null);ht(this,y,null);ht(this,f,null);ht(this,R,null);ht(this,E,null);ht(this,A,null);ht(this,a,null);ht(this,c,null);ht(this,l,!1);ht(this,s,!1);ut(this,R,_.bitmapUrl),ut(this,E,_.bitmapFile)}static initialize(_){n.AnnotationEditor.initialize(_)}static get supportedTypes(){const _=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",_.map(J=>`image/${J}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(_){return this.supportedTypes.includes(_)}static paste(_,J){J.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:_.getAsFile()})}remove(){var _,J;r(this,y)&&(ut(this,T,null),this._uiManager.imageManager.deleteId(r(this,y)),(_=r(this,A))==null||_.remove(),ut(this,A,null),(J=r(this,a))==null||J.disconnect(),ut(this,a,null)),super.remove()}rebuild(){if(!this.parent){r(this,y)&&q(this,v,Me).call(this);return}super.rebuild(),this.div!==null&&(r(this,y)&&q(this,v,Me).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(r(this,f)||r(this,T)||r(this,R)||r(this,E))}get isResizable(){return!0}render(){if(this.div)return this.div;let _,J;if(this.width&&(_=this.x,J=this.y),super.render(),this.div.hidden=!0,r(this,T)?q(this,v,dn).call(this):q(this,v,Me).call(this),this.width){const[K,it]=this.parentDimensions;this.setAt(_*K,J*it,this.width*K,this.height*it)}return this.div}static deserialize(_,J,K){if(_ instanceof m.StampAnnotationElement)return null;const it=super.deserialize(_,J,K),{rect:W,bitmapUrl:Y,bitmapId:rt,isSvg:$,accessibilityData:d}=_;rt&&K.imageManager.isValidId(rt)?ut(it,y,rt):ut(it,R,Y),ut(it,l,$);const[p,M]=it.pageDimensions;return it.width=(W[2]-W[0])/p,it.height=(W[3]-W[1])/M,d&&(it.altTextData=d),it}serialize(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.isEmpty())return null;const K={annotationType:e.AnnotationEditorType.STAMP,bitmapId:r(this,y),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:r(this,l),structTreeParentId:this._structTreeParentId};if(_)return K.bitmapUrl=q(this,v,Fe).call(this,!0),K.accessibilityData=this.altTextData,K;const{decorative:it,altText:W}=this.altTextData;if(!it&&W&&(K.accessibilityData={type:"Figure",alt:W}),J===null)return K;J.stamps||(J.stamps=new Map);const Y=r(this,l)?(K.rect[2]-K.rect[0])*(K.rect[3]-K.rect[1]):null;if(!J.stamps.has(r(this,y)))J.stamps.set(r(this,y),{area:Y,serialized:K}),K.bitmap=q(this,v,Fe).call(this,!1);else if(r(this,l)){const rt=J.stamps.get(r(this,y));Y>rt.area&&(rt.area=Y,rt.serialized.bitmap.close(),rt.serialized.bitmap=q(this,v,Fe).call(this,!1))}return K}};T=new WeakMap,y=new WeakMap,f=new WeakMap,R=new WeakMap,E=new WeakMap,A=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakMap,v=new WeakSet,me=function(_){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!_){this.remove();return}ut(this,T,_.bitmap),J||(ut(this,y,_.id),ut(this,l,_.isSvg)),q(this,v,dn).call(this)},ve=function(){ut(this,f,null),this._uiManager.enableWaiting(!1),r(this,A)&&this.div.focus()},Me=function(){if(r(this,y)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(r(this,y)).then(J=>q(this,v,me).call(this,J,!0)).finally(()=>q(this,v,ve).call(this));return}if(r(this,R)){const J=r(this,R);ut(this,R,null),this._uiManager.enableWaiting(!0),ut(this,f,this._uiManager.imageManager.getFromUrl(J).then(K=>q(this,v,me).call(this,K)).finally(()=>q(this,v,ve).call(this)));return}if(r(this,E)){const J=r(this,E);ut(this,E,null),this._uiManager.enableWaiting(!0),ut(this,f,this._uiManager.imageManager.getFromFile(J).then(K=>q(this,v,me).call(this,K)).finally(()=>q(this,v,ve).call(this)));return}const _=document.createElement("input");_.type="file",_.accept=L.supportedTypesStr,ut(this,f,new Promise(J=>{_.addEventListener("change",async()=>{if(!_.files||_.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const K=await this._uiManager.imageManager.getFromFile(_.files[0]);q(this,v,me).call(this,K)}J()}),_.addEventListener("cancel",()=>{this.remove(),J()})}).finally(()=>q(this,v,ve).call(this))),_.click()},dn=function(){const{div:_}=this;let{width:J,height:K}=r(this,T);const[it,W]=this.pageDimensions,Y=.75;if(this.width)J=this.width*it,K=this.height*W;else if(J>Y*it||K>Y*W){const p=Math.min(Y*it/J,Y*W/K);J*=p,K*=p}const[rt,$]=this.parentDimensions;this.setDims(J*rt/it,K*$/W),this._uiManager.enableWaiting(!1);const d=ut(this,A,document.createElement("canvas"));_.append(d),_.hidden=!1,q(this,v,fn).call(this,J,K),q(this,v,Jn).call(this),r(this,s)||(this.parent.addUndoableEditor(this),ut(this,s,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},_n=function(_,J){var Y;const[K,it]=this.parentDimensions;this.width=_/K,this.height=J/it,this.setDims(_,J),(Y=this._initialOptions)!=null&&Y.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,r(this,c)!==null&&clearTimeout(r(this,c)),ut(this,c,setTimeout(()=>{ut(this,c,null),q(this,v,fn).call(this,_,J)},200))},Kn=function(_,J){const{width:K,height:it}=r(this,T);let W=K,Y=it,rt=r(this,T);for(;W>2*_||Y>2*J;){const $=W,d=Y;W>2*_&&(W=W>=16384?Math.floor(W/2)-1:Math.ceil(W/2)),Y>2*J&&(Y=Y>=16384?Math.floor(Y/2)-1:Math.ceil(Y/2));const p=new OffscreenCanvas(W,Y);p.getContext("2d").drawImage(rt,0,0,$,d,0,0,W,Y),rt=p.transferToImageBitmap()}return rt},fn=function(_,J){_=Math.ceil(_),J=Math.ceil(J);const K=r(this,A);if(!K||K.width===_&&K.height===J)return;K.width=_,K.height=J;const it=r(this,l)?r(this,T):q(this,v,Kn).call(this,_,J),W=K.getContext("2d");W.filter=this._uiManager.hcmFilter,W.drawImage(it,0,0,it.width,it.height,0,0,_,J)},Fe=function(_){if(_){if(r(this,l)){const it=this._uiManager.imageManager.getSvgUrl(r(this,y));if(it)return it}const J=document.createElement("canvas");return{width:J.width,height:J.height}=r(this,T),J.getContext("2d").drawImage(r(this,T),0,0),J.toDataURL()}if(r(this,l)){const[J,K]=this.pageDimensions,it=Math.round(this.width*J*o.PixelsPerInch.PDF_TO_CSS_UNITS),W=Math.round(this.height*K*o.PixelsPerInch.PDF_TO_CSS_UNITS),Y=new OffscreenCanvas(it,W);return Y.getContext("2d").drawImage(r(this,T),0,0,r(this,T).width,r(this,T).height,0,0,it,W),Y.transferToImageBitmap()}return structuredClone(r(this,T))},Jn=function(){ut(this,a,new ResizeObserver(_=>{const J=_[0].contentRect;J.width&&J.height&&q(this,v,_n).call(this,J.width,J.height)})),r(this,a).observe(this.div)},Qt(L,"_type","stamp");let w=L;i.StampEditor=w}],__webpack_module_cache__={};function __w_pdfjs_require__(C){var i=__webpack_module_cache__[C];if(i!==void 0)return i.exports;var t=__webpack_module_cache__[C]={exports:{}};return __webpack_modules__[C].call(t.exports,t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var C=__webpack_exports__;Object.defineProperty(C,"__esModule",{value:!0}),Object.defineProperty(C,"AbortException",{enumerable:!0,get:function(){return i.AbortException}}),Object.defineProperty(C,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(C,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(C,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(C,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return m.AnnotationEditorUIManager}}),Object.defineProperty(C,"AnnotationLayer",{enumerable:!0,get:function(){return w.AnnotationLayer}}),Object.defineProperty(C,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(C,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(C,"DOMSVGFactory",{enumerable:!0,get:function(){return e.DOMSVGFactory}}),Object.defineProperty(C,"FeatureTest",{enumerable:!0,get:function(){return i.FeatureTest}}),Object.defineProperty(C,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(C,"ImageKind",{enumerable:!0,get:function(){return i.ImageKind}}),Object.defineProperty(C,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(C,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(C,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(C,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(C,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(C,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(C,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(C,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(C,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(C,"PromiseCapability",{enumerable:!0,get:function(){return i.PromiseCapability}}),Object.defineProperty(C,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(C,"SVGGraphics",{enumerable:!0,get:function(){return t.SVGGraphics}}),Object.defineProperty(C,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(C,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(C,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(C,"XfaLayer",{enumerable:!0,get:function(){return y.XfaLayer}}),Object.defineProperty(C,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(C,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(C,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(C,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(C,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(C,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(C,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(C,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(C,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(C,"noContextMenu",{enumerable:!0,get:function(){return e.noContextMenu}}),Object.defineProperty(C,"normalizeUnicode",{enumerable:!0,get:function(){return i.normalizeUnicode}}),Object.defineProperty(C,"renderTextLayer",{enumerable:!0,get:function(){return n.renderTextLayer}}),Object.defineProperty(C,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(C,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(C,"updateTextLayer",{enumerable:!0,get:function(){return n.updateTextLayer}}),Object.defineProperty(C,"version",{enumerable:!0,get:function(){return t.version}});var i=__w_pdfjs_require__(1),t=__w_pdfjs_require__(124),e=__w_pdfjs_require__(168),n=__w_pdfjs_require__(195),o=__w_pdfjs_require__(196),m=__w_pdfjs_require__(165),w=__w_pdfjs_require__(198),T=__w_pdfjs_require__(176),y=__w_pdfjs_require__(201)})(),__webpack_exports__})())})(pdf$2);var pdfExports=pdf$2.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdf$1 as p};
